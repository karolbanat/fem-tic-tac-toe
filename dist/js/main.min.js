"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(r){var n=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(r);return _possibleConstructorReturn(this,n?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _createForOfIteratorHelper(e,t){var r,n,a,o,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return n=!(r=!0),{s:function(){i=i.call(e)},n:function(){var e=i.next();return r=e.done,e},e:function(e){n=!0,a=e},f:function(){try{r||null==i.return||i.return()}finally{if(n)throw a}}};if(Array.isArray(e)||(i=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var r;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Game=_createClass(function e(t,r){var a=this;_classCallCheck(this,e),this.ties=0,this.gameCount=0,this.turnCount=0,this.onFieldClick=function(e){var e=e.target,t=parseInt(e.dataset.row),e=parseInt(e.dataset.column);a.makeMove(t,e)},this.onGameContinue=function(){a.gameCount++,a.turnCount=0,a.gameBoard.clear(),a.scoreBoard.updateScore(a.xPlayer,a.oPlayer,a.ties),a.makeMoveCPU()},this.onGameQuit=function(){a.gameContainer.classList.add("hidden"),a.gameBoard.clear(),a.gameMenu.show()},this.init=function(e,t){var r,n="x"===t?"o":"x",e="singleplayer"===e?(r="you",new CPUPlayer("cpu",n)):(r="p1",new Player("p2",n)),n=new Player(r,t);"x"===t?(a.xPlayer=n,a.oPlayer=e):(a.xPlayer=e,a.oPlayer=n),a.playerQueue=[a.xPlayer,a.oPlayer],a.gameContainer.classList.remove("hidden"),a.startGame()},this.startGame=function(){a.scoreBoard.init(a.xPlayer,a.oPlayer,a.ties),a.gameBoard.init(),a.turnIndicator.update(a.getCurrentPlayerMark()),a.makeMoveCPU()},this.getCurrentPlayerMark=function(){return a.getCurrentPlayer().getMark()},this.getCurrentPlayer=function(){return a.playerQueue[(a.gameCount+a.turnCount)%2]},this.makeMove=function(e,t){a.gameBoard.isFieldChecked(e,t)||(a.gameBoard.checkField(a.getCurrentPlayer().getMark(),e,t),a.afterMove())},this.afterMove=function(){null!==a.gameBoard.getWinningFields()?(a.gameResultModal.show(a.getCurrentPlayer()),a.getCurrentPlayer().updateScore()):a.gameBoard.isFull()?(a.gameResultModal.show(),a.ties++):(a.increaseTurnCount(),a.turnIndicator.update(a.getCurrentPlayerMark()),a.makeMoveCPU())},this.makeMoveCPU=function(){a.getCurrentPlayer()instanceof CPUPlayer&&a.makeMove.apply(a,_toConsumableArray(a.getCurrentPlayer().makeMove(a.gameBoard)))},this.increaseTurnCount=function(){return++a.turnCount},this.gameMenu=new GameMenu(t,this.init),this.gameMenu.init(),this.gameContainer=document.querySelector(r),this.scoreBoard=new ScoreBoard("#score-board"),this.gameBoard=new GameBoard("#game-board",this.onFieldClick,this.getCurrentPlayerMark),this.turnIndicator=new TurnIndicator,this.gameResultModal=new ResultModal(this.onGameQuit,this.onGameContinue)}),GameMenu=_createClass(function e(t,r){var n=this;_classCallCheck(this,e),this.gameInit=r,this.init=function(){n.formSubmitButtons.forEach(function(e){return e.addEventListener("click",n.handleMenuSubmitButton)})},this.handleMenuSubmitButton=function(e){var t;e.preventDefault(),n.isAnyOptionSelected()?(n.errorMsg.classList.remove("visible"),n.errorMsg.innerText="",e=e.target.dataset.mode,t=n.getCheckedOptionMark(),n.hide(),n.gameInit(e,t)):(n.errorMsg.classList.add("visible"),n.errorMsg.innerText="Please select mark for player 1")},this.show=function(){n.gameMenu.classList.remove("hidden")},this.hide=function(){n.gameMenu.classList.add("hidden")},this.isAnyOptionSelected=function(){return Array.from(n.formOptions).some(function(e){return e.checked})},this.getCheckedOptionMark=function(){var e,t=_createForOfIteratorHelper(n.formOptions);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(r.checked)return r.dataset.mark}}catch(e){t.e(e)}finally{t.f()}return""},this.gameMenu=document.querySelector(t),this.menuForm=this.gameMenu.querySelector("form"),this.formOptions=this.menuForm.querySelectorAll('input[type="radio"]'),this.errorMsg=this.menuForm.querySelector('[role="alert"]'),this.formSubmitButtons=this.menuForm.querySelectorAll('button[type="submit"]')}),TurnIndicator=_createClass(function e(){var t=this;_classCallCheck(this,e),this.update=function(e){t.currentPlayerMarkElement.innerText=e,t.currentPlayerMarkIcon.src="./dist/assets/icon-".concat(e,".svg")},this.currentPlayerMarkElement=document.querySelector("#current-player-mark"),this.currentPlayerMarkIcon=document.querySelector("#current-player-mark-icon")}),ScoreBoard=_createClass(function e(t){var n=this;_classCallCheck(this,e),this.init=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;n.p1Label.innerText=e.toString(),n.p2Label.innerText=t.toString(),n.updateScore(e,t,r)},this.updateScore=function(e,t,r){n.p1Score.innerText=e.getScore().toString(),n.p2Score.innerText=t.getScore().toString(),n.tiesScore.innerText=r.toString()},this.scoreBoardContainer=document.querySelector(t),this.p1Label=this.scoreBoardContainer.querySelector("#p1-game-name"),this.p1Score=this.scoreBoardContainer.querySelector("#p1-game-score"),this.p2Label=this.scoreBoardContainer.querySelector("#p2-game-name"),this.p2Score=this.scoreBoardContainer.querySelector("#p2-game-score"),this.tiesScore=this.scoreBoardContainer.querySelector("#game-ties")}),ResultModal=_createClass(function e(t,r){var a=this;_classCallCheck(this,e),this.gameQuitHandling=t,this.gameContinueHandling=r,this.handleContinue=function(e){a.gameContinueHandling(),a.hide()},this.handleQuit=function(){a.hide(),a.gameQuitHandling()},this.show=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;a.modal.classList.add("active"),a.updateResult(e)},this.hide=function(){a.modal.classList.remove("active")},this.updateResult=function(e){null===e?a.displayTieResult():a.displayWinnerResult(e),a.quitButton.focus()},this.displayTieResult=function(){a.modal.setAttribute("data-winner","tie"),a.modalHeading.innerHTML="",a.modalHeading.innerText="Round tied"},this.displayWinnerResult=function(e){a.modal.setAttribute("data-winner",e.getMark());var t=a.getRoundMessage(e.getName());a.modalMessage.innerText=t,a.setResultHeading(e)},this.setResultHeading=function(e){a.modalHeading.innerHTML="";var e=e.getMark(),t=document.createElement("img"),r=(t.setAttribute("src","./dist/assets/icon-".concat(e,".svg")),t.setAttribute("alt",""),document.createElement("span")),e=(r.classList.add("visually-hidden"),r.innerText=e,document.createTextNode("takes the round")),n=document.createElement("span");n.appendChild(r),n.appendChild(e),a.modalHeading.appendChild(t),a.modalHeading.appendChild(n)},this.getRoundMessage=function(e){var t;switch(e){case"p1":t="Player 1 wins!";break;case"p2":t="Player 2 wins!";break;case"you":t="You won!";break;case"cpu":t="Oh no, you lost...";break;default:t=""}return t},this.modal=document.querySelector("#game-result-modal"),this.modalMessage=this.modal.querySelector(".modal__message"),this.modalHeading=this.modal.querySelector(".modal__heading"),this.quitButton=this.modal.querySelector('button[data-action="quit"]'),this.quitButton.addEventListener("click",this.handleQuit),this.continueButton=this.modal.querySelector('button[data-action="continue"]'),this.continueButton.addEventListener("click",this.handleContinue)}),GameBoard=_createClass(function e(t,r,n){var a=this;_classCallCheck(this,e),this.onFieldClick=r,this.getCurrentMark=n,this.BOARD_SIZE=3,this.init=function(){a.board=[[],[],[]];for(var e=a.boardElement.querySelectorAll(".game-board__field"),t=0;t<a.board.length;t++)for(var r=0;r<a.BOARD_SIZE;r++)a.board[t].push(new Field(t,r,e[r+t*a.BOARD_SIZE],a.onFieldClick,a.getCurrentMark))},this.checkField=function(e,t,r){t<a.board.length&&r<a.board[0].length&&a.board[t][r].check(e)},this.isFieldChecked=function(e,t){return a.board[e][t].isChecked()},this.isFull=function(){return a.board.flat().every(function(e){return e.isChecked()})},this.getWinningFields=function(){return a.checkRows()||a.checkColumns()||a.checkDiagonal()},this.checkRows=function(){for(var e=0;e<a.BOARD_SIZE;e++)if(null!==a.board[e][0].getMark()&&a.board[e][0].getMark()===a.board[e][1].getMark()&&a.board[e][1].getMark()===a.board[e][2].getMark())return[a.board[e][0],a.board[e][1],a.board[e][2]];return null},this.checkColumns=function(){for(var e=0;e<a.BOARD_SIZE;e++)if(null!==a.board[0][e].getMark()&&a.board[0][e].getMark()===a.board[1][e].getMark()&&a.board[1][e].getMark()===a.board[2][e].getMark())return[a.board[0][e],a.board[1][e],a.board[2][e]];return null},this.checkDiagonal=function(){return null!==a.board[1][1].getMark()&&a.board[0][0].getMark()===a.board[1][1].getMark()&&a.board[1][1].getMark()===a.board[2][2].getMark()||null!==a.board[1][1].getMark()&&a.board[0][2].getMark()===a.board[1][1].getMark()&&a.board[1][1].getMark()===a.board[2][0].getMark()?[a.board[0][0],a.board[1][1],a.board[2][2]]:null},this.clear=function(){for(var e=0;e<a.board.length;e++)for(var t=0;t<a.BOARD_SIZE;t++)a.board[e][t].clear()},this.boardElement=document.querySelector(t)}),Field=_createClass(function e(t,r,n,a,o){var i=this;_classCallCheck(this,e),this.row=t,this.column=r,this.fieldElement=n,this.gameOnClickHandler=a,this.getCurrentMark=o,this.mark=null,this.handleHover=function(){var e=i.getCurrentMark();i.fieldElement.setAttribute("data-current-player",e)},this.handleBlur=function(){i.fieldElement.removeAttribute("data-current-player")},this.clear=function(){i.mark=null,i.fieldElement.setAttribute("aria-label","Row ".concat(i.row+1,", column ").concat(i.column+1,", empty field")),i.fieldElement.removeAttribute("data-current-player"),i.fieldElement.removeAttribute("data-mark")},this.check=function(e){i.mark=e,i.fieldElement.setAttribute("aria-label","Row ".concat(i.row+1,", column ").concat(i.column+1,", ").concat(i.mark," mark")),i.fieldElement.setAttribute("data-mark",e)},this.isChecked=function(){return null!==i.mark},this.getMark=function(){return i.mark},this.fieldElement&&(this.fieldElement.addEventListener("click",this.gameOnClickHandler),this.fieldElement.addEventListener("mouseover",this.handleHover),this.fieldElement.addEventListener("focusin",this.handleHover),this.fieldElement.addEventListener("mouseout",this.handleBlur),this.fieldElement.addEventListener("focusout",this.handleBlur),this.fieldElement.dataset.row=this.row.toString(),this.fieldElement.dataset.column=this.column.toString(),this.clear())}),Player=_createClass(function e(t,r){var n=this,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck(this,e),this.name=t,this.mark=r,this.score=a,this.toString=function(){return"".concat(n.mark," (").concat(n.name,")")},this.getName=function(){return n.name},this.getMark=function(){return n.mark},this.getScore=function(){return n.score},this.updateScore=function(){return++n.score}}),CPUPlayer=function(){_inherits(r,Player);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).makeMove=function(e){for(var t,r,n=e.BOARD_SIZE;t=Math.floor(Math.random()*n),r=Math.floor(Math.random()*n),e.isFieldChecked(t,r););return[t,r]},e}return _createClass(r)}(),ticTacToeGame=new Game("#game-menu","#tic-tac-toe-game");
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4udHMiLCJtYWluLmpzIl0sIm5hbWVzIjpbIkdhbWUiLCJfY3JlYXRlQ2xhc3MiLCJnYW1lTWVudUlkIiwiZ2FtZUNvbnRhaW5lcklkIiwiX3RoaXMiLCJ0aGlzIiwiX2NsYXNzQ2FsbENoZWNrIiwidGllcyIsImdhbWVDb3VudCIsInR1cm5Db3VudCIsIm9uRmllbGRDbGljayIsImV2IiwiZmllbGRCdXR0b24iLCJ0YXJnZXQiLCJyb3ciLCJwYXJzZUludCIsImRhdGFzZXQiLCJjb2x1bW4iLCJtYWtlTW92ZSIsIm9uR2FtZUNvbnRpbnVlIiwiZ2FtZUJvYXJkIiwiY2xlYXIiLCJzY29yZUJvYXJkIiwidXBkYXRlU2NvcmUiLCJ4UGxheWVyIiwib1BsYXllciIsIm1ha2VNb3ZlQ1BVIiwib25HYW1lUXVpdCIsImdhbWVDb250YWluZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJnYW1lTWVudSIsInNob3ciLCJpbml0IiwibW9kZSIsInAxTWFyayIsInAxTGFiZWwiLCJwMk1hcmsiLCJwbGF5ZXIyIiwiQ1BVUGxheWVyIiwiUGxheWVyIiwicGxheWVyMSIsInBsYXllclF1ZXVlIiwicmVtb3ZlIiwic3RhcnRHYW1lIiwidHVybkluZGljYXRvciIsInVwZGF0ZSIsImdldEN1cnJlbnRQbGF5ZXJNYXJrIiwiZ2V0Q3VycmVudFBsYXllciIsImdldE1hcmsiLCJpc0ZpZWxkQ2hlY2tlZCIsImNoZWNrRmllbGQiLCJhZnRlck1vdmUiLCJnZXRXaW5uaW5nRmllbGRzIiwiZ2FtZVJlc3VsdE1vZGFsIiwiaXNGdWxsIiwiaW5jcmVhc2VUdXJuQ291bnQiLCJhcHBseSIsIl90b0NvbnN1bWFibGVBcnJheSIsIkdhbWVNZW51IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiU2NvcmVCb2FyZCIsIkdhbWVCb2FyZCIsIlR1cm5JbmRpY2F0b3IiLCJSZXN1bHRNb2RhbCIsImdhbWVJbml0IiwiX3RoaXMyIiwiZm9ybVN1Ym1pdEJ1dHRvbnMiLCJmb3JFYWNoIiwiYnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZU1lbnVTdWJtaXRCdXR0b24iLCJwcmV2ZW50RGVmYXVsdCIsImlzQW55T3B0aW9uU2VsZWN0ZWQiLCJlcnJvck1zZyIsImlubmVyVGV4dCIsImdhbWVNb2RlIiwiZ2V0Q2hlY2tlZE9wdGlvbk1hcmsiLCJoaWRlIiwiQXJyYXkiLCJmcm9tIiwiZm9ybU9wdGlvbnMiLCJzb21lIiwib3B0aW9uIiwiY2hlY2tlZCIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwiX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiLCJzIiwibiIsImRvbmUiLCJ2YWx1ZSIsIm1hcmsiLCJlcnIiLCJlIiwiZiIsIm1lbnVGb3JtIiwicXVlcnlTZWxlY3RvckFsbCIsIl90aGlzMyIsImN1cnJlbnRQbGF5ZXJNYXJrRWxlbWVudCIsImN1cnJlbnRQbGF5ZXJNYXJrSWNvbiIsInNyYyIsImNvbmNhdCIsInNjb3JlQm9hcmRJZCIsIl90aGlzNCIsInAxIiwicDIiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJ0b1N0cmluZyIsInAyTGFiZWwiLCJwMVNjb3JlIiwiZ2V0U2NvcmUiLCJwMlNjb3JlIiwidGllc1Njb3JlIiwic2NvcmVCb2FyZENvbnRhaW5lciIsImdhbWVRdWl0SGFuZGxpbmciLCJnYW1lQ29udGludWVIYW5kbGluZyIsIl90aGlzNSIsImhhbmRsZUNvbnRpbnVlIiwiaGFuZGxlUXVpdCIsIndpbm5lciIsIm1vZGFsIiwidXBkYXRlUmVzdWx0IiwiZGlzcGxheVRpZVJlc3VsdCIsImRpc3BsYXlXaW5uZXJSZXN1bHQiLCJxdWl0QnV0dG9uIiwiZm9jdXMiLCJzZXRBdHRyaWJ1dGUiLCJtb2RhbEhlYWRpbmciLCJpbm5lckhUTUwiLCJtZXNzYWdlIiwiZ2V0Um91bmRNZXNzYWdlIiwiZ2V0TmFtZSIsIm1vZGFsTWVzc2FnZSIsInNldFJlc3VsdEhlYWRpbmciLCJpbWdFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImhpZGRlbk1hcmsiLCJtZXNzYWdlVGV4dCIsImNyZWF0ZVRleHROb2RlIiwiaGVhZGluZ1NwYW4iLCJhcHBlbmRDaGlsZCIsInBsYXllck5hbWUiLCJjb250aW51ZUJ1dHRvbiIsImdhbWVCb2FyZElkIiwiZ2V0Q3VycmVudE1hcmsiLCJfdGhpczYiLCJCT0FSRF9TSVpFIiwiYm9hcmQiLCJib2FyZEZpZWxkRWxlbWVudHMiLCJib2FyZEVsZW1lbnQiLCJwdXNoIiwiRmllbGQiLCJjaGVjayIsImlzQ2hlY2tlZCIsImZsYXQiLCJldmVyeSIsImZpZWxkIiwiY2hlY2tSb3dzIiwiY2hlY2tDb2x1bW5zIiwiY2hlY2tEaWFnb25hbCIsImZpZWxkRWxlbWVudCIsImdhbWVPbkNsaWNrSGFuZGxlciIsIl90aGlzNyIsImhhbmRsZUhvdmVyIiwiY3VycmVudFBsYXllck1hcmsiLCJoYW5kbGVCbHVyIiwicmVtb3ZlQXR0cmlidXRlIiwibmFtZSIsIl90aGlzOCIsInNjb3JlIiwiX2luaGVyaXRzIiwiX3N1cGVyIiwiX2NyZWF0ZVN1cGVyIiwiX3RoaXM5IiwiYm9hcmRTaXplIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwidGljVGFjVG9lR2FtZSJdLCJtYXBwaW5ncyI6Imd5SEFLQSxJQUNNQSxLQUFJQyxhQWlCVCxTQUFBRCxFQUFZRSxFQUFvQkMsR0FBdUIsSUFBQUMsRUFBQUMsS0FBQUMsZ0JBQUFELEtBQUFMLENBQUEsRUFKL0NLLEtBQUFFLEtBQWUsRUFDZkYsS0FBQUcsVUFBb0IsRUFDcEJILEtBQUFJLFVBQW9CLEVBWTVCSixLQUFBSyxhQUFlLFNBQUNDLEdBRWYsSUFBTUMsRUFBY0QsRUFBR0UsT0FDakJDLEVBQWNDLFNBQVNILEVBQVlJLFFBQVFGLEdBQUcsRUFDOUNHLEVBQWlCRixTQUFTSCxFQUFZSSxRQUFRQyxNQUFNLEVBQzFEYixFQUFLYyxTQUFTSixFQUFLRyxDQUFNLENBQzFCLEVBRUFaLEtBQUFjLGVBQWlCLFdBQ2hCZixFQUFLSSxTQUFTLEdBQ2RKLEVBQUtLLFVBQVksRUFDakJMLEVBQUtnQixVQUFVQyxNQUFLLEVBQ3BC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Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogdHlwZXMgKi9cclxudHlwZSBUcmlwbGVGaWVsZCA9IFtGaWVsZCwgRmllbGQsIEZpZWxkXTtcclxuLyogdHlwZXMgZW5kICovXHJcblxyXG4vKiBjbGFzc2VzICovXHJcbi8qIEdhbWUgY2xhc3Mgc3RhcnQgKi9cclxuY2xhc3MgR2FtZSB7XHJcblx0LyogZ2FtZSBlbGVtZW50cyAqL1xyXG5cdHByaXZhdGUgZ2FtZU1lbnU6IEdhbWVNZW51O1xyXG5cdHByaXZhdGUgZ2FtZUNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBnYW1lQm9hcmQ6IEdhbWVCb2FyZDtcclxuXHRwcml2YXRlIHNjb3JlQm9hcmQ6IFNjb3JlQm9hcmQ7XHJcblx0cHJpdmF0ZSB0dXJuSW5kaWNhdG9yOiBUdXJuSW5kaWNhdG9yO1xyXG5cdHByaXZhdGUgZ2FtZVJlc3VsdE1vZGFsOiBSZXN1bHRNb2RhbDtcclxuXHQvKiBwbGF5ZXJzICovXHJcblx0cHJpdmF0ZSB4UGxheWVyOiBQbGF5ZXI7XHJcblx0cHJpdmF0ZSBvUGxheWVyOiBQbGF5ZXI7XHJcblx0cHJpdmF0ZSBwbGF5ZXJRdWV1ZTogW1BsYXllciwgUGxheWVyXTtcclxuXHQvKiBnYW1lIHN0YXRlcyAqL1xyXG5cdHByaXZhdGUgdGllczogbnVtYmVyID0gMDtcclxuXHRwcml2YXRlIGdhbWVDb3VudDogbnVtYmVyID0gMDtcclxuXHRwcml2YXRlIHR1cm5Db3VudDogbnVtYmVyID0gMDtcclxuXHJcblx0Y29uc3RydWN0b3IoZ2FtZU1lbnVJZDogc3RyaW5nLCBnYW1lQ29udGFpbmVySWQ6IHN0cmluZykge1xyXG5cdFx0dGhpcy5nYW1lTWVudSA9IG5ldyBHYW1lTWVudShnYW1lTWVudUlkLCB0aGlzLmluaXQpO1xyXG5cdFx0dGhpcy5nYW1lTWVudS5pbml0KCk7XHJcblx0XHR0aGlzLmdhbWVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGdhbWVDb250YWluZXJJZCk7XHJcblx0XHR0aGlzLnNjb3JlQm9hcmQgPSBuZXcgU2NvcmVCb2FyZCgnI3Njb3JlLWJvYXJkJyk7XHJcblx0XHR0aGlzLmdhbWVCb2FyZCA9IG5ldyBHYW1lQm9hcmQoJyNnYW1lLWJvYXJkJywgdGhpcy5vbkZpZWxkQ2xpY2ssIHRoaXMuZ2V0Q3VycmVudFBsYXllck1hcmspO1xyXG5cdFx0dGhpcy50dXJuSW5kaWNhdG9yID0gbmV3IFR1cm5JbmRpY2F0b3IoKTtcclxuXHRcdHRoaXMuZ2FtZVJlc3VsdE1vZGFsID0gbmV3IFJlc3VsdE1vZGFsKHRoaXMub25HYW1lUXVpdCwgdGhpcy5vbkdhbWVDb250aW51ZSk7XHJcblx0fVxyXG5cclxuXHRvbkZpZWxkQ2xpY2sgPSAoZXY6IEV2ZW50KTogdm9pZCA9PiB7XHJcblx0XHQvKiByZXRyaWV2ZSByb3cgYW5kIGNvbHVtbiBmcm9tIGNsaWNrZWQgYnV0dG9uIGFuZCBtYWtlIG1vdmUgKi9cclxuXHRcdGNvbnN0IGZpZWxkQnV0dG9uID0gZXYudGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5cdFx0Y29uc3Qgcm93OiBudW1iZXIgPSBwYXJzZUludChmaWVsZEJ1dHRvbi5kYXRhc2V0LnJvdyk7XHJcblx0XHRjb25zdCBjb2x1bW46IG51bWJlciA9IHBhcnNlSW50KGZpZWxkQnV0dG9uLmRhdGFzZXQuY29sdW1uKTtcclxuXHRcdHRoaXMubWFrZU1vdmUocm93LCBjb2x1bW4pO1xyXG5cdH07XHJcblxyXG5cdG9uR2FtZUNvbnRpbnVlID0gKCkgPT4ge1xyXG5cdFx0dGhpcy5nYW1lQ291bnQrKztcclxuXHRcdHRoaXMudHVybkNvdW50ID0gMDtcclxuXHRcdHRoaXMuZ2FtZUJvYXJkLmNsZWFyKCk7XHJcblx0XHR0aGlzLnNjb3JlQm9hcmQudXBkYXRlU2NvcmUodGhpcy54UGxheWVyLCB0aGlzLm9QbGF5ZXIsIHRoaXMudGllcyk7XHJcblx0XHR0aGlzLm1ha2VNb3ZlQ1BVKCk7XHJcblx0fTtcclxuXHJcblx0b25HYW1lUXVpdCA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuZ2FtZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuXHRcdHRoaXMuZ2FtZUJvYXJkLmNsZWFyKCk7XHJcblx0XHR0aGlzLmdhbWVNZW51LnNob3coKTtcclxuXHR9O1xyXG5cclxuXHRpbml0ID0gKG1vZGU6IHN0cmluZywgcDFNYXJrOiBzdHJpbmcpOiB2b2lkID0+IHtcclxuXHRcdGNvbnN0IHAyTWFyazogc3RyaW5nID0gcDFNYXJrID09PSAneCcgPyAnbycgOiAneCc7XHJcblx0XHRsZXQgcDFMYWJlbDogc3RyaW5nLCBwbGF5ZXIxOiBQbGF5ZXI7XHJcblx0XHRsZXQgcDJMYWJlbDogc3RyaW5nLCBwbGF5ZXIyOiBQbGF5ZXI7XHJcblxyXG5cdFx0LyogY3JlYXRlcyBsYWJlbHMgYW5kIHBsYXllcnMgZGVwZW5kaW5nIG9uIGdhbWUgbW9kZSAqL1xyXG5cdFx0aWYgKG1vZGUgPT09ICdzaW5nbGVwbGF5ZXInKSB7XHJcblx0XHRcdHAxTGFiZWwgPSAneW91JztcclxuXHRcdFx0cDJMYWJlbCA9ICdjcHUnO1xyXG5cdFx0XHRwbGF5ZXIyID0gbmV3IENQVVBsYXllcihwMkxhYmVsLCBwMk1hcmspO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cDFMYWJlbCA9ICdwMSc7XHJcblx0XHRcdHAyTGFiZWwgPSAncDInO1xyXG5cdFx0XHRwbGF5ZXIyID0gbmV3IFBsYXllcihwMkxhYmVsLCBwMk1hcmspO1xyXG5cdFx0fVxyXG5cdFx0cGxheWVyMSA9IG5ldyBQbGF5ZXIocDFMYWJlbCwgcDFNYXJrKTtcclxuXHJcblx0XHQvKiBhc3NpZ25zIGNyZWF0ZWQgcGxheWVycyB0byByaWdodCBzcG90cyAqL1xyXG5cdFx0aWYgKHAxTWFyayA9PT0gJ3gnKSB7XHJcblx0XHRcdHRoaXMueFBsYXllciA9IHBsYXllcjE7XHJcblx0XHRcdHRoaXMub1BsYXllciA9IHBsYXllcjI7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLnhQbGF5ZXIgPSBwbGF5ZXIyO1xyXG5cdFx0XHR0aGlzLm9QbGF5ZXIgPSBwbGF5ZXIxO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qIGNyZWF0ZXMgdHVwbGUgb2YgcGxheWVycywgdG8gY2hvb3NlIGN1cnJlbnQgcGxheWVyIGRlcGVuZGluZyBvbiB0dXJuIGNvdW50ZXIgKi9cclxuXHRcdHRoaXMucGxheWVyUXVldWUgPSBbdGhpcy54UGxheWVyLCB0aGlzLm9QbGF5ZXJdO1xyXG5cclxuXHRcdC8qIHNob3dzIGdhbWUgY29udGFpbmVyICovXHJcblx0XHR0aGlzLmdhbWVDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcblxyXG5cdFx0dGhpcy5zdGFydEdhbWUoKTtcclxuXHR9O1xyXG5cclxuXHRzdGFydEdhbWUgPSAoKTogdm9pZCA9PiB7XHJcblx0XHQvKiBpbml0aWFsaXplIHNjb3JlIGJvYXJkIHdpdGggY3JlYXRlZCBwbGF5ZXJzICovXHJcblx0XHR0aGlzLnNjb3JlQm9hcmQuaW5pdCh0aGlzLnhQbGF5ZXIsIHRoaXMub1BsYXllciwgdGhpcy50aWVzKTtcclxuXHJcblx0XHQvKiBpbml0aWFsaXplIGdhbWUgYm9hcmQgKi9cclxuXHRcdHRoaXMuZ2FtZUJvYXJkLmluaXQoKTtcclxuXHJcblx0XHR0aGlzLnR1cm5JbmRpY2F0b3IudXBkYXRlKHRoaXMuZ2V0Q3VycmVudFBsYXllck1hcmsoKSk7XHJcblxyXG5cdFx0LyogaWYgc3RhcnRpbmcgcGxheWVyIGlzIENQVSB0aGVuIG1ha2UgYXV0byBtb3ZlICovXHJcblx0XHR0aGlzLm1ha2VNb3ZlQ1BVKCk7XHJcblx0fTtcclxuXHJcblx0Z2V0Q3VycmVudFBsYXllck1hcmsgPSAoKTogc3RyaW5nID0+IHtcclxuXHRcdHJldHVybiB0aGlzLmdldEN1cnJlbnRQbGF5ZXIoKS5nZXRNYXJrKCk7XHJcblx0fTtcclxuXHJcblx0Z2V0Q3VycmVudFBsYXllciA9ICgpOiBQbGF5ZXIgPT4ge1xyXG5cdFx0cmV0dXJuIHRoaXMucGxheWVyUXVldWVbKHRoaXMuZ2FtZUNvdW50ICsgdGhpcy50dXJuQ291bnQpICUgMl07XHJcblx0fTtcclxuXHJcblx0bWFrZU1vdmUgPSAocm93OiBudW1iZXIsIGNvbHVtbjogbnVtYmVyKTogdm9pZCA9PiB7XHJcblx0XHQvKiBvbiBmaWVsZCBjbGljaywgaWYgZmllbGQgaXMgY2hlY2tlZCB0aGVuIHJldHVybiBkb2luZyBub3RoaW5nICovXHJcblx0XHRpZiAodGhpcy5nYW1lQm9hcmQuaXNGaWVsZENoZWNrZWQocm93LCBjb2x1bW4pKSByZXR1cm47XHJcblxyXG5cdFx0LyogY2hlY2tzIHNlbGVjdGVkIGZpZWxkICovXHJcblx0XHR0aGlzLmdhbWVCb2FyZC5jaGVja0ZpZWxkKHRoaXMuZ2V0Q3VycmVudFBsYXllcigpLmdldE1hcmsoKSwgcm93LCBjb2x1bW4pO1xyXG5cdFx0dGhpcy5hZnRlck1vdmUoKTtcclxuXHR9O1xyXG5cclxuXHRhZnRlck1vdmUgPSAoKTogdm9pZCA9PiB7XHJcblx0XHRjb25zdCB3aW5uaW5nRmllbGRzID0gdGhpcy5nYW1lQm9hcmQuZ2V0V2lubmluZ0ZpZWxkcygpO1xyXG5cdFx0aWYgKHdpbm5pbmdGaWVsZHMgIT09IG51bGwpIHtcclxuXHRcdFx0dGhpcy5nYW1lUmVzdWx0TW9kYWwuc2hvdyh0aGlzLmdldEN1cnJlbnRQbGF5ZXIoKSk7XHJcblx0XHRcdHRoaXMuZ2V0Q3VycmVudFBsYXllcigpLnVwZGF0ZVNjb3JlKCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5nYW1lQm9hcmQuaXNGdWxsKCkpIHtcclxuXHRcdFx0dGhpcy5nYW1lUmVzdWx0TW9kYWwuc2hvdygpO1xyXG5cdFx0XHR0aGlzLnRpZXMrKztcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuaW5jcmVhc2VUdXJuQ291bnQoKTtcclxuXHRcdHRoaXMudHVybkluZGljYXRvci51cGRhdGUodGhpcy5nZXRDdXJyZW50UGxheWVyTWFyaygpKTtcclxuXHJcblx0XHR0aGlzLm1ha2VNb3ZlQ1BVKCk7XHJcblx0fTtcclxuXHJcblx0bWFrZU1vdmVDUFUgPSAoKTogdm9pZCA9PiB7XHJcblx0XHQvKiBhZnRlciBmaWVsZCBpcyBjaGVja2VkLCBjaGVja3MgaWYgY3VycmVudCBwbGF5ZXIgaXMgQ1BVIGFuZCBpZiBpcywgdGhlbiBtYWtlcyBhIG1vdmUgKi9cclxuXHRcdGlmICh0aGlzLmdldEN1cnJlbnRQbGF5ZXIoKSBpbnN0YW5jZW9mIENQVVBsYXllcikge1xyXG5cdFx0XHR0aGlzLm1ha2VNb3ZlKC4uLih0aGlzLmdldEN1cnJlbnRQbGF5ZXIoKSBhcyBDUFVQbGF5ZXIpLm1ha2VNb3ZlKHRoaXMuZ2FtZUJvYXJkKSk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0aW5jcmVhc2VUdXJuQ291bnQgPSAoKTogbnVtYmVyID0+IHtcclxuXHRcdHJldHVybiArK3RoaXMudHVybkNvdW50O1xyXG5cdH07XHJcbn1cclxuLyogR2FtZSBjbGFzcyBlbmQgKi9cclxuXHJcbi8qIEdhbWVNZW51IGNsYXNzIHN0YXJ0ICovXHJcbmNsYXNzIEdhbWVNZW51IHtcclxuXHRwcml2YXRlIGdhbWVNZW51OiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIG1lbnVGb3JtOiBIVE1MRm9ybUVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBmb3JtT3B0aW9uczogTm9kZUxpc3RPZjxIVE1MSW5wdXRFbGVtZW50PjtcclxuXHRwcml2YXRlIGVycm9yTXNnOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIGZvcm1TdWJtaXRCdXR0b25zOiBOb2RlTGlzdE9mPEhUTUxCdXR0b25FbGVtZW50PjtcclxuXHJcblx0Y29uc3RydWN0b3IoZ2FtZU1lbnVJZDogc3RyaW5nLCBwcml2YXRlIGdhbWVJbml0OiAobW9kZTogc3RyaW5nLCBwMU1hcms6IHN0cmluZykgPT4gdm9pZCkge1xyXG5cdFx0dGhpcy5nYW1lTWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZ2FtZU1lbnVJZCk7XHJcblx0XHR0aGlzLm1lbnVGb3JtID0gdGhpcy5nYW1lTWVudS5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XHJcblx0XHR0aGlzLmZvcm1PcHRpb25zID0gdGhpcy5tZW51Rm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0nKTtcclxuXHRcdHRoaXMuZXJyb3JNc2cgPSB0aGlzLm1lbnVGb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tyb2xlPVwiYWxlcnRcIl0nKTtcclxuXHRcdHRoaXMuZm9ybVN1Ym1pdEJ1dHRvbnMgPSB0aGlzLm1lbnVGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdJyk7XHJcblx0fVxyXG5cclxuXHRpbml0ID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5mb3JtU3VibWl0QnV0dG9ucy5mb3JFYWNoKGJ0biA9PiBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZU1lbnVTdWJtaXRCdXR0b24pKTtcclxuXHR9O1xyXG5cclxuXHRoYW5kbGVNZW51U3VibWl0QnV0dG9uID0gKGV2OiBFdmVudCk6IHZvaWQgPT4ge1xyXG5cdFx0ZXYucHJldmVudERlZmF1bHQoKTtcclxuXHRcdC8qIHNob3dzIGVycm9yIGlmIGFueSBmaWVsZCB3YXNuJ3Qgc2VsZWN0ZWQgKi9cclxuXHRcdGlmICghdGhpcy5pc0FueU9wdGlvblNlbGVjdGVkKCkpIHtcclxuXHRcdFx0dGhpcy5lcnJvck1zZy5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XHJcblx0XHRcdHRoaXMuZXJyb3JNc2cuaW5uZXJUZXh0ID0gJ1BsZWFzZSBzZWxlY3QgbWFyayBmb3IgcGxheWVyIDEnO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmVycm9yTXNnLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcclxuXHRcdFx0dGhpcy5lcnJvck1zZy5pbm5lclRleHQgPSAnJztcclxuXHRcdH1cclxuXHJcblx0XHQvKiByZXRyaWV2ZSBnYW1lIG1vZGUgZnJvbSBzdWJtaXQgYnV0dG9uIGNsaWNrZWQgYW5kIHNlbGVjdGVkIG1hcmsgZnJvbSBvcHRpb25zICovXHJcblx0XHRjb25zdCBzdWJtaXRCdG46IEhUTUxCdXR0b25FbGVtZW50ID0gZXYudGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5cdFx0Y29uc3QgZ2FtZU1vZGU6IHN0cmluZyA9IHN1Ym1pdEJ0bi5kYXRhc2V0Lm1vZGU7XHJcblx0XHRjb25zdCBwMU1hcms6IHN0cmluZyA9IHRoaXMuZ2V0Q2hlY2tlZE9wdGlvbk1hcmsoKTtcclxuXHJcblx0XHQvKiBoaWRlcyBnYW1lIG1lbnUgKi9cclxuXHRcdHRoaXMuaGlkZSgpO1xyXG5cclxuXHRcdC8qIGFuZCBydW5zIGdhbWUgaW5pdGlhbGl6YXRpb24gKi9cclxuXHRcdHRoaXMuZ2FtZUluaXQoZ2FtZU1vZGUsIHAxTWFyayk7IC8vIG1ldGhvZCBmcm9tIHRoZSBwYXJlbnQgR2FtZSBjbGFzc1xyXG5cdH07XHJcblxyXG5cdHNob3cgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLmdhbWVNZW51LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG5cdH07XHJcblxyXG5cdGhpZGUgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLmdhbWVNZW51LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG5cdH07XHJcblxyXG5cdGlzQW55T3B0aW9uU2VsZWN0ZWQgPSAoKTogYm9vbGVhbiA9PiB7XHJcblx0XHRyZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmZvcm1PcHRpb25zKS5zb21lKG9wdGlvbiA9PiBvcHRpb24uY2hlY2tlZCk7XHJcblx0fTtcclxuXHJcblx0Z2V0Q2hlY2tlZE9wdGlvbk1hcmsgPSAoKTogc3RyaW5nID0+IHtcclxuXHRcdGZvciAoY29uc3Qgb3B0aW9uIG9mIHRoaXMuZm9ybU9wdGlvbnMpIHtcclxuXHRcdFx0aWYgKG9wdGlvbi5jaGVja2VkKSByZXR1cm4gb3B0aW9uLmRhdGFzZXQubWFyaztcclxuXHRcdH1cclxuXHRcdHJldHVybiAnJztcclxuXHR9O1xyXG59XHJcbi8qIEdhbWVNZW51IGNsYXNzIGVuZCAqL1xyXG5cclxuLyogVHVybkluZGljYXRvciBjbGFzcyBzdGFydCAqL1xyXG5jbGFzcyBUdXJuSW5kaWNhdG9yIHtcclxuXHRwcml2YXRlIGN1cnJlbnRQbGF5ZXJNYXJrRWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBjdXJyZW50UGxheWVyTWFya0ljb246IEhUTUxJbWFnZUVsZW1lbnQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0dGhpcy5jdXJyZW50UGxheWVyTWFya0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY3VycmVudC1wbGF5ZXItbWFyaycpO1xyXG5cdFx0dGhpcy5jdXJyZW50UGxheWVyTWFya0ljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY3VycmVudC1wbGF5ZXItbWFyay1pY29uJyk7XHJcblx0fVxyXG5cclxuXHR1cGRhdGUgPSAobWFyazogc3RyaW5nKSA9PiB7XHJcblx0XHR0aGlzLmN1cnJlbnRQbGF5ZXJNYXJrRWxlbWVudC5pbm5lclRleHQgPSBtYXJrO1xyXG5cdFx0dGhpcy5jdXJyZW50UGxheWVyTWFya0ljb24uc3JjID0gYC4vZGlzdC9hc3NldHMvaWNvbi0ke21hcmt9LnN2Z2A7XHJcblx0fTtcclxufVxyXG4vKiBUdXJuSW5kaWNhdG9yIGNsYXNzIGVuZCAqL1xyXG5cclxuLyogU2NvcmVCb2FyZCBjbGFzcyBzdGFydCAqL1xyXG5jbGFzcyBTY29yZUJvYXJkIHtcclxuXHRwcml2YXRlIHNjb3JlQm9hcmRDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgcDFMYWJlbDogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBwMVNjb3JlOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIHAyTGFiZWw6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgcDJTY29yZTogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSB0aWVzU2NvcmU6IEhUTUxFbGVtZW50O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihzY29yZUJvYXJkSWQ6IHN0cmluZykge1xyXG5cdFx0dGhpcy5zY29yZUJvYXJkQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzY29yZUJvYXJkSWQpO1xyXG5cdFx0dGhpcy5wMUxhYmVsID0gdGhpcy5zY29yZUJvYXJkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNwMS1nYW1lLW5hbWUnKTtcclxuXHRcdHRoaXMucDFTY29yZSA9IHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjcDEtZ2FtZS1zY29yZScpO1xyXG5cdFx0dGhpcy5wMkxhYmVsID0gdGhpcy5zY29yZUJvYXJkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNwMi1nYW1lLW5hbWUnKTtcclxuXHRcdHRoaXMucDJTY29yZSA9IHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjcDItZ2FtZS1zY29yZScpO1xyXG5cdFx0dGhpcy50aWVzU2NvcmUgPSB0aGlzLnNjb3JlQm9hcmRDb250YWluZXIucXVlcnlTZWxlY3RvcignI2dhbWUtdGllcycpO1xyXG5cdH1cclxuXHJcblx0aW5pdCA9IChwMTogUGxheWVyLCBwMjogUGxheWVyLCB0aWVzOiBudW1iZXIgPSAwKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnAxTGFiZWwuaW5uZXJUZXh0ID0gcDEudG9TdHJpbmcoKTtcclxuXHRcdHRoaXMucDJMYWJlbC5pbm5lclRleHQgPSBwMi50b1N0cmluZygpO1xyXG5cdFx0dGhpcy51cGRhdGVTY29yZShwMSwgcDIsIHRpZXMpO1xyXG5cdH07XHJcblxyXG5cdHVwZGF0ZVNjb3JlID0gKHAxOiBQbGF5ZXIsIHAyOiBQbGF5ZXIsIHRpZXM6IG51bWJlcik6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5wMVNjb3JlLmlubmVyVGV4dCA9IHAxLmdldFNjb3JlKCkudG9TdHJpbmcoKTtcclxuXHRcdHRoaXMucDJTY29yZS5pbm5lclRleHQgPSBwMi5nZXRTY29yZSgpLnRvU3RyaW5nKCk7XHJcblx0XHR0aGlzLnRpZXNTY29yZS5pbm5lclRleHQgPSB0aWVzLnRvU3RyaW5nKCk7XHJcblx0fTtcclxufVxyXG4vKiBTY29yZUJvYXJkIGNsYXNzIGVuZCAqL1xyXG5cclxuLyogUmVzdWx0TW9kYWwgY2xhc3Mgc3RhcnQgKi9cclxuY2xhc3MgUmVzdWx0TW9kYWwge1xyXG5cdHByaXZhdGUgbW9kYWw6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgbW9kYWxNZXNzYWdlOiBIVE1MUGFyYWdyYXBoRWxlbWVudDtcclxuXHRwcml2YXRlIG1vZGFsSGVhZGluZzogSFRNTEhlYWRpbmdFbGVtZW50O1xyXG5cdHByaXZhdGUgcXVpdEJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBjb250aW51ZUJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgZ2FtZVF1aXRIYW5kbGluZzogKCkgPT4gdm9pZCwgcHJpdmF0ZSBnYW1lQ29udGludWVIYW5kbGluZzogKCkgPT4gdm9pZCkge1xyXG5cdFx0dGhpcy5tb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNnYW1lLXJlc3VsdC1tb2RhbCcpO1xyXG5cdFx0dGhpcy5tb2RhbE1lc3NhZ2UgPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fbWVzc2FnZScpO1xyXG5cdFx0dGhpcy5tb2RhbEhlYWRpbmcgPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9faGVhZGluZycpO1xyXG5cclxuXHRcdC8qIHF1aXQgYnV0dG9uICovXHJcblx0XHR0aGlzLnF1aXRCdXR0b24gPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbltkYXRhLWFjdGlvbj1cInF1aXRcIl0nKTtcclxuXHRcdHRoaXMucXVpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlUXVpdCk7XHJcblxyXG5cdFx0LyogY29udGludWUgYnV0dG9uICovXHJcblx0XHR0aGlzLmNvbnRpbnVlQnV0dG9uID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCdidXR0b25bZGF0YS1hY3Rpb249XCJjb250aW51ZVwiXScpO1xyXG5cdFx0dGhpcy5jb250aW51ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlQ29udGludWUpO1xyXG5cdH1cclxuXHJcblx0aGFuZGxlQ29udGludWUgPSAoZXY6IEV2ZW50KTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLmdhbWVDb250aW51ZUhhbmRsaW5nKCk7XHJcblx0XHR0aGlzLmhpZGUoKTtcclxuXHR9O1xyXG5cclxuXHRoYW5kbGVRdWl0ID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5oaWRlKCk7XHJcblx0XHR0aGlzLmdhbWVRdWl0SGFuZGxpbmcoKTtcclxuXHR9O1xyXG5cclxuXHRzaG93ID0gKHdpbm5lcjogUGxheWVyIHwgbnVsbCA9IG51bGwpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMubW9kYWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblx0XHR0aGlzLnVwZGF0ZVJlc3VsdCh3aW5uZXIpO1xyXG5cdH07XHJcblxyXG5cdGhpZGUgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLm1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG5cdH07XHJcblxyXG5cdHVwZGF0ZVJlc3VsdCA9ICh3aW5uZXI6IFBsYXllciB8IG51bGwpOiB2b2lkID0+IHtcclxuXHRcdGlmICh3aW5uZXIgPT09IG51bGwpIHRoaXMuZGlzcGxheVRpZVJlc3VsdCgpO1xyXG5cdFx0ZWxzZSB0aGlzLmRpc3BsYXlXaW5uZXJSZXN1bHQod2lubmVyKTtcclxuXHJcblx0XHR0aGlzLnF1aXRCdXR0b24uZm9jdXMoKTtcclxuXHR9O1xyXG5cclxuXHRkaXNwbGF5VGllUmVzdWx0ID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5tb2RhbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtd2lubmVyJywgJ3RpZScpO1xyXG5cdFx0dGhpcy5tb2RhbEhlYWRpbmcuaW5uZXJIVE1MID0gJyc7XHJcblx0XHR0aGlzLm1vZGFsSGVhZGluZy5pbm5lclRleHQgPSAnUm91bmQgdGllZCc7XHJcblx0fTtcclxuXHJcblx0ZGlzcGxheVdpbm5lclJlc3VsdCA9ICh3aW5uZXI6IFBsYXllcik6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5tb2RhbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtd2lubmVyJywgd2lubmVyLmdldE1hcmsoKSk7XHJcblxyXG5cdFx0Y29uc3QgbWVzc2FnZSA9IHRoaXMuZ2V0Um91bmRNZXNzYWdlKHdpbm5lci5nZXROYW1lKCkpO1xyXG5cdFx0dGhpcy5tb2RhbE1lc3NhZ2UuaW5uZXJUZXh0ID0gbWVzc2FnZTtcclxuXHRcdHRoaXMuc2V0UmVzdWx0SGVhZGluZyh3aW5uZXIpO1xyXG5cdH07XHJcblxyXG5cdHNldFJlc3VsdEhlYWRpbmcgPSAod2lubmVyOiBQbGF5ZXIpOiB2b2lkID0+IHtcclxuXHRcdC8qIGNsZWFyIGhlYWRpbmcgYmVmb3JlIHNldHRpbmcgbWVzc2FnZSAqL1xyXG5cdFx0dGhpcy5tb2RhbEhlYWRpbmcuaW5uZXJIVE1MID0gJyc7XHJcblx0XHRjb25zdCBtYXJrID0gd2lubmVyLmdldE1hcmsoKTtcclxuXHJcblx0XHQvKiB3aW5uaW5nIG1hcmsgaWNvbiAqL1xyXG5cdFx0Y29uc3QgaW1nRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG5cdFx0aW1nRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3NyYycsIGAuL2Rpc3QvYXNzZXRzL2ljb24tJHttYXJrfS5zdmdgKTtcclxuXHRcdGltZ0VsZW1lbnQuc2V0QXR0cmlidXRlKCdhbHQnLCAnJyk7XHJcblxyXG5cdFx0LyogaGlkZGVuIG1hcmsgZm9yIHNjcmVlbiByZWFkZXJzICovXHJcblx0XHRjb25zdCBoaWRkZW5NYXJrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG5cdFx0aGlkZGVuTWFyay5jbGFzc0xpc3QuYWRkKCd2aXN1YWxseS1oaWRkZW4nKTtcclxuXHRcdGhpZGRlbk1hcmsuaW5uZXJUZXh0ID0gbWFyaztcclxuXHJcblx0XHQvKiBtZXNzYWdlIGFmdGVyIGltYWdlICovXHJcblx0XHRjb25zdCBtZXNzYWdlVGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCd0YWtlcyB0aGUgcm91bmQnKTtcclxuXHJcblx0XHQvKiBzcGFuIGNvbnRhaW5lciBmb3IgaGlkZGVuIG1hcmsgYW5kIG1lc3NhZ2UgdGV4dCAqL1xyXG5cdFx0Y29uc3QgaGVhZGluZ1NwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcblx0XHRoZWFkaW5nU3Bhbi5hcHBlbmRDaGlsZChoaWRkZW5NYXJrKTtcclxuXHRcdGhlYWRpbmdTcGFuLmFwcGVuZENoaWxkKG1lc3NhZ2VUZXh0KTtcclxuXHJcblx0XHR0aGlzLm1vZGFsSGVhZGluZy5hcHBlbmRDaGlsZChpbWdFbGVtZW50KTtcclxuXHRcdHRoaXMubW9kYWxIZWFkaW5nLmFwcGVuZENoaWxkKGhlYWRpbmdTcGFuKTtcclxuXHR9O1xyXG5cclxuXHRnZXRSb3VuZE1lc3NhZ2UgPSAocGxheWVyTmFtZTogc3RyaW5nKTogc3RyaW5nID0+IHtcclxuXHRcdGxldCBtZXNzYWdlO1xyXG5cdFx0c3dpdGNoIChwbGF5ZXJOYW1lKSB7XHJcblx0XHRcdGNhc2UgJ3AxJzpcclxuXHRcdFx0XHRtZXNzYWdlID0gJ1BsYXllciAxIHdpbnMhJztcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAncDInOlxyXG5cdFx0XHRcdG1lc3NhZ2UgPSAnUGxheWVyIDIgd2lucyEnO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICd5b3UnOlxyXG5cdFx0XHRcdG1lc3NhZ2UgPSAnWW91IHdvbiEnO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdjcHUnOlxyXG5cdFx0XHRcdG1lc3NhZ2UgPSAnT2ggbm8sIHlvdSBsb3N0Li4uJztcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRtZXNzYWdlID0gJyc7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gbWVzc2FnZTtcclxuXHR9O1xyXG59XHJcbi8qIFJlc3VsdE1vZGFsIGNsYXNzIGVuZCAqL1xyXG5cclxuLyogR2FtZUJvYXJkIGNsYXNzIHN0YXJ0ICovXHJcbmNsYXNzIEdhbWVCb2FyZCB7XHJcblx0Qk9BUkRfU0laRTogbnVtYmVyID0gMztcclxuXHRwcml2YXRlIGJvYXJkRWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBib2FyZDogRmllbGRbXVtdO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihnYW1lQm9hcmRJZDogc3RyaW5nLCBwcml2YXRlIG9uRmllbGRDbGljazogKGV2OiBFdmVudCkgPT4gdm9pZCwgcHJpdmF0ZSBnZXRDdXJyZW50TWFyazogKCkgPT4gc3RyaW5nKSB7XHJcblx0XHR0aGlzLmJvYXJkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZ2FtZUJvYXJkSWQpO1xyXG5cdH1cclxuXHJcblx0aW5pdCA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuYm9hcmQgPSBbW10sIFtdLCBbXV07XHJcblx0XHQvKiBnZXRzIGFsbCBib2FyZCBmaWVsZHMgKi9cclxuXHRcdGNvbnN0IGJvYXJkRmllbGRFbGVtZW50czogTm9kZUxpc3RPZjxIVE1MQnV0dG9uRWxlbWVudD4gPSB0aGlzLmJvYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ2FtZS1ib2FyZF9fZmllbGQnKTtcclxuXHJcblx0XHQvKiBjcmVhdGluZyBmaWVsZHMgKi9cclxuXHRcdGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IHRoaXMuYm9hcmQubGVuZ3RoOyByb3crKykge1xyXG5cdFx0XHRmb3IgKGxldCBjb2x1bW4gPSAwOyBjb2x1bW4gPCB0aGlzLkJPQVJEX1NJWkU7IGNvbHVtbisrKSB7XHJcblx0XHRcdFx0dGhpcy5ib2FyZFtyb3ddLnB1c2goXHJcblx0XHRcdFx0XHRuZXcgRmllbGQoXHJcblx0XHRcdFx0XHRcdHJvdyxcclxuXHRcdFx0XHRcdFx0Y29sdW1uLFxyXG5cdFx0XHRcdFx0XHRib2FyZEZpZWxkRWxlbWVudHNbY29sdW1uICsgcm93ICogdGhpcy5CT0FSRF9TSVpFXSxcclxuXHRcdFx0XHRcdFx0Ly8gaGFuZGxlcyBmb3IgZmllbGQoYnV0dG9ucykgZXZlbnRzXHJcblx0XHRcdFx0XHRcdHRoaXMub25GaWVsZENsaWNrLFxyXG5cdFx0XHRcdFx0XHR0aGlzLmdldEN1cnJlbnRNYXJrXHJcblx0XHRcdFx0XHQpXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8qIGNoZWNrcy9tYXJrcyBmaWVsZCBvbiBwYXNzZWQgcG9zaXRpb24gKi9cclxuXHRjaGVja0ZpZWxkID0gKG1hcms6IHN0cmluZywgcm93OiBudW1iZXIsIGNvbHVtbjogbnVtYmVyKSA9PiB7XHJcblx0XHRpZiAocm93IDwgdGhpcy5ib2FyZC5sZW5ndGggJiYgY29sdW1uIDwgdGhpcy5ib2FyZFswXS5sZW5ndGgpIHtcclxuXHRcdFx0dGhpcy5ib2FyZFtyb3ddW2NvbHVtbl0uY2hlY2sobWFyayk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0aXNGaWVsZENoZWNrZWQgPSAocm93OiBudW1iZXIsIGNvbHVtbjogbnVtYmVyKTogYm9vbGVhbiA9PiB7XHJcblx0XHRyZXR1cm4gdGhpcy5ib2FyZFtyb3ddW2NvbHVtbl0uaXNDaGVja2VkKCk7XHJcblx0fTtcclxuXHJcblx0aXNGdWxsID0gKCk6IGJvb2xlYW4gPT4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuYm9hcmQuZmxhdCgpLmV2ZXJ5KGZpZWxkID0+IGZpZWxkLmlzQ2hlY2tlZCgpKTtcclxuXHR9O1xyXG5cclxuXHRnZXRXaW5uaW5nRmllbGRzID0gKCk6IFRyaXBsZUZpZWxkIHwgbnVsbCA9PiB7XHJcblx0XHRyZXR1cm4gdGhpcy5jaGVja1Jvd3MoKSB8fCB0aGlzLmNoZWNrQ29sdW1ucygpIHx8IHRoaXMuY2hlY2tEaWFnb25hbCgpO1xyXG5cdH07XHJcblxyXG5cdGNoZWNrUm93cyA9ICgpOiBUcmlwbGVGaWVsZCB8IG51bGwgPT4ge1xyXG5cdFx0Zm9yIChsZXQgcm93ID0gMDsgcm93IDwgdGhpcy5CT0FSRF9TSVpFOyByb3crKykge1xyXG5cdFx0XHRpZiAoXHJcblx0XHRcdFx0dGhpcy5ib2FyZFtyb3ddWzBdLmdldE1hcmsoKSAhPT0gbnVsbCAmJlxyXG5cdFx0XHRcdHRoaXMuYm9hcmRbcm93XVswXS5nZXRNYXJrKCkgPT09IHRoaXMuYm9hcmRbcm93XVsxXS5nZXRNYXJrKCkgJiZcclxuXHRcdFx0XHR0aGlzLmJvYXJkW3Jvd11bMV0uZ2V0TWFyaygpID09PSB0aGlzLmJvYXJkW3Jvd11bMl0uZ2V0TWFyaygpXHJcblx0XHRcdClcclxuXHRcdFx0XHRyZXR1cm4gW3RoaXMuYm9hcmRbcm93XVswXSwgdGhpcy5ib2FyZFtyb3ddWzFdLCB0aGlzLmJvYXJkW3Jvd11bMl1dO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fTtcclxuXHJcblx0Y2hlY2tDb2x1bW5zID0gKCk6IFRyaXBsZUZpZWxkIHwgbnVsbCA9PiB7XHJcblx0XHRmb3IgKGxldCBjb2x1bW4gPSAwOyBjb2x1bW4gPCB0aGlzLkJPQVJEX1NJWkU7IGNvbHVtbisrKSB7XHJcblx0XHRcdGlmIChcclxuXHRcdFx0XHR0aGlzLmJvYXJkWzBdW2NvbHVtbl0uZ2V0TWFyaygpICE9PSBudWxsICYmXHJcblx0XHRcdFx0dGhpcy5ib2FyZFswXVtjb2x1bW5dLmdldE1hcmsoKSA9PT0gdGhpcy5ib2FyZFsxXVtjb2x1bW5dLmdldE1hcmsoKSAmJlxyXG5cdFx0XHRcdHRoaXMuYm9hcmRbMV1bY29sdW1uXS5nZXRNYXJrKCkgPT09IHRoaXMuYm9hcmRbMl1bY29sdW1uXS5nZXRNYXJrKClcclxuXHRcdFx0KVxyXG5cdFx0XHRcdHJldHVybiBbdGhpcy5ib2FyZFswXVtjb2x1bW5dLCB0aGlzLmJvYXJkWzFdW2NvbHVtbl0sIHRoaXMuYm9hcmRbMl1bY29sdW1uXV07XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9O1xyXG5cclxuXHRjaGVja0RpYWdvbmFsID0gKCk6IFRyaXBsZUZpZWxkIHwgbnVsbCA9PiB7XHJcblx0XHQvKiB0b3AgbGVmdCwgbWlkZGxlLCBhbmQgYm90dG9tIHJpZ2h0ICovXHJcblx0XHRpZiAoXHJcblx0XHRcdHRoaXMuYm9hcmRbMV1bMV0uZ2V0TWFyaygpICE9PSBudWxsICYmXHJcblx0XHRcdHRoaXMuYm9hcmRbMF1bMF0uZ2V0TWFyaygpID09PSB0aGlzLmJvYXJkWzFdWzFdLmdldE1hcmsoKSAmJlxyXG5cdFx0XHR0aGlzLmJvYXJkWzFdWzFdLmdldE1hcmsoKSA9PT0gdGhpcy5ib2FyZFsyXVsyXS5nZXRNYXJrKClcclxuXHRcdClcclxuXHRcdFx0cmV0dXJuIFt0aGlzLmJvYXJkWzBdWzBdLCB0aGlzLmJvYXJkWzFdWzFdLCB0aGlzLmJvYXJkWzJdWzJdXTtcclxuXHJcblx0XHQvKiB0b3AgcmlnaHQsIG1pZGRsZSwgYW5kIGJvdHRvbSBsZWZ0ICovXHJcblx0XHRpZiAoXHJcblx0XHRcdHRoaXMuYm9hcmRbMV1bMV0uZ2V0TWFyaygpICE9PSBudWxsICYmXHJcblx0XHRcdHRoaXMuYm9hcmRbMF1bMl0uZ2V0TWFyaygpID09PSB0aGlzLmJvYXJkWzFdWzFdLmdldE1hcmsoKSAmJlxyXG5cdFx0XHR0aGlzLmJvYXJkWzFdWzFdLmdldE1hcmsoKSA9PT0gdGhpcy5ib2FyZFsyXVswXS5nZXRNYXJrKClcclxuXHRcdClcclxuXHRcdFx0cmV0dXJuIFt0aGlzLmJvYXJkWzBdWzBdLCB0aGlzLmJvYXJkWzFdWzFdLCB0aGlzLmJvYXJkWzJdWzJdXTtcclxuXHJcblx0XHQvKiBubyBmaWVsZHMgbWF0Y2hlZCAqL1xyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fTtcclxuXHJcblx0Y2xlYXIgPSAoKTogdm9pZCA9PiB7XHJcblx0XHRmb3IgKGxldCByb3cgPSAwOyByb3cgPCB0aGlzLmJvYXJkLmxlbmd0aDsgcm93KyspIHtcclxuXHRcdFx0Zm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgdGhpcy5CT0FSRF9TSVpFOyBjb2x1bW4rKykge1xyXG5cdFx0XHRcdHRoaXMuYm9hcmRbcm93XVtjb2x1bW5dLmNsZWFyKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9O1xyXG59XHJcbi8qIEdhbWVCb2FyZCBjbGFzcyBlbmQgKi9cclxuXHJcbi8qIEZpZWxkIGNsYXNzIHN0YXJ0ICovXHJcbmNsYXNzIEZpZWxkIHtcclxuXHRwcml2YXRlIG1hcms6IHN0cmluZyA9IG51bGw7XHJcblxyXG5cdGNvbnN0cnVjdG9yKFxyXG5cdFx0cHJpdmF0ZSByb3c6IG51bWJlcixcclxuXHRcdHByaXZhdGUgY29sdW1uOiBudW1iZXIsXHJcblx0XHRwcml2YXRlIGZpZWxkRWxlbWVudDogSFRNTEJ1dHRvbkVsZW1lbnQsXHJcblx0XHRwcml2YXRlIGdhbWVPbkNsaWNrSGFuZGxlcjogKGV2OiBFdmVudCkgPT4gdm9pZCxcclxuXHRcdHByaXZhdGUgZ2V0Q3VycmVudE1hcms6ICgpID0+IHN0cmluZ1xyXG5cdCkge1xyXG5cdFx0aWYgKHRoaXMuZmllbGRFbGVtZW50KSB7XHJcblx0XHRcdC8qIGNsaWNrIGhhbmRsaW5nICovXHJcblx0XHRcdHRoaXMuZmllbGRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5nYW1lT25DbGlja0hhbmRsZXIpO1xyXG5cclxuXHRcdFx0LyogaG92ZXIvZm9jdXMgaW4gaGFuZGxpbmcgKi9cclxuXHRcdFx0dGhpcy5maWVsZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgdGhpcy5oYW5kbGVIb3Zlcik7XHJcblx0XHRcdHRoaXMuZmllbGRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCB0aGlzLmhhbmRsZUhvdmVyKTtcclxuXHJcblx0XHRcdC8qIGhvdmVyL2ZvY3VzIG91dCBoYW5kbGluZyAqL1xyXG5cdFx0XHR0aGlzLmZpZWxkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIHRoaXMuaGFuZGxlQmx1cik7XHJcblx0XHRcdHRoaXMuZmllbGRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgdGhpcy5oYW5kbGVCbHVyKTtcclxuXHJcblx0XHRcdC8qIHNldHRpbmcgYXR0cmlidXRzICovXHJcblx0XHRcdHRoaXMuZmllbGRFbGVtZW50LmRhdGFzZXQucm93ID0gdGhpcy5yb3cudG9TdHJpbmcoKTtcclxuXHRcdFx0dGhpcy5maWVsZEVsZW1lbnQuZGF0YXNldC5jb2x1bW4gPSB0aGlzLmNvbHVtbi50b1N0cmluZygpO1xyXG5cdFx0XHR0aGlzLmNsZWFyKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKiBob3Zlci9mb2N1cyBpbiBmaWVsZCBoYW5kbGUgKi9cclxuXHRoYW5kbGVIb3ZlciA9ICgpOiB2b2lkID0+IHtcclxuXHRcdGNvbnN0IGN1cnJlbnRQbGF5ZXJNYXJrID0gdGhpcy5nZXRDdXJyZW50TWFyaygpO1xyXG5cdFx0dGhpcy5maWVsZEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWN1cnJlbnQtcGxheWVyJywgY3VycmVudFBsYXllck1hcmspO1xyXG5cdH07XHJcblxyXG5cdC8qIGhvdmVyL2ZvY3VzIG91dCBmaWVsZCBoYW5kbGUgKi9cclxuXHRoYW5kbGVCbHVyID0gKCkgPT4ge1xyXG5cdFx0dGhpcy5maWVsZEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWN1cnJlbnQtcGxheWVyJyk7XHJcblx0fTtcclxuXHJcblx0Y2xlYXIgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLm1hcmsgPSBudWxsO1xyXG5cdFx0dGhpcy5maWVsZEVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgYFJvdyAke3RoaXMucm93ICsgMX0sIGNvbHVtbiAke3RoaXMuY29sdW1uICsgMX0sIGVtcHR5IGZpZWxkYCk7XHJcblx0XHR0aGlzLmZpZWxkRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtY3VycmVudC1wbGF5ZXInKTtcclxuXHRcdHRoaXMuZmllbGRFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1tYXJrJyk7XHJcblx0fTtcclxuXHJcblx0Y2hlY2sgPSAobWFyazogc3RyaW5nKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLm1hcmsgPSBtYXJrO1xyXG5cdFx0dGhpcy5maWVsZEVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgYFJvdyAke3RoaXMucm93ICsgMX0sIGNvbHVtbiAke3RoaXMuY29sdW1uICsgMX0sICR7dGhpcy5tYXJrfSBtYXJrYCk7XHJcblx0XHR0aGlzLmZpZWxkRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWFyaycsIG1hcmspO1xyXG5cdH07XHJcblxyXG5cdGlzQ2hlY2tlZCA9ICgpOiBib29sZWFuID0+IHtcclxuXHRcdHJldHVybiB0aGlzLm1hcmsgIT09IG51bGw7XHJcblx0fTtcclxuXHJcblx0Z2V0TWFyayA9ICgpOiBzdHJpbmcgPT4ge1xyXG5cdFx0cmV0dXJuIHRoaXMubWFyaztcclxuXHR9O1xyXG59XHJcbi8qIEZpZWxkIGNsYXNzIGVuZCAqL1xyXG5cclxuLyogUGxheWVyIGNsYXNzIHN0YXJ0ICovXHJcbmNsYXNzIFBsYXllciB7XHJcblx0Y29uc3RydWN0b3IocHJpdmF0ZSBuYW1lOiBzdHJpbmcsIHByaXZhdGUgbWFyazogc3RyaW5nLCBwcml2YXRlIHNjb3JlOiBudW1iZXIgPSAwKSB7fVxyXG5cclxuXHR0b1N0cmluZyA9ICgpOiBzdHJpbmcgPT4gYCR7dGhpcy5tYXJrfSAoJHt0aGlzLm5hbWV9KWA7XHJcblxyXG5cdGdldE5hbWUgPSAoKTogc3RyaW5nID0+IHRoaXMubmFtZTtcclxuXHJcblx0Z2V0TWFyayA9ICgpOiBzdHJpbmcgPT4gdGhpcy5tYXJrO1xyXG5cclxuXHRnZXRTY29yZSA9ICgpOiBudW1iZXIgPT4gdGhpcy5zY29yZTtcclxuXHJcblx0dXBkYXRlU2NvcmUgPSAoKTogbnVtYmVyID0+ICsrdGhpcy5zY29yZTtcclxufVxyXG5cclxuY2xhc3MgQ1BVUGxheWVyIGV4dGVuZHMgUGxheWVyIHtcclxuXHRtYWtlTW92ZSA9IChib2FyZDogR2FtZUJvYXJkKTogW251bWJlciwgbnVtYmVyXSA9PiB7XHJcblx0XHRjb25zdCBib2FyZFNpemUgPSBib2FyZC5CT0FSRF9TSVpFO1xyXG5cdFx0bGV0IHJvdywgY29sdW1uO1xyXG5cdFx0ZG8ge1xyXG5cdFx0XHRyb3cgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBib2FyZFNpemUpO1xyXG5cdFx0XHRjb2x1bW4gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBib2FyZFNpemUpO1xyXG5cdFx0fSB3aGlsZSAoYm9hcmQuaXNGaWVsZENoZWNrZWQocm93LCBjb2x1bW4pKTtcclxuXHRcdHJldHVybiBbcm93LCBjb2x1bW5dO1xyXG5cdH07XHJcbn1cclxuLyogUGxheWVyIGNsYXNzIGVuZCAqL1xyXG4vKiBjbGFzc2VzIGVuZCAqL1xyXG5cclxuLyogZ2FtZSBvYmplY3RzICovXHJcbmNvbnN0IHRpY1RhY1RvZUdhbWU6IEdhbWUgPSBuZXcgR2FtZSgnI2dhbWUtbWVudScsICcjdGljLXRhYy10b2UtZ2FtZScpO1xyXG4vKiBnYW1lIG9iamVjdHMgZW5kICovXHJcbiIsIi8qIHR5cGVzIGVuZCAqL1xuLyogY2xhc3NlcyAqL1xuLyogR2FtZSBjbGFzcyBzdGFydCAqL1xuY2xhc3MgR2FtZSB7XG4gICAgY29uc3RydWN0b3IoZ2FtZU1lbnVJZCwgZ2FtZUNvbnRhaW5lcklkKSB7XG4gICAgICAgIC8qIGdhbWUgc3RhdGVzICovXG4gICAgICAgIHRoaXMudGllcyA9IDA7XG4gICAgICAgIHRoaXMuZ2FtZUNvdW50ID0gMDtcbiAgICAgICAgdGhpcy50dXJuQ291bnQgPSAwO1xuICAgICAgICB0aGlzLm9uRmllbGRDbGljayA9IChldikgPT4ge1xuICAgICAgICAgICAgLyogcmV0cmlldmUgcm93IGFuZCBjb2x1bW4gZnJvbSBjbGlja2VkIGJ1dHRvbiBhbmQgbWFrZSBtb3ZlICovXG4gICAgICAgICAgICBjb25zdCBmaWVsZEJ1dHRvbiA9IGV2LnRhcmdldDtcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IHBhcnNlSW50KGZpZWxkQnV0dG9uLmRhdGFzZXQucm93KTtcbiAgICAgICAgICAgIGNvbnN0IGNvbHVtbiA9IHBhcnNlSW50KGZpZWxkQnV0dG9uLmRhdGFzZXQuY29sdW1uKTtcbiAgICAgICAgICAgIHRoaXMubWFrZU1vdmUocm93LCBjb2x1bW4pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uR2FtZUNvbnRpbnVlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5nYW1lQ291bnQrKztcbiAgICAgICAgICAgIHRoaXMudHVybkNvdW50ID0gMDtcbiAgICAgICAgICAgIHRoaXMuZ2FtZUJvYXJkLmNsZWFyKCk7XG4gICAgICAgICAgICB0aGlzLnNjb3JlQm9hcmQudXBkYXRlU2NvcmUodGhpcy54UGxheWVyLCB0aGlzLm9QbGF5ZXIsIHRoaXMudGllcyk7XG4gICAgICAgICAgICB0aGlzLm1ha2VNb3ZlQ1BVKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25HYW1lUXVpdCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIHRoaXMuZ2FtZUJvYXJkLmNsZWFyKCk7XG4gICAgICAgICAgICB0aGlzLmdhbWVNZW51LnNob3coKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbml0ID0gKG1vZGUsIHAxTWFyaykgPT4ge1xuICAgICAgICAgICAgY29uc3QgcDJNYXJrID0gcDFNYXJrID09PSAneCcgPyAnbycgOiAneCc7XG4gICAgICAgICAgICBsZXQgcDFMYWJlbCwgcGxheWVyMTtcbiAgICAgICAgICAgIGxldCBwMkxhYmVsLCBwbGF5ZXIyO1xuICAgICAgICAgICAgLyogY3JlYXRlcyBsYWJlbHMgYW5kIHBsYXllcnMgZGVwZW5kaW5nIG9uIGdhbWUgbW9kZSAqL1xuICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdzaW5nbGVwbGF5ZXInKSB7XG4gICAgICAgICAgICAgICAgcDFMYWJlbCA9ICd5b3UnO1xuICAgICAgICAgICAgICAgIHAyTGFiZWwgPSAnY3B1JztcbiAgICAgICAgICAgICAgICBwbGF5ZXIyID0gbmV3IENQVVBsYXllcihwMkxhYmVsLCBwMk1hcmspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcDFMYWJlbCA9ICdwMSc7XG4gICAgICAgICAgICAgICAgcDJMYWJlbCA9ICdwMic7XG4gICAgICAgICAgICAgICAgcGxheWVyMiA9IG5ldyBQbGF5ZXIocDJMYWJlbCwgcDJNYXJrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBsYXllcjEgPSBuZXcgUGxheWVyKHAxTGFiZWwsIHAxTWFyayk7XG4gICAgICAgICAgICAvKiBhc3NpZ25zIGNyZWF0ZWQgcGxheWVycyB0byByaWdodCBzcG90cyAqL1xuICAgICAgICAgICAgaWYgKHAxTWFyayA9PT0gJ3gnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy54UGxheWVyID0gcGxheWVyMTtcbiAgICAgICAgICAgICAgICB0aGlzLm9QbGF5ZXIgPSBwbGF5ZXIyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy54UGxheWVyID0gcGxheWVyMjtcbiAgICAgICAgICAgICAgICB0aGlzLm9QbGF5ZXIgPSBwbGF5ZXIxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyogY3JlYXRlcyB0dXBsZSBvZiBwbGF5ZXJzLCB0byBjaG9vc2UgY3VycmVudCBwbGF5ZXIgZGVwZW5kaW5nIG9uIHR1cm4gY291bnRlciAqL1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXJRdWV1ZSA9IFt0aGlzLnhQbGF5ZXIsIHRoaXMub1BsYXllcl07XG4gICAgICAgICAgICAvKiBzaG93cyBnYW1lIGNvbnRhaW5lciAqL1xuICAgICAgICAgICAgdGhpcy5nYW1lQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICAgICAgdGhpcy5zdGFydEdhbWUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdGFydEdhbWUgPSAoKSA9PiB7XG4gICAgICAgICAgICAvKiBpbml0aWFsaXplIHNjb3JlIGJvYXJkIHdpdGggY3JlYXRlZCBwbGF5ZXJzICovXG4gICAgICAgICAgICB0aGlzLnNjb3JlQm9hcmQuaW5pdCh0aGlzLnhQbGF5ZXIsIHRoaXMub1BsYXllciwgdGhpcy50aWVzKTtcbiAgICAgICAgICAgIC8qIGluaXRpYWxpemUgZ2FtZSBib2FyZCAqL1xuICAgICAgICAgICAgdGhpcy5nYW1lQm9hcmQuaW5pdCgpO1xuICAgICAgICAgICAgdGhpcy50dXJuSW5kaWNhdG9yLnVwZGF0ZSh0aGlzLmdldEN1cnJlbnRQbGF5ZXJNYXJrKCkpO1xuICAgICAgICAgICAgLyogaWYgc3RhcnRpbmcgcGxheWVyIGlzIENQVSB0aGVuIG1ha2UgYXV0byBtb3ZlICovXG4gICAgICAgICAgICB0aGlzLm1ha2VNb3ZlQ1BVKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0Q3VycmVudFBsYXllck1hcmsgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50UGxheWVyKCkuZ2V0TWFyaygpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldEN1cnJlbnRQbGF5ZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wbGF5ZXJRdWV1ZVsodGhpcy5nYW1lQ291bnQgKyB0aGlzLnR1cm5Db3VudCkgJSAyXTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5tYWtlTW92ZSA9IChyb3csIGNvbHVtbikgPT4ge1xuICAgICAgICAgICAgLyogb24gZmllbGQgY2xpY2ssIGlmIGZpZWxkIGlzIGNoZWNrZWQgdGhlbiByZXR1cm4gZG9pbmcgbm90aGluZyAqL1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2FtZUJvYXJkLmlzRmllbGRDaGVja2VkKHJvdywgY29sdW1uKSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAvKiBjaGVja3Mgc2VsZWN0ZWQgZmllbGQgKi9cbiAgICAgICAgICAgIHRoaXMuZ2FtZUJvYXJkLmNoZWNrRmllbGQodGhpcy5nZXRDdXJyZW50UGxheWVyKCkuZ2V0TWFyaygpLCByb3csIGNvbHVtbik7XG4gICAgICAgICAgICB0aGlzLmFmdGVyTW92ZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFmdGVyTW92ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHdpbm5pbmdGaWVsZHMgPSB0aGlzLmdhbWVCb2FyZC5nZXRXaW5uaW5nRmllbGRzKCk7XG4gICAgICAgICAgICBpZiAod2lubmluZ0ZpZWxkcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZVJlc3VsdE1vZGFsLnNob3codGhpcy5nZXRDdXJyZW50UGxheWVyKCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q3VycmVudFBsYXllcigpLnVwZGF0ZVNjb3JlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZ2FtZUJvYXJkLmlzRnVsbCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lUmVzdWx0TW9kYWwuc2hvdygpO1xuICAgICAgICAgICAgICAgIHRoaXMudGllcysrO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaW5jcmVhc2VUdXJuQ291bnQoKTtcbiAgICAgICAgICAgIHRoaXMudHVybkluZGljYXRvci51cGRhdGUodGhpcy5nZXRDdXJyZW50UGxheWVyTWFyaygpKTtcbiAgICAgICAgICAgIHRoaXMubWFrZU1vdmVDUFUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5tYWtlTW92ZUNQVSA9ICgpID0+IHtcbiAgICAgICAgICAgIC8qIGFmdGVyIGZpZWxkIGlzIGNoZWNrZWQsIGNoZWNrcyBpZiBjdXJyZW50IHBsYXllciBpcyBDUFUgYW5kIGlmIGlzLCB0aGVuIG1ha2VzIGEgbW92ZSAqL1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0Q3VycmVudFBsYXllcigpIGluc3RhbmNlb2YgQ1BVUGxheWVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYWtlTW92ZSguLi50aGlzLmdldEN1cnJlbnRQbGF5ZXIoKS5tYWtlTW92ZSh0aGlzLmdhbWVCb2FyZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmluY3JlYXNlVHVybkNvdW50ID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuICsrdGhpcy50dXJuQ291bnQ7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2FtZU1lbnUgPSBuZXcgR2FtZU1lbnUoZ2FtZU1lbnVJZCwgdGhpcy5pbml0KTtcbiAgICAgICAgdGhpcy5nYW1lTWVudS5pbml0KCk7XG4gICAgICAgIHRoaXMuZ2FtZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZ2FtZUNvbnRhaW5lcklkKTtcbiAgICAgICAgdGhpcy5zY29yZUJvYXJkID0gbmV3IFNjb3JlQm9hcmQoJyNzY29yZS1ib2FyZCcpO1xuICAgICAgICB0aGlzLmdhbWVCb2FyZCA9IG5ldyBHYW1lQm9hcmQoJyNnYW1lLWJvYXJkJywgdGhpcy5vbkZpZWxkQ2xpY2ssIHRoaXMuZ2V0Q3VycmVudFBsYXllck1hcmspO1xuICAgICAgICB0aGlzLnR1cm5JbmRpY2F0b3IgPSBuZXcgVHVybkluZGljYXRvcigpO1xuICAgICAgICB0aGlzLmdhbWVSZXN1bHRNb2RhbCA9IG5ldyBSZXN1bHRNb2RhbCh0aGlzLm9uR2FtZVF1aXQsIHRoaXMub25HYW1lQ29udGludWUpO1xuICAgIH1cbn1cbi8qIEdhbWUgY2xhc3MgZW5kICovXG4vKiBHYW1lTWVudSBjbGFzcyBzdGFydCAqL1xuY2xhc3MgR2FtZU1lbnUge1xuICAgIGNvbnN0cnVjdG9yKGdhbWVNZW51SWQsIGdhbWVJbml0KSB7XG4gICAgICAgIHRoaXMuZ2FtZUluaXQgPSBnYW1lSW5pdDtcbiAgICAgICAgdGhpcy5pbml0ID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5mb3JtU3VibWl0QnV0dG9ucy5mb3JFYWNoKGJ0biA9PiBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZU1lbnVTdWJtaXRCdXR0b24pKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVNZW51U3VibWl0QnV0dG9uID0gKGV2KSA9PiB7XG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgLyogc2hvd3MgZXJyb3IgaWYgYW55IGZpZWxkIHdhc24ndCBzZWxlY3RlZCAqL1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQW55T3B0aW9uU2VsZWN0ZWQoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JNc2cuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JNc2cuaW5uZXJUZXh0ID0gJ1BsZWFzZSBzZWxlY3QgbWFyayBmb3IgcGxheWVyIDEnO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JNc2cuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JNc2cuaW5uZXJUZXh0ID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKiByZXRyaWV2ZSBnYW1lIG1vZGUgZnJvbSBzdWJtaXQgYnV0dG9uIGNsaWNrZWQgYW5kIHNlbGVjdGVkIG1hcmsgZnJvbSBvcHRpb25zICovXG4gICAgICAgICAgICBjb25zdCBzdWJtaXRCdG4gPSBldi50YXJnZXQ7XG4gICAgICAgICAgICBjb25zdCBnYW1lTW9kZSA9IHN1Ym1pdEJ0bi5kYXRhc2V0Lm1vZGU7XG4gICAgICAgICAgICBjb25zdCBwMU1hcmsgPSB0aGlzLmdldENoZWNrZWRPcHRpb25NYXJrKCk7XG4gICAgICAgICAgICAvKiBoaWRlcyBnYW1lIG1lbnUgKi9cbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgLyogYW5kIHJ1bnMgZ2FtZSBpbml0aWFsaXphdGlvbiAqL1xuICAgICAgICAgICAgdGhpcy5nYW1lSW5pdChnYW1lTW9kZSwgcDFNYXJrKTsgLy8gbWV0aG9kIGZyb20gdGhlIHBhcmVudCBHYW1lIGNsYXNzXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2hvdyA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZU1lbnUuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGlkZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZU1lbnUuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaXNBbnlPcHRpb25TZWxlY3RlZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZm9ybU9wdGlvbnMpLnNvbWUob3B0aW9uID0+IG9wdGlvbi5jaGVja2VkKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRDaGVja2VkT3B0aW9uTWFyayA9ICgpID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIHRoaXMuZm9ybU9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uLmNoZWNrZWQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb24uZGF0YXNldC5tYXJrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdhbWVNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihnYW1lTWVudUlkKTtcbiAgICAgICAgdGhpcy5tZW51Rm9ybSA9IHRoaXMuZ2FtZU1lbnUucXVlcnlTZWxlY3RvcignZm9ybScpO1xuICAgICAgICB0aGlzLmZvcm1PcHRpb25zID0gdGhpcy5tZW51Rm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0nKTtcbiAgICAgICAgdGhpcy5lcnJvck1zZyA9IHRoaXMubWVudUZvcm0ucXVlcnlTZWxlY3RvcignW3JvbGU9XCJhbGVydFwiXScpO1xuICAgICAgICB0aGlzLmZvcm1TdWJtaXRCdXR0b25zID0gdGhpcy5tZW51Rm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpO1xuICAgIH1cbn1cbi8qIEdhbWVNZW51IGNsYXNzIGVuZCAqL1xuLyogVHVybkluZGljYXRvciBjbGFzcyBzdGFydCAqL1xuY2xhc3MgVHVybkluZGljYXRvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlID0gKG1hcmspID0+IHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBsYXllck1hcmtFbGVtZW50LmlubmVyVGV4dCA9IG1hcms7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQbGF5ZXJNYXJrSWNvbi5zcmMgPSBgLi9kaXN0L2Fzc2V0cy9pY29uLSR7bWFya30uc3ZnYDtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jdXJyZW50UGxheWVyTWFya0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY3VycmVudC1wbGF5ZXItbWFyaycpO1xuICAgICAgICB0aGlzLmN1cnJlbnRQbGF5ZXJNYXJrSWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjdXJyZW50LXBsYXllci1tYXJrLWljb24nKTtcbiAgICB9XG59XG4vKiBUdXJuSW5kaWNhdG9yIGNsYXNzIGVuZCAqL1xuLyogU2NvcmVCb2FyZCBjbGFzcyBzdGFydCAqL1xuY2xhc3MgU2NvcmVCb2FyZCB7XG4gICAgY29uc3RydWN0b3Ioc2NvcmVCb2FyZElkKSB7XG4gICAgICAgIHRoaXMuaW5pdCA9IChwMSwgcDIsIHRpZXMgPSAwKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnAxTGFiZWwuaW5uZXJUZXh0ID0gcDEudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHRoaXMucDJMYWJlbC5pbm5lclRleHQgPSBwMi50b1N0cmluZygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTY29yZShwMSwgcDIsIHRpZXMpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnVwZGF0ZVNjb3JlID0gKHAxLCBwMiwgdGllcykgPT4ge1xuICAgICAgICAgICAgdGhpcy5wMVNjb3JlLmlubmVyVGV4dCA9IHAxLmdldFNjb3JlKCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHRoaXMucDJTY29yZS5pbm5lclRleHQgPSBwMi5nZXRTY29yZSgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB0aGlzLnRpZXNTY29yZS5pbm5lclRleHQgPSB0aWVzLnRvU3RyaW5nKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2NvcmVCb2FyZElkKTtcbiAgICAgICAgdGhpcy5wMUxhYmVsID0gdGhpcy5zY29yZUJvYXJkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNwMS1nYW1lLW5hbWUnKTtcbiAgICAgICAgdGhpcy5wMVNjb3JlID0gdGhpcy5zY29yZUJvYXJkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNwMS1nYW1lLXNjb3JlJyk7XG4gICAgICAgIHRoaXMucDJMYWJlbCA9IHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjcDItZ2FtZS1uYW1lJyk7XG4gICAgICAgIHRoaXMucDJTY29yZSA9IHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjcDItZ2FtZS1zY29yZScpO1xuICAgICAgICB0aGlzLnRpZXNTY29yZSA9IHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjZ2FtZS10aWVzJyk7XG4gICAgfVxufVxuLyogU2NvcmVCb2FyZCBjbGFzcyBlbmQgKi9cbi8qIFJlc3VsdE1vZGFsIGNsYXNzIHN0YXJ0ICovXG5jbGFzcyBSZXN1bHRNb2RhbCB7XG4gICAgY29uc3RydWN0b3IoZ2FtZVF1aXRIYW5kbGluZywgZ2FtZUNvbnRpbnVlSGFuZGxpbmcpIHtcbiAgICAgICAgdGhpcy5nYW1lUXVpdEhhbmRsaW5nID0gZ2FtZVF1aXRIYW5kbGluZztcbiAgICAgICAgdGhpcy5nYW1lQ29udGludWVIYW5kbGluZyA9IGdhbWVDb250aW51ZUhhbmRsaW5nO1xuICAgICAgICB0aGlzLmhhbmRsZUNvbnRpbnVlID0gKGV2KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmdhbWVDb250aW51ZUhhbmRsaW5nKCk7XG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVRdWl0ID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICB0aGlzLmdhbWVRdWl0SGFuZGxpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zaG93ID0gKHdpbm5lciA9IG51bGwpID0+IHtcbiAgICAgICAgICAgIHRoaXMubW9kYWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJlc3VsdCh3aW5uZXIpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhpZGUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnVwZGF0ZVJlc3VsdCA9ICh3aW5uZXIpID0+IHtcbiAgICAgICAgICAgIGlmICh3aW5uZXIgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGllUmVzdWx0KCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5V2lubmVyUmVzdWx0KHdpbm5lcik7XG4gICAgICAgICAgICB0aGlzLnF1aXRCdXR0b24uZm9jdXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kaXNwbGF5VGllUmVzdWx0ID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5tb2RhbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtd2lubmVyJywgJ3RpZScpO1xuICAgICAgICAgICAgdGhpcy5tb2RhbEhlYWRpbmcuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICB0aGlzLm1vZGFsSGVhZGluZy5pbm5lclRleHQgPSAnUm91bmQgdGllZCc7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZGlzcGxheVdpbm5lclJlc3VsdCA9ICh3aW5uZXIpID0+IHtcbiAgICAgICAgICAgIHRoaXMubW9kYWwuc2V0QXR0cmlidXRlKCdkYXRhLXdpbm5lcicsIHdpbm5lci5nZXRNYXJrKCkpO1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRoaXMuZ2V0Um91bmRNZXNzYWdlKHdpbm5lci5nZXROYW1lKCkpO1xuICAgICAgICAgICAgdGhpcy5tb2RhbE1lc3NhZ2UuaW5uZXJUZXh0ID0gbWVzc2FnZTtcbiAgICAgICAgICAgIHRoaXMuc2V0UmVzdWx0SGVhZGluZyh3aW5uZXIpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldFJlc3VsdEhlYWRpbmcgPSAod2lubmVyKSA9PiB7XG4gICAgICAgICAgICAvKiBjbGVhciBoZWFkaW5nIGJlZm9yZSBzZXR0aW5nIG1lc3NhZ2UgKi9cbiAgICAgICAgICAgIHRoaXMubW9kYWxIZWFkaW5nLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgY29uc3QgbWFyayA9IHdpbm5lci5nZXRNYXJrKCk7XG4gICAgICAgICAgICAvKiB3aW5uaW5nIG1hcmsgaWNvbiAqL1xuICAgICAgICAgICAgY29uc3QgaW1nRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgaW1nRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3NyYycsIGAuL2Rpc3QvYXNzZXRzL2ljb24tJHttYXJrfS5zdmdgKTtcbiAgICAgICAgICAgIGltZ0VsZW1lbnQuc2V0QXR0cmlidXRlKCdhbHQnLCAnJyk7XG4gICAgICAgICAgICAvKiBoaWRkZW4gbWFyayBmb3Igc2NyZWVuIHJlYWRlcnMgKi9cbiAgICAgICAgICAgIGNvbnN0IGhpZGRlbk1hcmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICBoaWRkZW5NYXJrLmNsYXNzTGlzdC5hZGQoJ3Zpc3VhbGx5LWhpZGRlbicpO1xuICAgICAgICAgICAgaGlkZGVuTWFyay5pbm5lclRleHQgPSBtYXJrO1xuICAgICAgICAgICAgLyogbWVzc2FnZSBhZnRlciBpbWFnZSAqL1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZVRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgndGFrZXMgdGhlIHJvdW5kJyk7XG4gICAgICAgICAgICAvKiBzcGFuIGNvbnRhaW5lciBmb3IgaGlkZGVuIG1hcmsgYW5kIG1lc3NhZ2UgdGV4dCAqL1xuICAgICAgICAgICAgY29uc3QgaGVhZGluZ1NwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICBoZWFkaW5nU3Bhbi5hcHBlbmRDaGlsZChoaWRkZW5NYXJrKTtcbiAgICAgICAgICAgIGhlYWRpbmdTcGFuLmFwcGVuZENoaWxkKG1lc3NhZ2VUZXh0KTtcbiAgICAgICAgICAgIHRoaXMubW9kYWxIZWFkaW5nLmFwcGVuZENoaWxkKGltZ0VsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5tb2RhbEhlYWRpbmcuYXBwZW5kQ2hpbGQoaGVhZGluZ1NwYW4pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldFJvdW5kTWVzc2FnZSA9IChwbGF5ZXJOYW1lKSA9PiB7XG4gICAgICAgICAgICBsZXQgbWVzc2FnZTtcbiAgICAgICAgICAgIHN3aXRjaCAocGxheWVyTmFtZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3AxJzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9ICdQbGF5ZXIgMSB3aW5zISc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3AyJzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9ICdQbGF5ZXIgMiB3aW5zISc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3lvdSc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAnWW91IHdvbiEnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjcHUnOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gJ09oIG5vLCB5b3UgbG9zdC4uLic7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dhbWUtcmVzdWx0LW1vZGFsJyk7XG4gICAgICAgIHRoaXMubW9kYWxNZXNzYWdlID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX21lc3NhZ2UnKTtcbiAgICAgICAgdGhpcy5tb2RhbEhlYWRpbmcgPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9faGVhZGluZycpO1xuICAgICAgICAvKiBxdWl0IGJ1dHRvbiAqL1xuICAgICAgICB0aGlzLnF1aXRCdXR0b24gPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbltkYXRhLWFjdGlvbj1cInF1aXRcIl0nKTtcbiAgICAgICAgdGhpcy5xdWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVRdWl0KTtcbiAgICAgICAgLyogY29udGludWUgYnV0dG9uICovXG4gICAgICAgIHRoaXMuY29udGludWVCdXR0b24gPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbltkYXRhLWFjdGlvbj1cImNvbnRpbnVlXCJdJyk7XG4gICAgICAgIHRoaXMuY29udGludWVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZUNvbnRpbnVlKTtcbiAgICB9XG59XG4vKiBSZXN1bHRNb2RhbCBjbGFzcyBlbmQgKi9cbi8qIEdhbWVCb2FyZCBjbGFzcyBzdGFydCAqL1xuY2xhc3MgR2FtZUJvYXJkIHtcbiAgICBjb25zdHJ1Y3RvcihnYW1lQm9hcmRJZCwgb25GaWVsZENsaWNrLCBnZXRDdXJyZW50TWFyaykge1xuICAgICAgICB0aGlzLm9uRmllbGRDbGljayA9IG9uRmllbGRDbGljaztcbiAgICAgICAgdGhpcy5nZXRDdXJyZW50TWFyayA9IGdldEN1cnJlbnRNYXJrO1xuICAgICAgICB0aGlzLkJPQVJEX1NJWkUgPSAzO1xuICAgICAgICB0aGlzLmluaXQgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmJvYXJkID0gW1tdLCBbXSwgW11dO1xuICAgICAgICAgICAgLyogZ2V0cyBhbGwgYm9hcmQgZmllbGRzICovXG4gICAgICAgICAgICBjb25zdCBib2FyZEZpZWxkRWxlbWVudHMgPSB0aGlzLmJvYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ2FtZS1ib2FyZF9fZmllbGQnKTtcbiAgICAgICAgICAgIC8qIGNyZWF0aW5nIGZpZWxkcyAqL1xuICAgICAgICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgdGhpcy5ib2FyZC5sZW5ndGg7IHJvdysrKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgdGhpcy5CT0FSRF9TSVpFOyBjb2x1bW4rKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJvYXJkW3Jvd10ucHVzaChuZXcgRmllbGQocm93LCBjb2x1bW4sIGJvYXJkRmllbGRFbGVtZW50c1tjb2x1bW4gKyByb3cgKiB0aGlzLkJPQVJEX1NJWkVdLCBcbiAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlcyBmb3IgZmllbGQoYnV0dG9ucykgZXZlbnRzXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25GaWVsZENsaWNrLCB0aGlzLmdldEN1cnJlbnRNYXJrKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvKiBjaGVja3MvbWFya3MgZmllbGQgb24gcGFzc2VkIHBvc2l0aW9uICovXG4gICAgICAgIHRoaXMuY2hlY2tGaWVsZCA9IChtYXJrLCByb3csIGNvbHVtbikgPT4ge1xuICAgICAgICAgICAgaWYgKHJvdyA8IHRoaXMuYm9hcmQubGVuZ3RoICYmIGNvbHVtbiA8IHRoaXMuYm9hcmRbMF0ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ib2FyZFtyb3ddW2NvbHVtbl0uY2hlY2sobWFyayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaXNGaWVsZENoZWNrZWQgPSAocm93LCBjb2x1bW4pID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJvYXJkW3Jvd11bY29sdW1uXS5pc0NoZWNrZWQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pc0Z1bGwgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ib2FyZC5mbGF0KCkuZXZlcnkoZmllbGQgPT4gZmllbGQuaXNDaGVja2VkKCkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldFdpbm5pbmdGaWVsZHMgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGVja1Jvd3MoKSB8fCB0aGlzLmNoZWNrQ29sdW1ucygpIHx8IHRoaXMuY2hlY2tEaWFnb25hbCgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNoZWNrUm93cyA9ICgpID0+IHtcbiAgICAgICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IHRoaXMuQk9BUkRfU0laRTsgcm93KyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ib2FyZFtyb3ddWzBdLmdldE1hcmsoKSAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJvYXJkW3Jvd11bMF0uZ2V0TWFyaygpID09PSB0aGlzLmJvYXJkW3Jvd11bMV0uZ2V0TWFyaygpICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbcm93XVsxXS5nZXRNYXJrKCkgPT09IHRoaXMuYm9hcmRbcm93XVsyXS5nZXRNYXJrKCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbdGhpcy5ib2FyZFtyb3ddWzBdLCB0aGlzLmJvYXJkW3Jvd11bMV0sIHRoaXMuYm9hcmRbcm93XVsyXV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jaGVja0NvbHVtbnMgPSAoKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCBjb2x1bW4gPSAwOyBjb2x1bW4gPCB0aGlzLkJPQVJEX1NJWkU7IGNvbHVtbisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYm9hcmRbMF1bY29sdW1uXS5nZXRNYXJrKCkgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ib2FyZFswXVtjb2x1bW5dLmdldE1hcmsoKSA9PT0gdGhpcy5ib2FyZFsxXVtjb2x1bW5dLmdldE1hcmsoKSAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJvYXJkWzFdW2NvbHVtbl0uZ2V0TWFyaygpID09PSB0aGlzLmJvYXJkWzJdW2NvbHVtbl0uZ2V0TWFyaygpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3RoaXMuYm9hcmRbMF1bY29sdW1uXSwgdGhpcy5ib2FyZFsxXVtjb2x1bW5dLCB0aGlzLmJvYXJkWzJdW2NvbHVtbl1dO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2hlY2tEaWFnb25hbCA9ICgpID0+IHtcbiAgICAgICAgICAgIC8qIHRvcCBsZWZ0LCBtaWRkbGUsIGFuZCBib3R0b20gcmlnaHQgKi9cbiAgICAgICAgICAgIGlmICh0aGlzLmJvYXJkWzFdWzFdLmdldE1hcmsoKSAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbMF1bMF0uZ2V0TWFyaygpID09PSB0aGlzLmJvYXJkWzFdWzFdLmdldE1hcmsoKSAmJlxuICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbMV1bMV0uZ2V0TWFyaygpID09PSB0aGlzLmJvYXJkWzJdWzJdLmdldE1hcmsoKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gW3RoaXMuYm9hcmRbMF1bMF0sIHRoaXMuYm9hcmRbMV1bMV0sIHRoaXMuYm9hcmRbMl1bMl1dO1xuICAgICAgICAgICAgLyogdG9wIHJpZ2h0LCBtaWRkbGUsIGFuZCBib3R0b20gbGVmdCAqL1xuICAgICAgICAgICAgaWYgKHRoaXMuYm9hcmRbMV1bMV0uZ2V0TWFyaygpICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgdGhpcy5ib2FyZFswXVsyXS5nZXRNYXJrKCkgPT09IHRoaXMuYm9hcmRbMV1bMV0uZ2V0TWFyaygpICYmXG4gICAgICAgICAgICAgICAgdGhpcy5ib2FyZFsxXVsxXS5nZXRNYXJrKCkgPT09IHRoaXMuYm9hcmRbMl1bMF0uZ2V0TWFyaygpKVxuICAgICAgICAgICAgICAgIHJldHVybiBbdGhpcy5ib2FyZFswXVswXSwgdGhpcy5ib2FyZFsxXVsxXSwgdGhpcy5ib2FyZFsyXVsyXV07XG4gICAgICAgICAgICAvKiBubyBmaWVsZHMgbWF0Y2hlZCAqL1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2xlYXIgPSAoKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCB0aGlzLmJvYXJkLmxlbmd0aDsgcm93KyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjb2x1bW4gPSAwOyBjb2x1bW4gPCB0aGlzLkJPQVJEX1NJWkU7IGNvbHVtbisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbcm93XVtjb2x1bW5dLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmJvYXJkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZ2FtZUJvYXJkSWQpO1xuICAgIH1cbn1cbi8qIEdhbWVCb2FyZCBjbGFzcyBlbmQgKi9cbi8qIEZpZWxkIGNsYXNzIHN0YXJ0ICovXG5jbGFzcyBGaWVsZCB7XG4gICAgY29uc3RydWN0b3Iocm93LCBjb2x1bW4sIGZpZWxkRWxlbWVudCwgZ2FtZU9uQ2xpY2tIYW5kbGVyLCBnZXRDdXJyZW50TWFyaykge1xuICAgICAgICB0aGlzLnJvdyA9IHJvdztcbiAgICAgICAgdGhpcy5jb2x1bW4gPSBjb2x1bW47XG4gICAgICAgIHRoaXMuZmllbGRFbGVtZW50ID0gZmllbGRFbGVtZW50O1xuICAgICAgICB0aGlzLmdhbWVPbkNsaWNrSGFuZGxlciA9IGdhbWVPbkNsaWNrSGFuZGxlcjtcbiAgICAgICAgdGhpcy5nZXRDdXJyZW50TWFyayA9IGdldEN1cnJlbnRNYXJrO1xuICAgICAgICB0aGlzLm1hcmsgPSBudWxsO1xuICAgICAgICAvKiBob3Zlci9mb2N1cyBpbiBmaWVsZCBoYW5kbGUgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVIb3ZlciA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRQbGF5ZXJNYXJrID0gdGhpcy5nZXRDdXJyZW50TWFyaygpO1xuICAgICAgICAgICAgdGhpcy5maWVsZEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWN1cnJlbnQtcGxheWVyJywgY3VycmVudFBsYXllck1hcmspO1xuICAgICAgICB9O1xuICAgICAgICAvKiBob3Zlci9mb2N1cyBvdXQgZmllbGQgaGFuZGxlICovXG4gICAgICAgIHRoaXMuaGFuZGxlQmx1ciA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZmllbGRFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1jdXJyZW50LXBsYXllcicpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNsZWFyID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5tYXJrID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuZmllbGRFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGBSb3cgJHt0aGlzLnJvdyArIDF9LCBjb2x1bW4gJHt0aGlzLmNvbHVtbiArIDF9LCBlbXB0eSBmaWVsZGApO1xuICAgICAgICAgICAgdGhpcy5maWVsZEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWN1cnJlbnQtcGxheWVyJyk7XG4gICAgICAgICAgICB0aGlzLmZpZWxkRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtbWFyaycpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNoZWNrID0gKG1hcmspID0+IHtcbiAgICAgICAgICAgIHRoaXMubWFyayA9IG1hcms7XG4gICAgICAgICAgICB0aGlzLmZpZWxkRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBgUm93ICR7dGhpcy5yb3cgKyAxfSwgY29sdW1uICR7dGhpcy5jb2x1bW4gKyAxfSwgJHt0aGlzLm1hcmt9IG1hcmtgKTtcbiAgICAgICAgICAgIHRoaXMuZmllbGRFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1tYXJrJywgbWFyayk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaXNDaGVja2VkID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWFyayAhPT0gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRNYXJrID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWFyaztcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuZmllbGRFbGVtZW50KSB7XG4gICAgICAgICAgICAvKiBjbGljayBoYW5kbGluZyAqL1xuICAgICAgICAgICAgdGhpcy5maWVsZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmdhbWVPbkNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICAvKiBob3Zlci9mb2N1cyBpbiBoYW5kbGluZyAqL1xuICAgICAgICAgICAgdGhpcy5maWVsZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgdGhpcy5oYW5kbGVIb3Zlcik7XG4gICAgICAgICAgICB0aGlzLmZpZWxkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJywgdGhpcy5oYW5kbGVIb3Zlcik7XG4gICAgICAgICAgICAvKiBob3Zlci9mb2N1cyBvdXQgaGFuZGxpbmcgKi9cbiAgICAgICAgICAgIHRoaXMuZmllbGRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgdGhpcy5oYW5kbGVCbHVyKTtcbiAgICAgICAgICAgIHRoaXMuZmllbGRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgdGhpcy5oYW5kbGVCbHVyKTtcbiAgICAgICAgICAgIC8qIHNldHRpbmcgYXR0cmlidXRzICovXG4gICAgICAgICAgICB0aGlzLmZpZWxkRWxlbWVudC5kYXRhc2V0LnJvdyA9IHRoaXMucm93LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB0aGlzLmZpZWxkRWxlbWVudC5kYXRhc2V0LmNvbHVtbiA9IHRoaXMuY29sdW1uLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKiBGaWVsZCBjbGFzcyBlbmQgKi9cbi8qIFBsYXllciBjbGFzcyBzdGFydCAqL1xuY2xhc3MgUGxheWVyIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBtYXJrLCBzY29yZSA9IDApIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5tYXJrID0gbWFyaztcbiAgICAgICAgdGhpcy5zY29yZSA9IHNjb3JlO1xuICAgICAgICB0aGlzLnRvU3RyaW5nID0gKCkgPT4gYCR7dGhpcy5tYXJrfSAoJHt0aGlzLm5hbWV9KWA7XG4gICAgICAgIHRoaXMuZ2V0TmFtZSA9ICgpID0+IHRoaXMubmFtZTtcbiAgICAgICAgdGhpcy5nZXRNYXJrID0gKCkgPT4gdGhpcy5tYXJrO1xuICAgICAgICB0aGlzLmdldFNjb3JlID0gKCkgPT4gdGhpcy5zY29yZTtcbiAgICAgICAgdGhpcy51cGRhdGVTY29yZSA9ICgpID0+ICsrdGhpcy5zY29yZTtcbiAgICB9XG59XG5jbGFzcyBDUFVQbGF5ZXIgZXh0ZW5kcyBQbGF5ZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm1ha2VNb3ZlID0gKGJvYXJkKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBib2FyZFNpemUgPSBib2FyZC5CT0FSRF9TSVpFO1xuICAgICAgICAgICAgbGV0IHJvdywgY29sdW1uO1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIHJvdyA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGJvYXJkU2l6ZSk7XG4gICAgICAgICAgICAgICAgY29sdW1uID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYm9hcmRTaXplKTtcbiAgICAgICAgICAgIH0gd2hpbGUgKGJvYXJkLmlzRmllbGRDaGVja2VkKHJvdywgY29sdW1uKSk7XG4gICAgICAgICAgICByZXR1cm4gW3JvdywgY29sdW1uXTtcbiAgICAgICAgfTtcbiAgICB9XG59XG4vKiBQbGF5ZXIgY2xhc3MgZW5kICovXG4vKiBjbGFzc2VzIGVuZCAqL1xuLyogZ2FtZSBvYmplY3RzICovXG5jb25zdCB0aWNUYWNUb2VHYW1lID0gbmV3IEdhbWUoJyNnYW1lLW1lbnUnLCAnI3RpYy10YWMtdG9lLWdhbWUnKTtcbi8qIGdhbWUgb2JqZWN0cyBlbmQgKi9cbiJdfQ==
