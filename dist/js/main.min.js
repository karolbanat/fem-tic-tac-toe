"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(r){var n=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(r);return _possibleConstructorReturn(this,n?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _createForOfIteratorHelper(e,t){var r,n,o,i,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return n=!(r=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return r=e.done,e},e:function(e){n=!0,o=e},f:function(){try{r||null==a.return||a.return()}finally{if(n)throw o}}};if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),i=0,{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var r;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Game=_createClass(function e(t,r){var i=this;_classCallCheck(this,e),this.ties=0,this.gameCount=0,this.turnCount=0,this.init=function(e,t){var r="x"===t?"o":"x",n="singleplayer"===e?"you":"p1",o="singleplayer"===e?"cpu":"p2";"x"===t?(i.xPlayer=new Player(n,t),i.oPlayer=new("singleplayer"===e?CPUPlayer:Player)(o,r)):(i.xPlayer=new("singleplayer"===e?CPUPlayer:Player)(o,r),i.oPlayer=new Player(n,t)),i.playerQueue=[i.xPlayer,i.oPlayer],i.gameContainer.classList.remove("hidden"),i.scoreBoard.init(i.xPlayer,i.oPlayer,i.ties),i.gameBoard.init(),i.getCurrentPlayer()instanceof CPUPlayer&&i.makeMove.apply(i,_toConsumableArray(i.getCurrentPlayer().makeMove(i.gameBoard)))},this.onFieldClick=function(e){var e=e.target,t=parseInt(e.dataset.row),e=parseInt(e.dataset.column);i.makeMove(t,e)},this.getCurrentPlayerMark=function(){return i.getCurrentPlayer().getMark()},this.getCurrentPlayer=function(){return i.playerQueue[i.turnCount%2]},this.makeMove=function(e,t){var r;i.gameBoard.isFieldChecked(e,t)||(i.getCurrentPlayer()instanceof CPUPlayer&&(e=(r=_slicedToArray(i.getCurrentPlayer().makeMove(i.gameBoard),2))[0],t=r[1]),i.gameBoard.checkField(i.getCurrentPlayer().getMark(),e,t),i.increaseTurnCount(),i.gameBoard.isFull())||i.getCurrentPlayer()instanceof CPUPlayer&&i.makeMove.apply(i,_toConsumableArray(i.getCurrentPlayer().makeMove(i.gameBoard)))},this.increaseTurnCount=function(){return++i.turnCount},this.gameMenu=new GameMenu(t,this.init),this.gameMenu.init(),this.gameContainer=document.querySelector(r),this.scoreBoard=new ScoreBoard("#score-board"),this.gameBoard=new GameBoard("#game-board",this.onFieldClick,this.getCurrentPlayerMark)}),GameMenu=_createClass(function e(t,r){var n=this;_classCallCheck(this,e),this.gameInit=r,this.init=function(){n.formSubmitButtons.forEach(function(e){return e.addEventListener("click",n.handleMenuSubmitButton)})},this.handleMenuSubmitButton=function(e){var t;e.preventDefault(),n.isAnyOptionSelected()?(n.errorMsg.classList.remove("visible"),n.errorMsg.innerText="",e=e.target.dataset.mode,t=n.getCheckedOptionMark(),n.gameMenu.classList.add("hidden"),n.gameInit(e,t)):(n.errorMsg.classList.add("visible"),n.errorMsg.innerText="Please select mark for player 1")},this.isAnyOptionSelected=function(){return Array.from(n.formOptions).some(function(e){return e.checked})},this.getCheckedOptionMark=function(){var e,t=_createForOfIteratorHelper(n.formOptions);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(r.checked)return r.dataset.mark}}catch(e){t.e(e)}finally{t.f()}return""},this.gameMenu=document.querySelector(t),this.menuForm=this.gameMenu.querySelector("form"),this.formOptions=this.menuForm.querySelectorAll('input[type="radio"]'),this.errorMsg=this.menuForm.querySelector('[role="alert"]'),this.formSubmitButtons=this.menuForm.querySelectorAll('button[type="submit"]')}),ScoreBoard=_createClass(function e(t){var n=this;_classCallCheck(this,e),this.init=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;n.p1Label.innerText=e.toString(),n.p2Label.innerText=t.toString(),n.updateScore(e,t,r)},this.updateScore=function(e,t,r){n.p1Score.innerText=e.getScore().toString(),n.p2Score.innerText=t.getScore().toString(),n.tiesScore.innerText=r.toString()},this.scoreBoardContainer=document.querySelector(t),this.p1Label=this.scoreBoardContainer.querySelector("#p1-game-name"),this.p1Score=this.scoreBoardContainer.querySelector("#p1-game-score"),this.p2Label=this.scoreBoardContainer.querySelector("#p2-game-name"),this.p2Score=this.scoreBoardContainer.querySelector("#p2-game-score"),this.tiesScore=this.scoreBoardContainer.querySelector("#game-ties")}),GameBoard=_createClass(function e(t,r,n){var o=this;_classCallCheck(this,e),this.onFieldClick=r,this.getCurrentMark=n,this.BOARD_SIZE=3,this.board=[[],[],[]],this.init=function(){for(var e=o.boardElement.querySelectorAll(".game-board__field"),t=0;t<o.board.length;t++)for(var r=0;r<o.BOARD_SIZE;r++)o.board[t].push(new Field(t,r,e[r+t*o.BOARD_SIZE],o.onFieldClick,o.getCurrentMark))},this.checkField=function(e,t,r){t<o.board.length&&r<o.board[0].length&&o.board[t][r].check(e)},this.isFieldChecked=function(e,t){return o.board[e][t].isChecked()},this.isFull=function(){return o.board.flat().every(function(e){return e.isChecked()})},this.boardElement=document.querySelector(t)}),Field=_createClass(function e(t,r,n,o,i){var a=this;_classCallCheck(this,e),this.row=t,this.column=r,this.fieldElement=n,this.gameOnClickHandler=o,this.getCurrentMark=i,this.mark=null,this.handleHover=function(){var e=a.getCurrentMark();a.fieldElement.setAttribute("data-current-player",e)},this.handleBlur=function(){a.fieldElement.removeAttribute("data-current-player")},this.insertImages=function(){var e=document.createElement("img"),t=(e.setAttribute("src","./dist/assets/icon-o.svg"),e.setAttribute("alt",""),e.setAttribute("data-name","o-icon"),document.createElement("img")),r=(t.setAttribute("src","./dist/assets/icon-o-outline.svg"),t.setAttribute("alt",""),t.setAttribute("data-name","o-outline-icon"),document.createElement("img")),n=(r.setAttribute("src","./dist/assets/icon-x.svg"),r.setAttribute("alt",""),r.setAttribute("data-name","x-icon"),document.createElement("img"));n.setAttribute("src","./dist/assets/icon-x-outline.svg"),n.setAttribute("alt",""),n.setAttribute("data-name","x-outline-icon"),a.fieldElement.appendChild(e),a.fieldElement.appendChild(r),a.fieldElement.appendChild(t),a.fieldElement.appendChild(n)},this.check=function(e){a.mark=e,a.fieldElement.setAttribute("aria-label","Row ".concat(a.row+1,", column ").concat(a.column+1,", ").concat(a.mark," mark")),a.fieldElement.setAttribute("data-mark",e)},this.isChecked=function(){return null!==a.mark},this.getMark=function(){return a.mark},this.fieldElement&&(this.fieldElement.addEventListener("click",this.gameOnClickHandler),this.fieldElement.addEventListener("mouseover",this.handleHover),this.fieldElement.addEventListener("focusin",this.handleHover),this.fieldElement.addEventListener("mouseout",this.handleBlur),this.fieldElement.addEventListener("focusout",this.handleBlur),this.fieldElement.dataset.row=this.row.toString(),this.fieldElement.dataset.column=this.column.toString(),this.fieldElement.setAttribute("aria-label","Row ".concat(this.row+1,", column ").concat(this.column+1,", empty field")),this.insertImages())}),Player=_createClass(function e(t,r){var n=this,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck(this,e),this.name=t,this.mark=r,this.score=o,this.toString=function(){return"".concat(n.mark," (").concat(n.name,")")},this.getMark=function(){return n.mark},this.getScore=function(){return n.score},this.updateScore=function(){return++n.score}}),CPUPlayer=function(){_inherits(r,Player);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).makeMove=function(e){for(var t,r,n=e.BOARD_SIZE;t=Math.floor(Math.random()*n),r=Math.floor(Math.random()*n),e.isFieldChecked(t,r););return[t,r]},e}return _createClass(r)}(),ticTacToeGame=new Game("#game-menu","#tic-tac-toe-game");
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4udHMiXSwibmFtZXMiOlsiR2FtZSIsIl9jcmVhdGVDbGFzcyIsImdhbWVNZW51SWQiLCJnYW1lQ29udGFpbmVySWQiLCJfdGhpcyIsInRoaXMiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aWVzIiwiZ2FtZUNvdW50IiwidHVybkNvdW50IiwiaW5pdCIsIm1vZGUiLCJwMU1hcmsiLCJwMk1hcmsiLCJwMUxhYmVsIiwicDJMYWJlbCIsInhQbGF5ZXIiLCJQbGF5ZXIiLCJvUGxheWVyIiwiQ1BVUGxheWVyIiwicGxheWVyUXVldWUiLCJnYW1lQ29udGFpbmVyIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwic2NvcmVCb2FyZCIsImdhbWVCb2FyZCIsImdldEN1cnJlbnRQbGF5ZXIiLCJtYWtlTW92ZSIsImFwcGx5IiwiX3RvQ29uc3VtYWJsZUFycmF5Iiwib25GaWVsZENsaWNrIiwiZXYiLCJmaWVsZEJ1dHRvbiIsInRhcmdldCIsInJvdyIsInBhcnNlSW50IiwiZGF0YXNldCIsImNvbHVtbiIsImdldEN1cnJlbnRQbGF5ZXJNYXJrIiwiZ2V0TWFyayIsIl90aGlzJGdldEN1cnJlbnRQbGF5ZTIiLCJpc0ZpZWxkQ2hlY2tlZCIsIl9zbGljZWRUb0FycmF5IiwiY2hlY2tGaWVsZCIsImluY3JlYXNlVHVybkNvdW50IiwiaXNGdWxsIiwiZ2FtZU1lbnUiLCJHYW1lTWVudSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIlNjb3JlQm9hcmQiLCJHYW1lQm9hcmQiLCJnYW1lSW5pdCIsIl90aGlzMiIsImZvcm1TdWJtaXRCdXR0b25zIiwiZm9yRWFjaCIsImJ0biIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVNZW51U3VibWl0QnV0dG9uIiwicHJldmVudERlZmF1bHQiLCJpc0FueU9wdGlvblNlbGVjdGVkIiwiZXJyb3JNc2ciLCJpbm5lclRleHQiLCJnYW1lTW9kZSIsImdldENoZWNrZWRPcHRpb25NYXJrIiwiYWRkIiwiQXJyYXkiLCJmcm9tIiwiZm9ybU9wdGlvbnMiLCJzb21lIiwib3B0aW9uIiwiY2hlY2tlZCIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwiX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiLCJzIiwibiIsImRvbmUiLCJ2YWx1ZSIsIm1hcmsiLCJlcnIiLCJlIiwiZiIsIm1lbnVGb3JtIiwicXVlcnlTZWxlY3RvckFsbCIsInNjb3JlQm9hcmRJZCIsIl90aGlzMyIsInAxIiwicDIiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJ0b1N0cmluZyIsInVwZGF0ZVNjb3JlIiwicDFTY29yZSIsImdldFNjb3JlIiwicDJTY29yZSIsInRpZXNTY29yZSIsInNjb3JlQm9hcmRDb250YWluZXIiLCJnYW1lQm9hcmRJZCIsImdldEN1cnJlbnRNYXJrIiwiX3RoaXM0IiwiQk9BUkRfU0laRSIsImJvYXJkIiwiYm9hcmRGaWVsZEVsZW1lbnRzIiwiYm9hcmRFbGVtZW50IiwicHVzaCIsIkZpZWxkIiwiY2hlY2siLCJpc0NoZWNrZWQiLCJmbGF0IiwiZXZlcnkiLCJmaWVsZCIsImZpZWxkRWxlbWVudCIsImdhbWVPbkNsaWNrSGFuZGxlciIsIl90aGlzNSIsImhhbmRsZUhvdmVyIiwiY3VycmVudFBsYXllck1hcmsiLCJzZXRBdHRyaWJ1dGUiLCJoYW5kbGVCbHVyIiwicmVtb3ZlQXR0cmlidXRlIiwiaW5zZXJ0SW1hZ2VzIiwib0ltYWdlIiwiY3JlYXRlRWxlbWVudCIsIm9PdXRsaW5lSW1hZ2UiLCJ4SW1hZ2UiLCJ4T3V0bGluZUltYWdlIiwiYXBwZW5kQ2hpbGQiLCJjb25jYXQiLCJuYW1lIiwiX3RoaXM2Iiwic2NvcmUiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJfY3JlYXRlU3VwZXIiLCJfdGhpczciLCJib2FyZFNpemUiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ0aWNUYWNUb2VHYW1lIl0sIm1hcHBpbmdzIjoiMitJQUNBLElBQ01BLEtBQUlDLGFBWVQsU0FBQUQsRUFBWUUsRUFBb0JDLEdBQXVCLElBQUFDLEVBQUFDLEtBQUFDLGdC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Q0FBTSxJQUN6QyxNQUFPLENBQUNILEVBQUtHLEVBQ2QsRUFBRWtHLENBQ0gsQ0FBQyxPQUFBdEksYUFBQWtCLENBQUEsQ0FBQSxFQVY2QixFQWV4QnlILGNBQXNCLElBQUk1SSxLQUFLLGFBQWMsbUJBQW1CIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogY2xhc3NlcyAqL1xyXG4vKiBHYW1lIGNsYXNzIHN0YXJ0ICovXHJcbmNsYXNzIEdhbWUge1xyXG5cdHByaXZhdGUgZ2FtZU1lbnU6IEdhbWVNZW51O1xyXG5cdHByaXZhdGUgZ2FtZUNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBnYW1lQm9hcmQ6IEdhbWVCb2FyZDtcclxuXHRwcml2YXRlIHNjb3JlQm9hcmQ6IFNjb3JlQm9hcmQ7XHJcblx0cHJpdmF0ZSB4UGxheWVyOiBQbGF5ZXI7XHJcblx0cHJpdmF0ZSBvUGxheWVyOiBQbGF5ZXI7XHJcblx0cHJpdmF0ZSBwbGF5ZXJRdWV1ZTogW1BsYXllciwgUGxheWVyXTtcclxuXHRwcml2YXRlIHRpZXM6IG51bWJlciA9IDA7XHJcblx0cHJpdmF0ZSBnYW1lQ291bnQ6IG51bWJlciA9IDA7XHJcblx0cHJpdmF0ZSB0dXJuQ291bnQ6IG51bWJlciA9IDA7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGdhbWVNZW51SWQ6IHN0cmluZywgZ2FtZUNvbnRhaW5lcklkOiBzdHJpbmcpIHtcclxuXHRcdHRoaXMuZ2FtZU1lbnUgPSBuZXcgR2FtZU1lbnUoZ2FtZU1lbnVJZCwgdGhpcy5pbml0KTtcclxuXHRcdHRoaXMuZ2FtZU1lbnUuaW5pdCgpO1xyXG5cdFx0dGhpcy5nYW1lQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihnYW1lQ29udGFpbmVySWQpO1xyXG5cdFx0dGhpcy5zY29yZUJvYXJkID0gbmV3IFNjb3JlQm9hcmQoJyNzY29yZS1ib2FyZCcpO1xyXG5cdFx0dGhpcy5nYW1lQm9hcmQgPSBuZXcgR2FtZUJvYXJkKCcjZ2FtZS1ib2FyZCcsIHRoaXMub25GaWVsZENsaWNrLCB0aGlzLmdldEN1cnJlbnRQbGF5ZXJNYXJrKTtcclxuXHR9XHJcblxyXG5cdGluaXQgPSAobW9kZTogc3RyaW5nLCBwMU1hcms6IHN0cmluZyk6IHZvaWQgPT4ge1xyXG5cdFx0Y29uc3QgcDJNYXJrOiBzdHJpbmcgPSBwMU1hcmsgPT09ICd4JyA/ICdvJyA6ICd4JztcclxuXHRcdGNvbnN0IHAxTGFiZWw6IHN0cmluZyA9IG1vZGUgPT09ICdzaW5nbGVwbGF5ZXInID8gJ3lvdScgOiAncDEnO1xyXG5cdFx0Y29uc3QgcDJMYWJlbDogc3RyaW5nID0gbW9kZSA9PT0gJ3NpbmdsZXBsYXllcicgPyAnY3B1JyA6ICdwMic7XHJcblxyXG5cdFx0aWYgKHAxTWFyayA9PT0gJ3gnKSB7XHJcblx0XHRcdHRoaXMueFBsYXllciA9IG5ldyBQbGF5ZXIocDFMYWJlbCwgcDFNYXJrKTtcclxuXHRcdFx0dGhpcy5vUGxheWVyID0gbW9kZSA9PT0gJ3NpbmdsZXBsYXllcicgPyBuZXcgQ1BVUGxheWVyKHAyTGFiZWwsIHAyTWFyaykgOiBuZXcgUGxheWVyKHAyTGFiZWwsIHAyTWFyayk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLnhQbGF5ZXIgPSBtb2RlID09PSAnc2luZ2xlcGxheWVyJyA/IG5ldyBDUFVQbGF5ZXIocDJMYWJlbCwgcDJNYXJrKSA6IG5ldyBQbGF5ZXIocDJMYWJlbCwgcDJNYXJrKTtcclxuXHRcdFx0dGhpcy5vUGxheWVyID0gbmV3IFBsYXllcihwMUxhYmVsLCBwMU1hcmspO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMucGxheWVyUXVldWUgPSBbdGhpcy54UGxheWVyLCB0aGlzLm9QbGF5ZXJdO1xyXG5cdFx0dGhpcy5nYW1lQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG5cdFx0dGhpcy5zY29yZUJvYXJkLmluaXQodGhpcy54UGxheWVyLCB0aGlzLm9QbGF5ZXIsIHRoaXMudGllcyk7XHJcblx0XHR0aGlzLmdhbWVCb2FyZC5pbml0KCk7XHJcblx0XHQvKiBpZiBzdGFydGluZyBwbGF5ZXIgaXMgQ1BVIHRoZW4gbWFrZSBhdXRvIG1vdmUgKi9cclxuXHRcdGlmICh0aGlzLmdldEN1cnJlbnRQbGF5ZXIoKSBpbnN0YW5jZW9mIENQVVBsYXllcikge1xyXG5cdFx0XHR0aGlzLm1ha2VNb3ZlKC4uLih0aGlzLmdldEN1cnJlbnRQbGF5ZXIoKSBhcyBDUFVQbGF5ZXIpLm1ha2VNb3ZlKHRoaXMuZ2FtZUJvYXJkKSk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0b25GaWVsZENsaWNrID0gKGV2OiBFdmVudCk6IHZvaWQgPT4ge1xyXG5cdFx0Y29uc3QgZmllbGRCdXR0b24gPSBldi50YXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblx0XHRjb25zdCByb3c6IG51bWJlciA9IHBhcnNlSW50KGZpZWxkQnV0dG9uLmRhdGFzZXQucm93KTtcclxuXHRcdGNvbnN0IGNvbHVtbjogbnVtYmVyID0gcGFyc2VJbnQoZmllbGRCdXR0b24uZGF0YXNldC5jb2x1bW4pO1xyXG5cdFx0dGhpcy5tYWtlTW92ZShyb3csIGNvbHVtbik7XHJcblx0fTtcclxuXHJcblx0Z2V0Q3VycmVudFBsYXllck1hcmsgPSAoKTogc3RyaW5nID0+IHtcclxuXHRcdHJldHVybiB0aGlzLmdldEN1cnJlbnRQbGF5ZXIoKS5nZXRNYXJrKCk7XHJcblx0fTtcclxuXHJcblx0Z2V0Q3VycmVudFBsYXllciA9ICgpOiBQbGF5ZXIgPT4ge1xyXG5cdFx0cmV0dXJuIHRoaXMucGxheWVyUXVldWVbdGhpcy50dXJuQ291bnQgJSAyXTtcclxuXHR9O1xyXG5cclxuXHRtYWtlTW92ZSA9IChyb3c6IG51bWJlciwgY29sdW1uOiBudW1iZXIpOiB2b2lkID0+IHtcclxuXHRcdC8qIG9uIGZpZWxkIGNsaWNrLCBpZiBmaWVsZCBpcyBjaGVja2VkIHRoZW4gcmV0dXJuIGRvaW5nIG5vdGhpbmcgKi9cclxuXHRcdGlmICh0aGlzLmdhbWVCb2FyZC5pc0ZpZWxkQ2hlY2tlZChyb3csIGNvbHVtbikpIHJldHVybjtcclxuXHRcdC8qIGlmIGN1cnJlbnQgcGxheWVyIGlzIENQVSB0aGVuIG1ha2UgYXV0byBtb3ZlICovXHJcblx0XHRpZiAodGhpcy5nZXRDdXJyZW50UGxheWVyKCkgaW5zdGFuY2VvZiBDUFVQbGF5ZXIpIHtcclxuXHRcdFx0W3JvdywgY29sdW1uXSA9ICh0aGlzLmdldEN1cnJlbnRQbGF5ZXIoKSBhcyBDUFVQbGF5ZXIpLm1ha2VNb3ZlKHRoaXMuZ2FtZUJvYXJkKTtcclxuXHRcdH1cclxuXHJcblx0XHQvKiBjaGVja3Mgc2VsZWN0ZWQgZmllbGQgKi9cclxuXHRcdHRoaXMuZ2FtZUJvYXJkLmNoZWNrRmllbGQodGhpcy5nZXRDdXJyZW50UGxheWVyKCkuZ2V0TWFyaygpLCByb3csIGNvbHVtbik7XHJcblx0XHR0aGlzLmluY3JlYXNlVHVybkNvdW50KCk7XHJcblxyXG5cdFx0LyogaWYgYm9hcmQgaXMgZnVsbCByZXR1cm4gYmVmb3JlIGNoZWNraW5nIGlmIG5leHQgbW92ZSBzaG91bGQgYmUgZG9uZSBieSBDUFUgKi9cclxuXHRcdGlmICh0aGlzLmdhbWVCb2FyZC5pc0Z1bGwoKSkgcmV0dXJuO1xyXG5cclxuXHRcdC8qIGFmdGVyIHRoZW4gZmllbGQgaXMgY2hlY2tlZCwgY2hlY2tzIGlmIGN1cnJlbnQgcGxheWVyIGlzIENQVSBhbmQgaWYgaXMsIHRoZW4gbWFrZXMgYSBtb3ZlICovXHJcblx0XHRpZiAodGhpcy5nZXRDdXJyZW50UGxheWVyKCkgaW5zdGFuY2VvZiBDUFVQbGF5ZXIpIHtcclxuXHRcdFx0dGhpcy5tYWtlTW92ZSguLi4odGhpcy5nZXRDdXJyZW50UGxheWVyKCkgYXMgQ1BVUGxheWVyKS5tYWtlTW92ZSh0aGlzLmdhbWVCb2FyZCkpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGluY3JlYXNlVHVybkNvdW50ID0gKCk6IG51bWJlciA9PiB7XHJcblx0XHRyZXR1cm4gKyt0aGlzLnR1cm5Db3VudDtcclxuXHR9O1xyXG59XHJcbi8qIEdhbWUgY2xhc3MgZW5kICovXHJcblxyXG4vKiBHYW1lTWVudSBjbGFzcyBzdGFydCAqL1xyXG5jbGFzcyBHYW1lTWVudSB7XHJcblx0cHJpdmF0ZSBnYW1lTWVudTogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBtZW51Rm9ybTogSFRNTEZvcm1FbGVtZW50O1xyXG5cdHByaXZhdGUgZm9ybU9wdGlvbnM6IE5vZGVMaXN0T2Y8SFRNTElucHV0RWxlbWVudD47XHJcblx0cHJpdmF0ZSBlcnJvck1zZzogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBmb3JtU3VibWl0QnV0dG9uczogTm9kZUxpc3RPZjxIVE1MQnV0dG9uRWxlbWVudD47XHJcblxyXG5cdGNvbnN0cnVjdG9yKGdhbWVNZW51SWQ6IHN0cmluZywgcHJpdmF0ZSBnYW1lSW5pdDogKG1vZGU6IHN0cmluZywgcDFNYXJrOiBzdHJpbmcpID0+IHZvaWQpIHtcclxuXHRcdHRoaXMuZ2FtZU1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGdhbWVNZW51SWQpO1xyXG5cdFx0dGhpcy5tZW51Rm9ybSA9IHRoaXMuZ2FtZU1lbnUucXVlcnlTZWxlY3RvcignZm9ybScpO1xyXG5cdFx0dGhpcy5mb3JtT3B0aW9ucyA9IHRoaXMubWVudUZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cInJhZGlvXCJdJyk7XHJcblx0XHR0aGlzLmVycm9yTXNnID0gdGhpcy5tZW51Rm9ybS5xdWVyeVNlbGVjdG9yKCdbcm9sZT1cImFsZXJ0XCJdJyk7XHJcblx0XHR0aGlzLmZvcm1TdWJtaXRCdXR0b25zID0gdGhpcy5tZW51Rm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpO1xyXG5cdH1cclxuXHJcblx0aW5pdCA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuZm9ybVN1Ym1pdEJ1dHRvbnMuZm9yRWFjaChidG4gPT4gYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVNZW51U3VibWl0QnV0dG9uKSk7XHJcblx0fTtcclxuXHJcblx0aGFuZGxlTWVudVN1Ym1pdEJ1dHRvbiA9IChldjogRXZlbnQpOiB2b2lkID0+IHtcclxuXHRcdGV2LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRpZiAoIXRoaXMuaXNBbnlPcHRpb25TZWxlY3RlZCgpKSB7XHJcblx0XHRcdHRoaXMuZXJyb3JNc2cuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xyXG5cdFx0XHR0aGlzLmVycm9yTXNnLmlubmVyVGV4dCA9ICdQbGVhc2Ugc2VsZWN0IG1hcmsgZm9yIHBsYXllciAxJztcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5lcnJvck1zZy5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XHJcblx0XHRcdHRoaXMuZXJyb3JNc2cuaW5uZXJUZXh0ID0gJyc7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3Qgc3VibWl0QnRuOiBIVE1MQnV0dG9uRWxlbWVudCA9IGV2LnRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuXHRcdGNvbnN0IGdhbWVNb2RlOiBzdHJpbmcgPSBzdWJtaXRCdG4uZGF0YXNldC5tb2RlO1xyXG5cdFx0Y29uc3QgcDFNYXJrOiBzdHJpbmcgPSB0aGlzLmdldENoZWNrZWRPcHRpb25NYXJrKCk7XHJcblx0XHR0aGlzLmdhbWVNZW51LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG5cdFx0dGhpcy5nYW1lSW5pdChnYW1lTW9kZSwgcDFNYXJrKTsgLy8gbWV0aG9kIGZyb20gdGhlIHBhcmVudCBHYW1lIGNsYXNzXHJcblx0fTtcclxuXHJcblx0aXNBbnlPcHRpb25TZWxlY3RlZCA9ICgpOiBib29sZWFuID0+IHtcclxuXHRcdHJldHVybiBBcnJheS5mcm9tKHRoaXMuZm9ybU9wdGlvbnMpLnNvbWUob3B0aW9uID0+IG9wdGlvbi5jaGVja2VkKTtcclxuXHR9O1xyXG5cclxuXHRnZXRDaGVja2VkT3B0aW9uTWFyayA9ICgpOiBzdHJpbmcgPT4ge1xyXG5cdFx0Zm9yIChjb25zdCBvcHRpb24gb2YgdGhpcy5mb3JtT3B0aW9ucykge1xyXG5cdFx0XHRpZiAob3B0aW9uLmNoZWNrZWQpIHJldHVybiBvcHRpb24uZGF0YXNldC5tYXJrO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuICcnO1xyXG5cdH07XHJcbn1cclxuLyogR2FtZU1lbnUgY2xhc3MgZW5kICovXHJcblxyXG4vKiBTY29yZUJvYXJkIGNsYXNzIHN0YXJ0ICovXHJcbmNsYXNzIFNjb3JlQm9hcmQge1xyXG5cdHByaXZhdGUgc2NvcmVCb2FyZENvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBwMUxhYmVsOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIHAxU2NvcmU6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgcDJMYWJlbDogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBwMlNjb3JlOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIHRpZXNTY29yZTogSFRNTEVsZW1lbnQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKHNjb3JlQm9hcmRJZDogc3RyaW5nKSB7XHJcblx0XHR0aGlzLnNjb3JlQm9hcmRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNjb3JlQm9hcmRJZCk7XHJcblx0XHR0aGlzLnAxTGFiZWwgPSB0aGlzLnNjb3JlQm9hcmRDb250YWluZXIucXVlcnlTZWxlY3RvcignI3AxLWdhbWUtbmFtZScpO1xyXG5cdFx0dGhpcy5wMVNjb3JlID0gdGhpcy5zY29yZUJvYXJkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNwMS1nYW1lLXNjb3JlJyk7XHJcblx0XHR0aGlzLnAyTGFiZWwgPSB0aGlzLnNjb3JlQm9hcmRDb250YWluZXIucXVlcnlTZWxlY3RvcignI3AyLWdhbWUtbmFtZScpO1xyXG5cdFx0dGhpcy5wMlNjb3JlID0gdGhpcy5zY29yZUJvYXJkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNwMi1nYW1lLXNjb3JlJyk7XHJcblx0XHR0aGlzLnRpZXNTY29yZSA9IHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjZ2FtZS10aWVzJyk7XHJcblx0fVxyXG5cclxuXHRpbml0ID0gKHAxOiBQbGF5ZXIsIHAyOiBQbGF5ZXIsIHRpZXM6IG51bWJlciA9IDApOiB2b2lkID0+IHtcclxuXHRcdHRoaXMucDFMYWJlbC5pbm5lclRleHQgPSBwMS50b1N0cmluZygpO1xyXG5cdFx0dGhpcy5wMkxhYmVsLmlubmVyVGV4dCA9IHAyLnRvU3RyaW5nKCk7XHJcblx0XHR0aGlzLnVwZGF0ZVNjb3JlKHAxLCBwMiwgdGllcyk7XHJcblx0fTtcclxuXHJcblx0dXBkYXRlU2NvcmUgPSAocDE6IFBsYXllciwgcDI6IFBsYXllciwgdGllczogbnVtYmVyKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnAxU2NvcmUuaW5uZXJUZXh0ID0gcDEuZ2V0U2NvcmUoKS50b1N0cmluZygpO1xyXG5cdFx0dGhpcy5wMlNjb3JlLmlubmVyVGV4dCA9IHAyLmdldFNjb3JlKCkudG9TdHJpbmcoKTtcclxuXHRcdHRoaXMudGllc1Njb3JlLmlubmVyVGV4dCA9IHRpZXMudG9TdHJpbmcoKTtcclxuXHR9O1xyXG59XHJcbi8qIFNjb3JlQm9hcmQgY2xhc3MgZW5kICovXHJcblxyXG4vKiBHYW1lQm9hcmQgY2xhc3Mgc3RhcnQgKi9cclxuY2xhc3MgR2FtZUJvYXJkIHtcclxuXHRCT0FSRF9TSVpFOiBudW1iZXIgPSAzO1xyXG5cdHByaXZhdGUgYm9hcmRFbGVtZW50OiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIGJvYXJkOiBGaWVsZFtdW10gPSBbW10sIFtdLCBbXV07XHJcblxyXG5cdGNvbnN0cnVjdG9yKGdhbWVCb2FyZElkOiBzdHJpbmcsIHByaXZhdGUgb25GaWVsZENsaWNrOiAoZXY6IEV2ZW50KSA9PiB2b2lkLCBwcml2YXRlIGdldEN1cnJlbnRNYXJrOiAoKSA9PiBzdHJpbmcpIHtcclxuXHRcdHRoaXMuYm9hcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihnYW1lQm9hcmRJZCk7XHJcblx0fVxyXG5cclxuXHRpbml0ID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0Y29uc3QgYm9hcmRGaWVsZEVsZW1lbnRzOiBOb2RlTGlzdE9mPEhUTUxCdXR0b25FbGVtZW50PiA9IHRoaXMuYm9hcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5nYW1lLWJvYXJkX19maWVsZCcpO1xyXG5cdFx0Zm9yIChsZXQgcm93ID0gMDsgcm93IDwgdGhpcy5ib2FyZC5sZW5ndGg7IHJvdysrKSB7XHJcblx0XHRcdGZvciAobGV0IGNvbHVtbiA9IDA7IGNvbHVtbiA8IHRoaXMuQk9BUkRfU0laRTsgY29sdW1uKyspIHtcclxuXHRcdFx0XHR0aGlzLmJvYXJkW3Jvd10ucHVzaChcclxuXHRcdFx0XHRcdG5ldyBGaWVsZChcclxuXHRcdFx0XHRcdFx0cm93LFxyXG5cdFx0XHRcdFx0XHRjb2x1bW4sXHJcblx0XHRcdFx0XHRcdGJvYXJkRmllbGRFbGVtZW50c1tjb2x1bW4gKyByb3cgKiB0aGlzLkJPQVJEX1NJWkVdLFxyXG5cdFx0XHRcdFx0XHR0aGlzLm9uRmllbGRDbGljayxcclxuXHRcdFx0XHRcdFx0dGhpcy5nZXRDdXJyZW50TWFya1xyXG5cdFx0XHRcdFx0KVxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRjaGVja0ZpZWxkID0gKG1hcms6IHN0cmluZywgcm93OiBudW1iZXIsIGNvbHVtbjogbnVtYmVyKSA9PiB7XHJcblx0XHRpZiAocm93IDwgdGhpcy5ib2FyZC5sZW5ndGggJiYgY29sdW1uIDwgdGhpcy5ib2FyZFswXS5sZW5ndGgpIHtcclxuXHRcdFx0dGhpcy5ib2FyZFtyb3ddW2NvbHVtbl0uY2hlY2sobWFyayk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0aXNGaWVsZENoZWNrZWQgPSAocm93OiBudW1iZXIsIGNvbHVtbjogbnVtYmVyKTogYm9vbGVhbiA9PiB7XHJcblx0XHRyZXR1cm4gdGhpcy5ib2FyZFtyb3ddW2NvbHVtbl0uaXNDaGVja2VkKCk7XHJcblx0fTtcclxuXHJcblx0aXNGdWxsID0gKCk6IGJvb2xlYW4gPT4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuYm9hcmQuZmxhdCgpLmV2ZXJ5KGZpZWxkID0+IGZpZWxkLmlzQ2hlY2tlZCgpKTtcclxuXHR9O1xyXG59XHJcbi8qIEdhbWVCb2FyZCBjbGFzcyBlbmQgKi9cclxuXHJcbi8qIEZpZWxkIGNsYXNzIHN0YXJ0ICovXHJcbmNsYXNzIEZpZWxkIHtcclxuXHRwcml2YXRlIG1hcms6IHN0cmluZyA9IG51bGw7XHJcblxyXG5cdGNvbnN0cnVjdG9yKFxyXG5cdFx0cHJpdmF0ZSByb3c6IG51bWJlcixcclxuXHRcdHByaXZhdGUgY29sdW1uOiBudW1iZXIsXHJcblx0XHRwcml2YXRlIGZpZWxkRWxlbWVudDogSFRNTEJ1dHRvbkVsZW1lbnQsXHJcblx0XHRwcml2YXRlIGdhbWVPbkNsaWNrSGFuZGxlcjogKGV2OiBFdmVudCkgPT4gdm9pZCxcclxuXHRcdHByaXZhdGUgZ2V0Q3VycmVudE1hcms6ICgpID0+IHN0cmluZ1xyXG5cdCkge1xyXG5cdFx0aWYgKHRoaXMuZmllbGRFbGVtZW50KSB7XHJcblx0XHRcdC8qIGNsaWNrIGhhbmRsaW5nICovXHJcblx0XHRcdHRoaXMuZmllbGRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5nYW1lT25DbGlja0hhbmRsZXIpO1xyXG5cdFx0XHQvKiBob3Zlci9mb2N1cyBpbiBoYW5kbGluZyAqL1xyXG5cdFx0XHR0aGlzLmZpZWxkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCB0aGlzLmhhbmRsZUhvdmVyKTtcclxuXHRcdFx0dGhpcy5maWVsZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIHRoaXMuaGFuZGxlSG92ZXIpO1xyXG5cdFx0XHQvKiBob3Zlci9mb2N1cyBvdXQgaGFuZGxpbmcgKi9cclxuXHRcdFx0dGhpcy5maWVsZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCB0aGlzLmhhbmRsZUJsdXIpO1xyXG5cdFx0XHR0aGlzLmZpZWxkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIHRoaXMuaGFuZGxlQmx1cik7XHJcblx0XHRcdC8qIHNldHRpbmcgYXR0cmlidXRzICovXHJcblx0XHRcdHRoaXMuZmllbGRFbGVtZW50LmRhdGFzZXQucm93ID0gdGhpcy5yb3cudG9TdHJpbmcoKTtcclxuXHRcdFx0dGhpcy5maWVsZEVsZW1lbnQuZGF0YXNldC5jb2x1bW4gPSB0aGlzLmNvbHVtbi50b1N0cmluZygpO1xyXG5cdFx0XHR0aGlzLmZpZWxkRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBgUm93ICR7dGhpcy5yb3cgKyAxfSwgY29sdW1uICR7dGhpcy5jb2x1bW4gKyAxfSwgZW1wdHkgZmllbGRgKTtcclxuXHJcblx0XHRcdHRoaXMuaW5zZXJ0SW1hZ2VzKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRoYW5kbGVIb3ZlciA9ICgpOiB2b2lkID0+IHtcclxuXHRcdGNvbnN0IGN1cnJlbnRQbGF5ZXJNYXJrID0gdGhpcy5nZXRDdXJyZW50TWFyaygpO1xyXG5cdFx0dGhpcy5maWVsZEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWN1cnJlbnQtcGxheWVyJywgY3VycmVudFBsYXllck1hcmspO1xyXG5cdH07XHJcblxyXG5cdGhhbmRsZUJsdXIgPSAoKSA9PiB7XHJcblx0XHR0aGlzLmZpZWxkRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtY3VycmVudC1wbGF5ZXInKTtcclxuXHR9O1xyXG5cclxuXHRpbnNlcnRJbWFnZXMgPSAoKSA9PiB7XHJcblx0XHRjb25zdCBvSW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuXHRcdG9JbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsICcuL2Rpc3QvYXNzZXRzL2ljb24tby5zdmcnKTtcclxuXHRcdG9JbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsICcnKTtcclxuXHRcdG9JbWFnZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScsICdvLWljb24nKTtcclxuXHRcdGNvbnN0IG9PdXRsaW5lSW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuXHRcdG9PdXRsaW5lSW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCAnLi9kaXN0L2Fzc2V0cy9pY29uLW8tb3V0bGluZS5zdmcnKTtcclxuXHRcdG9PdXRsaW5lSW1hZ2Uuc2V0QXR0cmlidXRlKCdhbHQnLCAnJyk7XHJcblx0XHRvT3V0bGluZUltYWdlLnNldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJywgJ28tb3V0bGluZS1pY29uJyk7XHJcblx0XHRjb25zdCB4SW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuXHRcdHhJbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsICcuL2Rpc3QvYXNzZXRzL2ljb24teC5zdmcnKTtcclxuXHRcdHhJbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsICcnKTtcclxuXHRcdHhJbWFnZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScsICd4LWljb24nKTtcclxuXHRcdGNvbnN0IHhPdXRsaW5lSW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuXHRcdHhPdXRsaW5lSW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCAnLi9kaXN0L2Fzc2V0cy9pY29uLXgtb3V0bGluZS5zdmcnKTtcclxuXHRcdHhPdXRsaW5lSW1hZ2Uuc2V0QXR0cmlidXRlKCdhbHQnLCAnJyk7XHJcblx0XHR4T3V0bGluZUltYWdlLnNldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJywgJ3gtb3V0bGluZS1pY29uJyk7XHJcblxyXG5cdFx0dGhpcy5maWVsZEVsZW1lbnQuYXBwZW5kQ2hpbGQob0ltYWdlKTtcclxuXHRcdHRoaXMuZmllbGRFbGVtZW50LmFwcGVuZENoaWxkKHhJbWFnZSk7XHJcblx0XHR0aGlzLmZpZWxkRWxlbWVudC5hcHBlbmRDaGlsZChvT3V0bGluZUltYWdlKTtcclxuXHRcdHRoaXMuZmllbGRFbGVtZW50LmFwcGVuZENoaWxkKHhPdXRsaW5lSW1hZ2UpO1xyXG5cdH07XHJcblxyXG5cdGNoZWNrID0gKG1hcms6IHN0cmluZyk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5tYXJrID0gbWFyaztcclxuXHRcdHRoaXMuZmllbGRFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGBSb3cgJHt0aGlzLnJvdyArIDF9LCBjb2x1bW4gJHt0aGlzLmNvbHVtbiArIDF9LCAke3RoaXMubWFya30gbWFya2ApO1xyXG5cdFx0dGhpcy5maWVsZEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLW1hcmsnLCBtYXJrKTtcclxuXHR9O1xyXG5cclxuXHRpc0NoZWNrZWQgPSAoKTogYm9vbGVhbiA9PiB7XHJcblx0XHRyZXR1cm4gdGhpcy5tYXJrICE9PSBudWxsO1xyXG5cdH07XHJcblxyXG5cdGdldE1hcmsgPSAoKTogc3RyaW5nID0+IHtcclxuXHRcdHJldHVybiB0aGlzLm1hcms7XHJcblx0fTtcclxufVxyXG4vKiBGaWVsZCBjbGFzcyBlbmQgKi9cclxuXHJcbi8qIFBsYXllciBjbGFzcyBzdGFydCAqL1xyXG5jbGFzcyBQbGF5ZXIge1xyXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgbmFtZTogc3RyaW5nLCBwcml2YXRlIG1hcms6IHN0cmluZywgcHJpdmF0ZSBzY29yZTogbnVtYmVyID0gMCkge31cclxuXHJcblx0dG9TdHJpbmcgPSAoKTogc3RyaW5nID0+IGAke3RoaXMubWFya30gKCR7dGhpcy5uYW1lfSlgO1xyXG5cclxuXHRnZXRNYXJrID0gKCk6IHN0cmluZyA9PiB0aGlzLm1hcms7XHJcblxyXG5cdGdldFNjb3JlID0gKCk6IG51bWJlciA9PiB0aGlzLnNjb3JlO1xyXG5cclxuXHR1cGRhdGVTY29yZSA9ICgpOiBudW1iZXIgPT4gKyt0aGlzLnNjb3JlO1xyXG59XHJcblxyXG5jbGFzcyBDUFVQbGF5ZXIgZXh0ZW5kcyBQbGF5ZXIge1xyXG5cdG1ha2VNb3ZlID0gKGJvYXJkOiBHYW1lQm9hcmQpOiBbbnVtYmVyLCBudW1iZXJdID0+IHtcclxuXHRcdGNvbnN0IGJvYXJkU2l6ZSA9IGJvYXJkLkJPQVJEX1NJWkU7XHJcblx0XHRsZXQgcm93LCBjb2x1bW47XHJcblx0XHRkbyB7XHJcblx0XHRcdHJvdyA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGJvYXJkU2l6ZSk7XHJcblx0XHRcdGNvbHVtbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGJvYXJkU2l6ZSk7XHJcblx0XHR9IHdoaWxlIChib2FyZC5pc0ZpZWxkQ2hlY2tlZChyb3csIGNvbHVtbikpO1xyXG5cdFx0cmV0dXJuIFtyb3csIGNvbHVtbl07XHJcblx0fTtcclxufVxyXG4vKiBQbGF5ZXIgY2xhc3MgZW5kICovXHJcbi8qIGNsYXNzZXMgZW5kICovXHJcblxyXG4vKiBnYW1lIG9iamVjdHMgKi9cclxuY29uc3QgdGljVGFjVG9lR2FtZTogR2FtZSA9IG5ldyBHYW1lKCcjZ2FtZS1tZW51JywgJyN0aWMtdGFjLXRvZS1nYW1lJyk7XHJcbi8qIGdhbWUgb2JqZWN0cyBlbmQgKi9cclxuIl19
