"use strict";function _createForOfIteratorHelper(e,t){var r,n,i,o,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return n=!(r=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return r=e.done,e},e:function(e){n=!0,i=e},f:function(){try{r||null==a.return||a.return()}finally{if(n)throw i}}};if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var r;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Game=_createClass(function e(t,r){var i=this;_classCallCheck(this,e),this.ties=0,this.init=function(e,t){var r="x"===t?"o":"x",n="singleplayer"===e?"you":"p1",e="singleplayer"===e?"cpu":"p2";"x"===t?(i.xPlayer=new Player(n,t),i.oPlayer=new Player(e,r)):(i.xPlayer=new Player(e,r),i.oPlayer=new Player(n,t)),i.gameContainer.classList.remove("hidden"),i.scoreBoard.init(i.xPlayer,i.oPlayer,i.ties),i.gameBoard.init()},this.onFieldClick=function(e){i.makeMove()},this.makeMove=function(){},this.gameMenu=new GameMenu(t,this.init),this.gameMenu.init(),this.gameContainer=document.querySelector(r),this.scoreBoard=new ScoreBoard("#score-board"),this.gameBoard=new GameBoard("#game-board",this.onFieldClick)}),GameMenu=_createClass(function e(t,r){var n=this;_classCallCheck(this,e),this.gameInit=r,this.init=function(){n.formSubmitButtons.forEach(function(e){return e.addEventListener("click",n.handleMenuSubmitButton)})},this.handleMenuSubmitButton=function(e){var t;e.preventDefault(),n.isAnyOptionSelected()?(n.errorMsg.classList.remove("visible"),n.errorMsg.innerText="",e=e.target.dataset.mode,t=n.getCheckedOptionMark(),n.gameMenu.classList.add("hidden"),n.gameInit(e,t)):(n.errorMsg.classList.add("visible"),n.errorMsg.innerText="Please select mark for player 1")},this.isAnyOptionSelected=function(){return Array.from(n.formOptions).some(function(e){return e.checked})},this.getCheckedOptionMark=function(){var e,t=_createForOfIteratorHelper(n.formOptions);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(r.checked)return r.dataset.mark}}catch(e){t.e(e)}finally{t.f()}return""},this.gameMenu=document.querySelector(t),this.menuForm=this.gameMenu.querySelector("form"),this.formOptions=this.menuForm.querySelectorAll('input[type="radio"]'),this.errorMsg=this.menuForm.querySelector('[role="alert"]'),this.formSubmitButtons=this.menuForm.querySelectorAll('button[type="submit"]')}),ScoreBoard=_createClass(function e(t){var n=this;_classCallCheck(this,e),this.init=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;n.p1Label.innerText=e.toString(),n.p2Label.innerText=t.toString(),n.updateScore(e,t,r)},this.updateScore=function(e,t,r){n.p1Score.innerText=e.getScore().toString(),n.p2Score.innerText=t.getScore().toString(),n.tiesScore.innerText=r.toString()},this.scoreBoardContainer=document.querySelector(t),this.p1Label=this.scoreBoardContainer.querySelector("#p1-game-name"),this.p1Score=this.scoreBoardContainer.querySelector("#p1-game-score"),this.p2Label=this.scoreBoardContainer.querySelector("#p2-game-name"),this.p2Score=this.scoreBoardContainer.querySelector("#p2-game-score"),this.tiesScore=this.scoreBoardContainer.querySelector("#game-ties")}),GameBoard=_createClass(function e(t,r){var n=this;_classCallCheck(this,e),this.onFieldClick=r,this.BOARD_SIZE=3,this.board=[[],[],[]],this.init=function(){for(var e=n.boardElement.querySelectorAll(".game-board__field"),t=0;t<n.board.length;t++)for(var r=0;r<n.BOARD_SIZE;r++)n.board[t].push(new Field(t,r,e[r+t*n.BOARD_SIZE],n.onFieldClick))},this.checkField=function(e,t,r){t<n.board.length&&r<n.board[0].length&&n.board[t][r].check(e)},this.boardElement=document.querySelector(t)}),Field=_createClass(function e(t,r,n,i){var o=this;_classCallCheck(this,e),this.row=t,this.column=r,this.fieldElement=n,this.gameOnClickHandler=i,this.mark=null,this.check=function(e){o.mark=e,o.fieldElement.setAttribute("aria-label","Row ".concat(o.row+1,", column ").concat(o.column+1,", ").concat(o.mark," mark"))},this.isChecked=function(){return null!==o.mark},this.getMark=function(){return o.mark},this.fieldElement&&(this.fieldElement.addEventListener("click",this.gameOnClickHandler),this.fieldElement.dataset.row=this.row.toString(),this.fieldElement.dataset.column=this.column.toString(),this.fieldElement.setAttribute("aria-label","Row ".concat(this.row+1,", column ").concat(this.column+1,", empty field")))}),Player=_createClass(function e(t,r){var n=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck(this,e),this.name=t,this.mark=r,this.score=i,this.toString=function(){return"".concat(n.mark," (").concat(n.name,")")},this.getMark=function(){return n.mark},this.getScore=function(){return n.score},this.updateScore=function(){return++n.score}}),ticTacToeGame=new Game("#game-menu","#tic-tac-toe-game");
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4udHMiXSwibmFtZXMiOlsiR2FtZSIsIl9jcmVhdGVDbGFzcyIsImdhbWVNZW51SWQiLCJnYW1lQ29udGFpbmVySWQiLCJfdGhpcyIsInRoaXMiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aWVzIiwiaW5pdCIsIm1vZGUiLCJwMU1hcmsiLCJwMk1hcmsiLCJwMUxhYmVsIiwicDJMYWJlbCIsInhQbGF5ZXIiLCJQbGF5ZXIiLCJvUGxheWVyIiwiZ2FtZUNvbnRhaW5lciIsImNsYXNzTGlzdCIsInJlbW92ZSIsInNjb3JlQm9hcmQiLCJnYW1lQm9hcmQiLCJvbkZpZWxkQ2xpY2siLCJldiIsIm1ha2VNb3ZlIiwiZ2FtZU1lbnUiLCJHYW1lTWVudSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIlNjb3JlQm9hcmQiLCJHYW1lQm9hcmQiLCJnYW1lSW5pdCIsIl90aGlzMiIsImZvcm1TdWJtaXRCdXR0b25zIiwiZm9yRWFjaCIsImJ0biIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVNZW51U3VibWl0QnV0dG9uIiwicHJldmVudERlZmF1bHQiLCJpc0FueU9wdGlvblNlbGVjdGVkIiwiZXJyb3JNc2ciLCJpbm5lclRleHQiLCJnYW1lTW9kZSIsInRhcmdldCIsImRhdGFzZXQiLCJnZXRDaGVja2VkT3B0aW9uTWFyayIsImFkZCIsIkFycmF5IiwiZnJvbSIsImZvcm1PcHRpb25zIiwic29tZSIsIm9wdGlvbiIsImNoZWNrZWQiLCJfc3RlcCIsIl9pdGVyYXRvciIsIl9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIiwicyIsIm4iLCJkb25lIiwidmFsdWUiLCJtYXJrIiwiZXJyIiwiZSIsImYiLCJtZW51Rm9ybSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzY29yZUJvYXJkSWQiLCJfdGhpczMiLCJwMSIsInAyIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwidG9TdHJpbmciLCJ1cGRhdGVTY29yZSIsInAxU2NvcmUiLCJnZXRTY29yZSIsInAyU2NvcmUiLCJ0aWVzU2NvcmUiLCJzY29yZUJvYXJkQ29udGFpbmVyIiwiZ2FtZUJvYXJkSWQiLCJfdGhpczQiLCJCT0FSRF9TSVpFIiwiYm9hcmQiLCJib2FyZEZpZWxkRWxlbWVudHMiLCJib2FyZEVsZW1lbnQiLCJyb3ciLCJjb2x1bW4iLCJwdXNoIiwiRmllbGQiLCJjaGVja0ZpZWxkIiwiY2hlY2siLCJmaWVsZEVsZW1lbnQiLCJnYW1lT25DbGlja0hhbmRsZXIiLCJfdGhpczUiLCJzZXRBdHRyaWJ1dGUiLCJjb25jYXQiLCJpc0NoZWNrZWQiLCJnZXRNYXJrIiwibmFtZSIsIl90aGlzNiIsInNjb3JlIiwidGljVGFjVG9lR2FtZSJdLCJtYXBwaW5ncyI6IjZqREFDQSxJQUNNQSxLQUFJQyxhQVNULFNBQUFELEVBQVlFLEVBQW9CQyxHQUF1QixJQUFBQyxFQUFBQyxLQUFBQyxnQkFBQUQsS0FBQUwsQ0FBQSxFQUYvQ0ssS0FBQUUsS0FBZSxFQVV2QkYsS0FBQUcsS0FBTyxTQUFDQyxFQUFjQyxHQUNyQixJQUFNQyxFQUE0QixNQUFYRCxFQUFpQixJQUFNLElBQ3hDRSxFQUEyQixpQkFBVEgsRUFBMEIsTUFBUSxLQUNwREksRUFBMkIsaUJBQVRKLEVBQTBCLE1BQVEsS0FFM0MsTUFBWEMsR0FDSE4sRUFBS1UsUUFBVSxJQUFJQyxPQUFPSCxFQUFTRixDQUFNLEVBQ3pDTixFQUFLWSxRQUFVLElBQUlELE9BQU9GLEVBQVNGLENBQU0sSUFFekNQLEVBQUtVLFFBQVUsSUFBSUMsT0FBT0YsRUFBU0YsQ0FBTSxFQUN6Q1AsRUFBS1ksUUFBVSxJQUFJRCxPQUFPSCxFQUFTRixDQUFNLEdBRzFDTixFQUFLYSxjQUFjQyxVQUFVQyxPQUFPLFFBQVEsRUFDNUNmLEVBQUtnQixXQUFXWixLQUFLSixFQUFLVSxRQUFTVixFQUFLWSxRQUFTWixFQUFLRyxJQUFJLEVBQzFESCxFQUFLaUIsVUFBVWIsS0FBSSxDQUNwQixFQUVBSCxLQUFBaUIsYUFBZSxTQUFDQyxHQUNmbkIsRUFBS29CLFNBQVEsQ0FDZCxFQUVB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QUNYLFNBQUFjLEVBQW9Cb0YsRUFBc0J2QyxHQUF1QyxJQUFBd0MsRUFBQS9GLEtBQWpCZ0csRUFBQSxFQUFBL0IsVUFBQUMsUUFBQUMsS0FBQUEsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQWdCLEVBQUNoRSxnQkFBQUQsS0FBQVUsQ0FBQSxFQUE3RFYsS0FBQThGLEtBQUFBLEVBQXNCOUYsS0FBQXVELEtBQUFBLEVBQXNCdkQsS0FBQWdHLE1BQUFBLEVBRWhFaEcsS0FBQW9FLFNBQVcsV0FBQSxNQUFBLEdBQUF1QixPQUFpQkksRUFBS3hDLEtBQUksSUFBQSxFQUFBb0MsT0FBS0ksRUFBS0QsS0FBSSxHQUFBLENBQUEsRUFFbkQ5RixLQUFBNkYsUUFBVSxXQUFBLE9BQWNFLEVBQUt4QyxJQUFJLEVBRWpDdkQsS0FBQXVFLFNBQVcsV0FBQSxPQUFjd0IsRUFBS0MsS0FBSyxFQUVuQ2hHLEtBQUFxRSxZQUFjLFdBQUEsTUFBYyxFQUFFMEIsRUFBS0MsS0FBSyxDQVI0QyxDQUFDLEVBY2hGQyxjQUFzQixJQUFJdEcsS0FBSyxhQUFjLG1CQUFtQiIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGNsYXNzZXMgKi9cclxuLyogR2FtZSBjbGFzcyBzdGFydCAqL1xyXG5jbGFzcyBHYW1lIHtcclxuXHRwcml2YXRlIGdhbWVNZW51OiBHYW1lTWVudTtcclxuXHRwcml2YXRlIGdhbWVDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgZ2FtZUJvYXJkOiBHYW1lQm9hcmQ7XHJcblx0cHJpdmF0ZSBzY29yZUJvYXJkOiBTY29yZUJvYXJkO1xyXG5cdHByaXZhdGUgeFBsYXllcjogUGxheWVyO1xyXG5cdHByaXZhdGUgb1BsYXllcjogUGxheWVyO1xyXG5cdHByaXZhdGUgdGllczogbnVtYmVyID0gMDtcclxuXHJcblx0Y29uc3RydWN0b3IoZ2FtZU1lbnVJZDogc3RyaW5nLCBnYW1lQ29udGFpbmVySWQ6IHN0cmluZykge1xyXG5cdFx0dGhpcy5nYW1lTWVudSA9IG5ldyBHYW1lTWVudShnYW1lTWVudUlkLCB0aGlzLmluaXQpO1xyXG5cdFx0dGhpcy5nYW1lTWVudS5pbml0KCk7XHJcblx0XHR0aGlzLmdhbWVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGdhbWVDb250YWluZXJJZCk7XHJcblx0XHR0aGlzLnNjb3JlQm9hcmQgPSBuZXcgU2NvcmVCb2FyZCgnI3Njb3JlLWJvYXJkJyk7XHJcblx0XHR0aGlzLmdhbWVCb2FyZCA9IG5ldyBHYW1lQm9hcmQoJyNnYW1lLWJvYXJkJywgdGhpcy5vbkZpZWxkQ2xpY2spO1xyXG5cdH1cclxuXHJcblx0aW5pdCA9IChtb2RlOiBzdHJpbmcsIHAxTWFyazogc3RyaW5nKTogdm9pZCA9PiB7XHJcblx0XHRjb25zdCBwMk1hcms6IHN0cmluZyA9IHAxTWFyayA9PT0gJ3gnID8gJ28nIDogJ3gnO1xyXG5cdFx0Y29uc3QgcDFMYWJlbDogc3RyaW5nID0gbW9kZSA9PT0gJ3NpbmdsZXBsYXllcicgPyAneW91JyA6ICdwMSc7XHJcblx0XHRjb25zdCBwMkxhYmVsOiBzdHJpbmcgPSBtb2RlID09PSAnc2luZ2xlcGxheWVyJyA/ICdjcHUnIDogJ3AyJztcclxuXHJcblx0XHRpZiAocDFNYXJrID09PSAneCcpIHtcclxuXHRcdFx0dGhpcy54UGxheWVyID0gbmV3IFBsYXllcihwMUxhYmVsLCBwMU1hcmspO1xyXG5cdFx0XHR0aGlzLm9QbGF5ZXIgPSBuZXcgUGxheWVyKHAyTGFiZWwsIHAyTWFyayk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLnhQbGF5ZXIgPSBuZXcgUGxheWVyKHAyTGFiZWwsIHAyTWFyayk7XHJcblx0XHRcdHRoaXMub1BsYXllciA9IG5ldyBQbGF5ZXIocDFMYWJlbCwgcDFNYXJrKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmdhbWVDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcblx0XHR0aGlzLnNjb3JlQm9hcmQuaW5pdCh0aGlzLnhQbGF5ZXIsIHRoaXMub1BsYXllciwgdGhpcy50aWVzKTtcclxuXHRcdHRoaXMuZ2FtZUJvYXJkLmluaXQoKTtcclxuXHR9O1xyXG5cclxuXHRvbkZpZWxkQ2xpY2sgPSAoZXY6IEV2ZW50KTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLm1ha2VNb3ZlKCk7XHJcblx0fTtcclxuXHJcblx0bWFrZU1vdmUgPSAoKSA9PiB7fTtcclxufVxyXG4vKiBHYW1lIGNsYXNzIGVuZCAqL1xyXG5cclxuLyogR2FtZU1lbnUgY2xhc3Mgc3RhcnQgKi9cclxuY2xhc3MgR2FtZU1lbnUge1xyXG5cdHByaXZhdGUgZ2FtZU1lbnU6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgbWVudUZvcm06IEhUTUxGb3JtRWxlbWVudDtcclxuXHRwcml2YXRlIGZvcm1PcHRpb25zOiBOb2RlTGlzdE9mPEhUTUxJbnB1dEVsZW1lbnQ+O1xyXG5cdHByaXZhdGUgZXJyb3JNc2c6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgZm9ybVN1Ym1pdEJ1dHRvbnM6IE5vZGVMaXN0T2Y8SFRNTEJ1dHRvbkVsZW1lbnQ+O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihnYW1lTWVudUlkOiBzdHJpbmcsIHByaXZhdGUgZ2FtZUluaXQ6IChtb2RlOiBzdHJpbmcsIHAxTWFyazogc3RyaW5nKSA9PiB2b2lkKSB7XHJcblx0XHR0aGlzLmdhbWVNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihnYW1lTWVudUlkKTtcclxuXHRcdHRoaXMubWVudUZvcm0gPSB0aGlzLmdhbWVNZW51LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcclxuXHRcdHRoaXMuZm9ybU9wdGlvbnMgPSB0aGlzLm1lbnVGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXScpO1xyXG5cdFx0dGhpcy5lcnJvck1zZyA9IHRoaXMubWVudUZvcm0ucXVlcnlTZWxlY3RvcignW3JvbGU9XCJhbGVydFwiXScpO1xyXG5cdFx0dGhpcy5mb3JtU3VibWl0QnV0dG9ucyA9IHRoaXMubWVudUZvcm0ucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKTtcclxuXHR9XHJcblxyXG5cdGluaXQgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLmZvcm1TdWJtaXRCdXR0b25zLmZvckVhY2goYnRuID0+IGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlTWVudVN1Ym1pdEJ1dHRvbikpO1xyXG5cdH07XHJcblxyXG5cdGhhbmRsZU1lbnVTdWJtaXRCdXR0b24gPSAoZXY6IEV2ZW50KTogdm9pZCA9PiB7XHJcblx0XHRldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0aWYgKCF0aGlzLmlzQW55T3B0aW9uU2VsZWN0ZWQoKSkge1xyXG5cdFx0XHR0aGlzLmVycm9yTXNnLmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcclxuXHRcdFx0dGhpcy5lcnJvck1zZy5pbm5lclRleHQgPSAnUGxlYXNlIHNlbGVjdCBtYXJrIGZvciBwbGF5ZXIgMSc7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuZXJyb3JNc2cuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xyXG5cdFx0XHR0aGlzLmVycm9yTXNnLmlubmVyVGV4dCA9ICcnO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IHN1Ym1pdEJ0bjogSFRNTEJ1dHRvbkVsZW1lbnQgPSBldi50YXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblx0XHRjb25zdCBnYW1lTW9kZTogc3RyaW5nID0gc3VibWl0QnRuLmRhdGFzZXQubW9kZTtcclxuXHRcdGNvbnN0IHAxTWFyazogc3RyaW5nID0gdGhpcy5nZXRDaGVja2VkT3B0aW9uTWFyaygpO1xyXG5cdFx0dGhpcy5nYW1lTWVudS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuXHRcdHRoaXMuZ2FtZUluaXQoZ2FtZU1vZGUsIHAxTWFyayk7IC8vIG1ldGhvZCBmcm9tIHRoZSBwYXJlbnQgR2FtZSBjbGFzc1xyXG5cdH07XHJcblxyXG5cdGlzQW55T3B0aW9uU2VsZWN0ZWQgPSAoKTogYm9vbGVhbiA9PiB7XHJcblx0XHRyZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmZvcm1PcHRpb25zKS5zb21lKG9wdGlvbiA9PiBvcHRpb24uY2hlY2tlZCk7XHJcblx0fTtcclxuXHJcblx0Z2V0Q2hlY2tlZE9wdGlvbk1hcmsgPSAoKTogc3RyaW5nID0+IHtcclxuXHRcdGZvciAoY29uc3Qgb3B0aW9uIG9mIHRoaXMuZm9ybU9wdGlvbnMpIHtcclxuXHRcdFx0aWYgKG9wdGlvbi5jaGVja2VkKSByZXR1cm4gb3B0aW9uLmRhdGFzZXQubWFyaztcclxuXHRcdH1cclxuXHRcdHJldHVybiAnJztcclxuXHR9O1xyXG59XHJcbi8qIEdhbWVNZW51IGNsYXNzIGVuZCAqL1xyXG5cclxuLyogU2NvcmVCb2FyZCBjbGFzcyBzdGFydCAqL1xyXG5jbGFzcyBTY29yZUJvYXJkIHtcclxuXHRwcml2YXRlIHNjb3JlQm9hcmRDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgcDFMYWJlbDogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBwMVNjb3JlOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIHAyTGFiZWw6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgcDJTY29yZTogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSB0aWVzU2NvcmU6IEhUTUxFbGVtZW50O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihzY29yZUJvYXJkSWQ6IHN0cmluZykge1xyXG5cdFx0dGhpcy5zY29yZUJvYXJkQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzY29yZUJvYXJkSWQpO1xyXG5cdFx0dGhpcy5wMUxhYmVsID0gdGhpcy5zY29yZUJvYXJkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNwMS1nYW1lLW5hbWUnKTtcclxuXHRcdHRoaXMucDFTY29yZSA9IHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjcDEtZ2FtZS1zY29yZScpO1xyXG5cdFx0dGhpcy5wMkxhYmVsID0gdGhpcy5zY29yZUJvYXJkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNwMi1nYW1lLW5hbWUnKTtcclxuXHRcdHRoaXMucDJTY29yZSA9IHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjcDItZ2FtZS1zY29yZScpO1xyXG5cdFx0dGhpcy50aWVzU2NvcmUgPSB0aGlzLnNjb3JlQm9hcmRDb250YWluZXIucXVlcnlTZWxlY3RvcignI2dhbWUtdGllcycpO1xyXG5cdH1cclxuXHJcblx0aW5pdCA9IChwMTogUGxheWVyLCBwMjogUGxheWVyLCB0aWVzOiBudW1iZXIgPSAwKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnAxTGFiZWwuaW5uZXJUZXh0ID0gcDEudG9TdHJpbmcoKTtcclxuXHRcdHRoaXMucDJMYWJlbC5pbm5lclRleHQgPSBwMi50b1N0cmluZygpO1xyXG5cdFx0dGhpcy51cGRhdGVTY29yZShwMSwgcDIsIHRpZXMpO1xyXG5cdH07XHJcblxyXG5cdHVwZGF0ZVNjb3JlID0gKHAxOiBQbGF5ZXIsIHAyOiBQbGF5ZXIsIHRpZXM6IG51bWJlcik6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5wMVNjb3JlLmlubmVyVGV4dCA9IHAxLmdldFNjb3JlKCkudG9TdHJpbmcoKTtcclxuXHRcdHRoaXMucDJTY29yZS5pbm5lclRleHQgPSBwMi5nZXRTY29yZSgpLnRvU3RyaW5nKCk7XHJcblx0XHR0aGlzLnRpZXNTY29yZS5pbm5lclRleHQgPSB0aWVzLnRvU3RyaW5nKCk7XHJcblx0fTtcclxufVxyXG4vKiBTY29yZUJvYXJkIGNsYXNzIGVuZCAqL1xyXG5cclxuLyogR2FtZUJvYXJkIGNsYXNzIHN0YXJ0ICovXHJcbmNsYXNzIEdhbWVCb2FyZCB7XHJcblx0cHJpdmF0ZSBCT0FSRF9TSVpFOiBudW1iZXIgPSAzO1xyXG5cdHByaXZhdGUgYm9hcmRFbGVtZW50OiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIGJvYXJkOiBGaWVsZFtdW10gPSBbW10sIFtdLCBbXV07XHJcblxyXG5cdGNvbnN0cnVjdG9yKGdhbWVCb2FyZElkOiBzdHJpbmcsIHByaXZhdGUgb25GaWVsZENsaWNrOiAoZXY6IEV2ZW50KSA9PiB2b2lkKSB7XHJcblx0XHR0aGlzLmJvYXJkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZ2FtZUJvYXJkSWQpO1xyXG5cdH1cclxuXHJcblx0aW5pdCA9ICgpOiB2b2lkID0+IHtcclxuXHRcdGNvbnN0IGJvYXJkRmllbGRFbGVtZW50czogTm9kZUxpc3RPZjxIVE1MQnV0dG9uRWxlbWVudD4gPSB0aGlzLmJvYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ2FtZS1ib2FyZF9fZmllbGQnKTtcclxuXHRcdGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IHRoaXMuYm9hcmQubGVuZ3RoOyByb3crKykge1xyXG5cdFx0XHRmb3IgKGxldCBjb2x1bW4gPSAwOyBjb2x1bW4gPCB0aGlzLkJPQVJEX1NJWkU7IGNvbHVtbisrKSB7XHJcblx0XHRcdFx0dGhpcy5ib2FyZFtyb3ddLnB1c2goXHJcblx0XHRcdFx0XHRuZXcgRmllbGQocm93LCBjb2x1bW4sIGJvYXJkRmllbGRFbGVtZW50c1tjb2x1bW4gKyByb3cgKiB0aGlzLkJPQVJEX1NJWkVdLCB0aGlzLm9uRmllbGRDbGljaylcclxuXHRcdFx0XHQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Y2hlY2tGaWVsZCA9IChtYXJrOiBzdHJpbmcsIHJvdzogbnVtYmVyLCBjb2x1bW46IG51bWJlcikgPT4ge1xyXG5cdFx0aWYgKHJvdyA8IHRoaXMuYm9hcmQubGVuZ3RoICYmIGNvbHVtbiA8IHRoaXMuYm9hcmRbMF0ubGVuZ3RoKSB7XHJcblx0XHRcdHRoaXMuYm9hcmRbcm93XVtjb2x1bW5dLmNoZWNrKG1hcmspO1xyXG5cdFx0fVxyXG5cdH07XHJcbn1cclxuLyogR2FtZUJvYXJkIGNsYXNzIGVuZCAqL1xyXG5cclxuLyogRmllbGQgY2xhc3Mgc3RhcnQgKi9cclxuY2xhc3MgRmllbGQge1xyXG5cdHByaXZhdGUgbWFyazogc3RyaW5nID0gbnVsbDtcclxuXHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRwcml2YXRlIHJvdzogbnVtYmVyLFxyXG5cdFx0cHJpdmF0ZSBjb2x1bW46IG51bWJlcixcclxuXHRcdHByaXZhdGUgZmllbGRFbGVtZW50OiBIVE1MQnV0dG9uRWxlbWVudCxcclxuXHRcdHByaXZhdGUgZ2FtZU9uQ2xpY2tIYW5kbGVyOiAoZXY6IEV2ZW50KSA9PiB2b2lkXHJcblx0KSB7XHJcblx0XHRpZiAodGhpcy5maWVsZEVsZW1lbnQpIHtcclxuXHRcdFx0dGhpcy5maWVsZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmdhbWVPbkNsaWNrSGFuZGxlcik7XHJcblx0XHRcdHRoaXMuZmllbGRFbGVtZW50LmRhdGFzZXQucm93ID0gdGhpcy5yb3cudG9TdHJpbmcoKTtcclxuXHRcdFx0dGhpcy5maWVsZEVsZW1lbnQuZGF0YXNldC5jb2x1bW4gPSB0aGlzLmNvbHVtbi50b1N0cmluZygpO1xyXG5cdFx0XHR0aGlzLmZpZWxkRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBgUm93ICR7dGhpcy5yb3cgKyAxfSwgY29sdW1uICR7dGhpcy5jb2x1bW4gKyAxfSwgZW1wdHkgZmllbGRgKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGNoZWNrID0gKG1hcms6IHN0cmluZyk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5tYXJrID0gbWFyaztcclxuXHRcdHRoaXMuZmllbGRFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGBSb3cgJHt0aGlzLnJvdyArIDF9LCBjb2x1bW4gJHt0aGlzLmNvbHVtbiArIDF9LCAke3RoaXMubWFya30gbWFya2ApO1xyXG5cdH07XHJcblxyXG5cdGlzQ2hlY2tlZCA9ICgpOiBib29sZWFuID0+IHtcclxuXHRcdHJldHVybiB0aGlzLm1hcmsgIT09IG51bGw7XHJcblx0fTtcclxuXHJcblx0Z2V0TWFyayA9ICgpOiBzdHJpbmcgPT4ge1xyXG5cdFx0cmV0dXJuIHRoaXMubWFyaztcclxuXHR9O1xyXG59XHJcbi8qIEZpZWxkIGNsYXNzIGVuZCAqL1xyXG5cclxuLyogUGxheWVyIGNsYXNzIHN0YXJ0ICovXHJcbmNsYXNzIFBsYXllciB7XHJcblx0Y29uc3RydWN0b3IocHJpdmF0ZSBuYW1lOiBzdHJpbmcsIHByaXZhdGUgbWFyazogc3RyaW5nLCBwcml2YXRlIHNjb3JlOiBudW1iZXIgPSAwKSB7fVxyXG5cclxuXHR0b1N0cmluZyA9ICgpOiBzdHJpbmcgPT4gYCR7dGhpcy5tYXJrfSAoJHt0aGlzLm5hbWV9KWA7XHJcblxyXG5cdGdldE1hcmsgPSAoKTogc3RyaW5nID0+IHRoaXMubWFyaztcclxuXHJcblx0Z2V0U2NvcmUgPSAoKTogbnVtYmVyID0+IHRoaXMuc2NvcmU7XHJcblxyXG5cdHVwZGF0ZVNjb3JlID0gKCk6IG51bWJlciA9PiArK3RoaXMuc2NvcmU7XHJcbn1cclxuLyogUGxheWVyIGNsYXNzIGVuZCAqL1xyXG4vKiBjbGFzc2VzIGVuZCAqL1xyXG5cclxuLyogZ2FtZSBvYmplY3RzICovXHJcbmNvbnN0IHRpY1RhY1RvZUdhbWU6IEdhbWUgPSBuZXcgR2FtZSgnI2dhbWUtbWVudScsICcjdGljLXRhYy10b2UtZ2FtZScpO1xyXG4vKiBnYW1lIG9iamVjdHMgZW5kICovXHJcbiJdfQ==
