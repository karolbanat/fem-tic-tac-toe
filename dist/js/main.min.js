"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _createForOfIteratorHelper(e,t){var r,n,a,o,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return n=!(r=!0),{s:function(){i=i.call(e)},n:function(){var e=i.next();return r=e.done,e},e:function(e){n=!0,a=e},f:function(){try{r||null==i.return||i.return()}finally{if(n)throw a}}};if(Array.isArray(e)||(i=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(r){var n=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(r);return _possibleConstructorReturn(this,n?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var r;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Game=_createClass(function e(){var a=this;_classCallCheck(this,e),this.ties=0,this.gameCount=0,this.turnCount=0,this.onFieldClick=function(e){var e=e.target,t=parseInt(e.dataset.row),e=parseInt(e.dataset.column);a.makeMove(t,e)},this.onGameContinue=function(){a.gameCount++,a.turnCount=0,a.gameBoard.clear(),a.setResetButtonFocus(),a.updateScoreBoard(),a.makeMoveCPU()},this.onGameQuit=function(){a.gameContainer.classList.add("hidden"),a.gameBoard.clear(),a.gameMenu.show(),a.gameMenu.setFocus()},this.onRestartButtonClick=function(){a.restartGameModal.show()},this.setResetButtonFocus=function(){a.restartGameButton.focus()},this.init=function(e,t){var r,n="x"===t?"o":"x",e="singleplayer"===e?(r="you",new CPUPlayer("cpu",n)):(r="p1",new Player("p2",n)),n=new Player(r,t);"x"===t?(a.xPlayer=n,a.oPlayer=e):(a.xPlayer=e,a.oPlayer=n),a.playerQueue=[a.xPlayer,a.oPlayer],a.resetCounters(),a.gameContainer.classList.remove("hidden"),a.startGame()},this.startGame=function(){a.scoreBoard.init(a.xPlayer,a.oPlayer,a.ties),a.gameBoard.init(),a.updateTurnIndicator(),a.makeMoveCPU()},this.restartGame=function(){a.resetCounters(),a.gameBoard.clear(),a.xPlayer.resetScore(),a.oPlayer.resetScore(),a.updateScoreBoard(),a.updateTurnIndicator(),a.makeMoveCPU(),a.setResetButtonFocus()},this.makeMove=function(e,t){a.gameBoard.isFieldChecked(e,t)||(a.gameBoard.checkField(a.getCurrentPlayer().getMark(),e,t),a.afterMove())},this.afterMove=function(){null!==a.gameBoard.getWinningFields()?(a.gameResultModal.show(a.getCurrentPlayer()),a.getCurrentPlayer().updateScore()):a.gameBoard.isFull()?(a.gameResultModal.show(),a.ties++):(a.increaseTurnCount(),a.updateTurnIndicator(),a.makeMoveCPU())},this.makeMoveCPU=function(){a.getCurrentPlayer()instanceof CPUPlayer&&a.makeMove.apply(a,_toConsumableArray(a.getCurrentPlayer().makeMove(a.gameBoard)))},this.getCurrentPlayerMark=function(){return a.getCurrentPlayer().getMark()},this.getCurrentPlayer=function(){return a.playerQueue[(a.gameCount+a.turnCount)%2]},this.resetCounters=function(){a.ties=0,a.turnCount=0,a.gameCount=0},this.increaseTurnCount=function(){return++a.turnCount},this.updateTurnIndicator=function(){a.turnIndicator.update(a.getCurrentPlayerMark())},this.updateScoreBoard=function(){a.scoreBoard.updateScore(a.xPlayer,a.oPlayer,a.ties)},this.gameMenu=new GameMenu("#game-menu",this.init),this.gameMenu.init(),this.gameContainer=document.querySelector("#tic-tac-toe-game"),this.gameBoard=new GameBoard("#game-board",this.onFieldClick,this.getCurrentPlayerMark),this.scoreBoard=new ScoreBoard("#score-board"),this.turnIndicator=new TurnIndicator,this.restartGameButton=this.gameContainer.querySelector("#restart-game-button"),this.restartGameButton.addEventListener("click",this.onRestartButtonClick),this.gameResultModal=new ResultModal(this.onGameQuit,this.onGameContinue),this.restartGameModal=new RestartModal(this.restartGame,this.setResetButtonFocus)}),Player=_createClass(function e(t,r){var n=this,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck(this,e),this.name=t,this.mark=r,this.score=a,this.toString=function(){return"".concat(n.mark," (").concat(n.name,")")},this.getName=function(){return n.name},this.getMark=function(){return n.mark},this.getScore=function(){return n.score},this.updateScore=function(){return++n.score},this.resetScore=function(){n.score=0}}),CPUPlayer=function(){_inherits(t,Player);var e=_createSuper(t);function t(){var r;return _classCallCheck(this,t),(r=e.apply(this,arguments)).makeMove=function(e){var t=r.getWinningPlay(e);return null!==t||null!==(t=r.getBlockingPlay(e))?t:r.makeRandomMove(e)},r.getWinningPlay=function(e){return r.getPlay(e,r.getMark())},r.getBlockingPlay=function(e){var t="o"===r.getMark()?"x":"o";return r.getPlay(e,t)},r.getPlay=function(e,t){for(var r=e.BOARD_SIZE,n=0;n<r;n++){var a,o=0,i=0,s=void 0,u=_createForOfIteratorHelper(e.getRow(n));try{for(u.s();!(a=u.n()).done;){var l=a.value;l.getMark()===t&&o++,null===l.getMark()&&(i++,s=l)}}catch(e){u.e(e)}finally{u.f()}if(2===o&&1===i)return[s.getRow(),s.getColumn()]}for(var c=0;c<r;c++){var d,h=0,f=0,m=void 0,g=_createForOfIteratorHelper(e.getColumn(c));try{for(g.s();!(d=g.n()).done;){var y=d.value;y.getMark()===t&&h++,null===y.getMark()&&(f++,m=y)}}catch(e){g.e(e)}finally{g.f()}if(2===h&&1===f)return[m.getRow(),m.getColumn()]}var p,b=0,k=0,v=_createForOfIteratorHelper(e.getLeftTopDiagonal());try{for(v.s();!(p=v.n()).done;){var C=p.value;C.getMark()===t&&b++,null===C.getMark()&&(k++,S=C)}}catch(e){v.e(e)}finally{v.f()}if(2===b&&1===k)return[S.getRow(),S.getColumn()];var M,b=0,k=0,S=null,_=_createForOfIteratorHelper(e.getRightTopDiagonal());try{for(_.s();!(M=_.n()).done;){var P=M.value;P.getMark()===t&&b++,null===P.getMark()&&(k++,S=P)}}catch(e){_.e(e)}finally{_.f()}return 2===b&&1===k?[S.getRow(),S.getColumn()]:null},r.makeRandomMove=function(e){for(var t,r,n=e.BOARD_SIZE;t=Math.floor(Math.random()*n),r=Math.floor(Math.random()*n),e.isFieldChecked(t,r););return[t,r]},r}return _createClass(t)}(),GameBoard=_createClass(function e(t,r,n){var a=this;_classCallCheck(this,e),this.onFieldClick=r,this.getCurrentMark=n,this.BOARD_SIZE=3,this.init=function(){a.board=[[],[],[]];for(var e=a.boardElement.querySelectorAll(".game-board__field"),t=0;t<a.board.length;t++)for(var r=0;r<a.BOARD_SIZE;r++)a.board[t].push(new Field(t,r,e[r+t*a.BOARD_SIZE],a.onFieldClick,a.getCurrentMark))},this.clear=function(){for(var e=0;e<a.board.length;e++)for(var t=0;t<a.BOARD_SIZE;t++)a.board[e][t].clear()},this.checkField=function(e,t,r){t<a.board.length&&r<a.board[0].length&&a.board[t][r].check(e)},this.isFieldChecked=function(e,t){return a.board[e][t].isChecked()},this.isFull=function(){return a.board.flat().every(function(e){return e.isChecked()})},this.getWinningFields=function(){return a.checkRows()||a.checkColumns()||a.checkDiagonal()},this.checkRows=function(){for(var e=0;e<a.BOARD_SIZE;e++)if(null!==a.board[e][0].getMark()&&a.board[e][0].getMark()===a.board[e][1].getMark()&&a.board[e][1].getMark()===a.board[e][2].getMark())return[a.board[e][0].setAsGameWinning(),a.board[e][1].setAsGameWinning(),a.board[e][2].setAsGameWinning()];return null},this.checkColumns=function(){for(var e=0;e<a.BOARD_SIZE;e++)if(null!==a.board[0][e].getMark()&&a.board[0][e].getMark()===a.board[1][e].getMark()&&a.board[1][e].getMark()===a.board[2][e].getMark())return[a.board[0][e].setAsGameWinning(),a.board[1][e].setAsGameWinning(),a.board[2][e].setAsGameWinning()];return null},this.checkDiagonal=function(){return null!==a.board[1][1].getMark()&&a.board[0][0].getMark()===a.board[1][1].getMark()&&a.board[1][1].getMark()===a.board[2][2].getMark()?[a.board[0][0].setAsGameWinning(),a.board[1][1].setAsGameWinning(),a.board[2][2].setAsGameWinning()]:null!==a.board[1][1].getMark()&&a.board[0][2].getMark()===a.board[1][1].getMark()&&a.board[1][1].getMark()===a.board[2][0].getMark()?[a.board[0][2].setAsGameWinning(),a.board[1][1].setAsGameWinning(),a.board[2][0].setAsGameWinning()]:null},this.getRow=function(e){return[a.board[e][0],a.board[e][1],a.board[e][2]]},this.getColumn=function(e){return[a.board[0][e],a.board[1][e],a.board[2][e]]},this.getLeftTopDiagonal=function(){return[a.board[0][0],a.board[1][1],a.board[2][2]]},this.getRightTopDiagonal=function(){return[a.board[0][2],a.board[1][1],a.board[2][0]]},this.boardElement=document.querySelector(t)}),Field=_createClass(function e(t,r,n,a,o){var i=this;_classCallCheck(this,e),this.row=t,this.column=r,this.fieldElement=n,this.gameOnClickHandler=a,this.getCurrentMark=o,this.mark=null,this.handleHover=function(){var e=i.getCurrentMark();i.fieldElement.setAttribute("data-current-player",e)},this.handleBlur=function(){i.fieldElement.removeAttribute("data-current-player")},this.clear=function(){i.mark=null,i.fieldElement.setAttribute("aria-label","Row ".concat(i.row+1,", column ").concat(i.column+1,", empty field")),i.fieldElement.removeAttribute("data-game-winning"),i.fieldElement.removeAttribute("data-current-player"),i.fieldElement.removeAttribute("data-mark")},this.check=function(e){i.mark=e,i.fieldElement.setAttribute("aria-label","Row ".concat(i.row+1,", column ").concat(i.column+1,", ").concat(i.mark," mark")),i.fieldElement.setAttribute("data-mark",e)},this.isChecked=function(){return null!==i.mark},this.setAsGameWinning=function(){return i.fieldElement.setAttribute("data-game-winning",""),i},this.getMark=function(){return i.mark},this.getRow=function(){return i.row},this.getColumn=function(){return i.column},this.fieldElement&&(this.fieldElement.addEventListener("click",this.gameOnClickHandler),this.fieldElement.addEventListener("mouseover",this.handleHover),this.fieldElement.addEventListener("focusin",this.handleHover),this.fieldElement.addEventListener("mouseout",this.handleBlur),this.fieldElement.addEventListener("focusout",this.handleBlur),this.fieldElement.dataset.row=this.row.toString(),this.fieldElement.dataset.column=this.column.toString(),this.clear())}),GameMenu=_createClass(function e(t,r){var n=this;_classCallCheck(this,e),this.gameInit=r,this.init=function(){n.formSubmitButtons.forEach(function(e){return e.addEventListener("click",n.handleMenuSubmitButton)})},this.handleMenuSubmitButton=function(e){var t;e.preventDefault(),n.isAnyOptionSelected()?(n.errorMsg.classList.remove("visible"),n.errorMsg.innerText="",e=e.target.dataset.mode,t=n.getCheckedOptionMark(),n.hide(),n.gameInit(e,t)):(n.errorMsg.classList.add("visible"),n.errorMsg.innerText="Please select mark for player 1")},this.isAnyOptionSelected=function(){return Array.from(n.formOptions).some(function(e){return e.checked})},this.getCheckedOptionMark=function(){var e,t=_createForOfIteratorHelper(n.formOptions);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(r.checked)return r.dataset.mark}}catch(e){t.e(e)}finally{t.f()}return""},this.show=function(){n.gameMenu.classList.remove("hidden")},this.hide=function(){n.gameMenu.classList.add("hidden")},this.setFocus=function(){var e;null!=(e=n.formOptions[0])&&e.focus()},this.gameMenu=document.querySelector(t),this.menuForm=this.gameMenu.querySelector("form"),this.formOptions=this.menuForm.querySelectorAll('input[type="radio"]'),this.errorMsg=this.menuForm.querySelector('[role="alert"]'),this.formSubmitButtons=this.menuForm.querySelectorAll('button[type="submit"]')}),TurnIndicator=_createClass(function e(){var t=this;_classCallCheck(this,e),this.update=function(e){t.currentPlayerMarkElement.innerText=e,t.currentPlayerMarkIcon.src="./dist/assets/icon-".concat(e,".svg")},this.currentPlayerMarkElement=document.querySelector("#current-player-mark"),this.currentPlayerMarkIcon=document.querySelector("#current-player-mark-icon")}),ScoreBoard=_createClass(function e(t){var n=this;_classCallCheck(this,e),this.init=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;n.p1Label.innerText=e.toString(),n.p2Label.innerText=t.toString(),n.updateScore(e,t,r)},this.updateScore=function(e,t,r){n.p1Score.innerText=e.getScore().toString(),n.p2Score.innerText=t.getScore().toString(),n.tiesScore.innerText=r.toString()},this.scoreBoardContainer=document.querySelector(t),this.p1Label=this.scoreBoardContainer.querySelector("#p1-game-name"),this.p1Score=this.scoreBoardContainer.querySelector("#p1-game-score"),this.p2Label=this.scoreBoardContainer.querySelector("#p2-game-name"),this.p2Score=this.scoreBoardContainer.querySelector("#p2-game-score"),this.tiesScore=this.scoreBoardContainer.querySelector("#game-ties")}),ResultModal=_createClass(function e(t,r){var a=this;_classCallCheck(this,e),this.gameQuitHandling=t,this.gameContinueHandling=r,this.handleContinue=function(){a.gameContinueHandling(),a.hide()},this.handleQuit=function(){a.hide(),a.gameQuitHandling()},this.show=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;a.modal.classList.add("active"),a.updateResult(e)},this.hide=function(){a.modal.classList.remove("active")},this.updateResult=function(e){null===e?a.displayTieResult():a.displayWinnerResult(e),a.quitButton.focus()},this.displayTieResult=function(){a.modal.setAttribute("data-winner","tie"),a.modalHeading.innerHTML="",a.modalHeading.innerText="Round tied"},this.displayWinnerResult=function(e){a.modal.setAttribute("data-winner",e.getMark());var t=a.getRoundMessage(e.getName());a.modalMessage.innerText=t,a.setResultHeading(e)},this.setResultHeading=function(e){a.modalHeading.innerHTML="";var e=e.getMark(),t=document.createElement("img"),r=(t.setAttribute("src","./dist/assets/icon-".concat(e,".svg")),t.setAttribute("alt",""),document.createElement("span")),e=(r.classList.add("visually-hidden"),r.innerText=e,document.createTextNode("takes the round")),n=document.createElement("span");n.appendChild(r),n.appendChild(e),a.modalHeading.appendChild(t),a.modalHeading.appendChild(n)},this.getRoundMessage=function(e){var t;switch(e){case"p1":t="Player 1 wins!";break;case"p2":t="Player 2 wins!";break;case"you":t="You won!";break;case"cpu":t="Oh no, you lost...";break;default:t=""}return t},this.modal=document.querySelector("#game-result-modal"),this.modalMessage=this.modal.querySelector(".modal__message"),this.modalHeading=this.modal.querySelector(".modal__heading"),this.quitButton=this.modal.querySelector('button[data-action="quit"]'),this.quitButton.addEventListener("click",this.handleQuit),this.continueButton=this.modal.querySelector('button[data-action="continue"]'),this.continueButton.addEventListener("click",this.handleContinue)}),RestartModal=_createClass(function e(t,r){var n=this;_classCallCheck(this,e),this.gameRestartHandling=t,this.cancelSupport=r,this.handleCancel=function(){n.hide(),n.cancelSupport()},this.handleRestart=function(){n.gameRestartHandling(),n.hide()},this.show=function(){n.modal.classList.add("active"),n.cancelButton.focus()},this.hide=function(){n.modal.classList.remove("active")},this.modal=document.querySelector("#game-reset-modal"),this.cancelButton=this.modal.querySelector('button[data-action="cancel"]'),this.cancelButton.addEventListener("click",this.handleCancel),this.restartButton=this.modal.querySelector('button[data-action="restart"]'),this.restartButton.addEventListener("click",this.handleRestart)}),ticTacToeGame=new Game;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4udHMiLCJtYWluLmpzIl0sIm5hbWVzIjpbIkdhbWUiLCJfY3JlYXRlQ2xhc3MiLCJfdGhpcyIsInRoaXMiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aWVzIiwiZ2FtZUNvdW50IiwidHVybkNvdW50Iiwib25GaWVsZENsaWNrIiwiZXYiLCJmaWVsZEJ1dHRvbiIsInRhcmdldCIsInJvdyIsInBhcnNlSW50IiwiZGF0YXNldCIsImNvbHVtbiIsIm1ha2VNb3ZlIiwib25HYW1lQ29udGludWUiLCJnYW1lQm9hcmQiLCJjbGVhciIsInNldFJlc2V0QnV0dG9uRm9jdXMiLCJ1cGRhdGVTY29yZUJvYXJkIiwibWFrZU1vdmVDUFUiLCJvbkdhbWVRdWl0IiwiZ2FtZUNvbnRhaW5lciIsImNsYXNzTGlzdCIsImFkZCIsImdhbWVNZW51Iiwic2hvdyIsInNldEZvY3VzIiwib25SZXN0YXJ0QnV0dG9uQ2xpY2siLCJyZXN0YXJ0R2FtZU1vZGFsIiwicmVzdGFydEdhbWVCdXR0b24iLCJmb2N1cyIsImluaXQiLCJtb2RlIiwicDFNYXJrIiwicDFMYWJlbCIsInAyTWFyayIsInBsYXllcjIiLCJDUFVQbGF5ZXIiLCJQbGF5ZXIiLCJwbGF5ZXIxIiwieFBsYXllciIsIm9QbGF5ZXIiLCJwbGF5ZXJRdWV1ZSIsInJlc2V0Q291bnRlcnMiLCJyZW1vdmUiLCJzdGFydEdhbWUiLCJzY29yZUJvYXJkIiwidXBkYXRlVHVybkluZGljYXRvciIsInJlc3RhcnRHYW1lIiwicmVzZXRTY29yZSIsImlzRmllbGRDaGVja2VkIiwiY2hlY2tGaWVsZCIsImdldEN1cnJlbnRQbGF5ZXIiLCJnZXRNYXJrIiwiYWZ0ZXJNb3ZlIiwiZ2V0V2lubmluZ0ZpZWxkcyIsImdhbWVSZXN1bHRNb2RhbCIsInVwZGF0ZVNjb3JlIiwiaXNGdWxsIiwiaW5jcmVhc2VUdXJuQ291bnQiLCJhcHBseSIsIl90b0NvbnN1bWFibGVBcnJheSIsImdldEN1cnJlbnRQbGF5ZXJNYXJrIiwidHVybkluZGljYXRvciIsInVwZGF0ZSIsIkdhbWVNZW51IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiR2FtZUJvYXJkIiwiU2NvcmVCb2FyZCIsIlR1cm5JbmRpY2F0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiUmVzdWx0TW9kYWwiLCJSZXN0YXJ0TW9kYWwiLCJuYW1lIiwibWFyayIsIl90aGlzMiIsInNjb3JlIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwidG9TdHJpbmciLCJjb25jYXQiLCJnZXROYW1lIiwiZ2V0U2NvcmUiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJfY3JlYXRlU3VwZXIiLCJfdGhpczMiLCJib2FyZCIsIndpbm5pbmdQbGF5IiwiZ2V0V2lubmluZ1BsYXkiLCJibG9ja2luZ1BsYXkiLCJnZXRCbG9ja2luZ1BsYXkiLCJtYWtlUmFuZG9tTW92ZSIsImdldFBsYXkiLCJjb21wYXJlVG9NYXJrIiwiYm9hcmRTaXplIiwiQk9BUkRfU0laRSIsInJvd051bWJlciIsIl9zdGVwIiwic2FtZU1hcmtDb3VudCIsImVtcHR5RmllbGRDb3VudCIsImVtcHR5RmllbGQiLCJfaXRlcmF0b3IiLCJfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciIsImdldFJvdyIsInMiLCJuIiwiZG9uZSIsImZpZWxkIiwidmFsdWUiLCJlcnIiLCJlIiwiZiIsImdldENvbHVtbiIsImNvbE51bWJlciIsIl9zdGVwMiIsIl9pdGVyYXRvcjIiLCJfc3RlcDMiLCJfaXRlcmF0b3IzIiwiZ2V0TGVmdFRvcERpYWdvbmFsIiwiX3N0ZXA0IiwiX2l0ZXJhdG9yNCIsImdldFJpZ2h0VG9wRGlhZ29uYWwiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJnYW1lQm9hcmRJZCIsImdldEN1cnJlbnRNYXJrIiwiX3RoaXM0IiwiYm9hcmRGaWVsZEVsZW1lbnRzIiwiYm9hcmRFbGVtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsInB1c2giLCJGaWVsZCIsImNoZWNrIiwiaXNDaGVja2VkIiwiZmxhdCIsImV2ZXJ5IiwiY2hlY2tSb3dzIiwiY2hlY2tDb2x1bW5zIiwiY2hlY2tEaWFnb25hbCIsInNldEFzR2FtZVdpbm5pbmciLCJjb2x1bW5OdW1iZXIiLCJmaWVsZEVsZW1lbnQiLCJnYW1lT25DbGlja0hhbmRsZXIiLCJfdGhpczUiLCJoYW5kbGVIb3ZlciIsImN1cnJlbnRQbGF5ZXJNYXJrIiwic2V0QXR0cmlidXRlIiwiaGFuZGxlQmx1ciIsInJlbW92ZUF0dHJpYnV0ZSIsImdhbWVNZW51SWQiLCJnYW1lSW5pdCIsIl90aGlzNiIsImZvcm1TdWJtaXRCdXR0b25zIiwiZm9yRWFjaCIsImJ0biIsImhhbmRsZU1lbnVTdWJtaXRCdXR0b24iLCJwcmV2ZW50RGVmYXVsdCIsImlzQW55T3B0aW9uU2VsZWN0ZWQiLCJlcnJvck1zZyIsImlubmVyVGV4dCIsImdhbWVNb2RlIiwiZ2V0Q2hlY2tlZE9wdGlvbk1hcmsiLCJoaWRlIiwiQXJyYXkiLCJmcm9tIiwiZm9ybU9wdGlvbnMiLCJzb21lIiwib3B0aW9uIiwiY2hlY2tlZCIsIl9zdGVwNSIsIl9pdGVyYXRvcjUiLCJfYSIsIm1lbnVGb3JtIiwiX3RoaXM3IiwiY3VycmVudFBsYXllck1hcmtFbGVtZW50IiwiY3VycmVudFBsYXllck1hcmtJY29uIiwic3JjIiwic2NvcmVCb2FyZElkIiwiX3RoaXM4IiwicDEiLCJwMiIsInAyTGFiZWwiLCJwMVNjb3JlIiwicDJTY29yZSIsInRpZXNTY29yZSIsInNjb3JlQm9hcmRDb250YWluZXIiLCJnYW1lUXVpdEhhbmRsaW5nIiwiZ2FtZUNvbnRpbnVlSGFuZGxpbmciLCJfdGhpczkiLCJoYW5kbGVDb250aW51ZSIsImhhbmRsZVF1aXQiLCJ3aW5uZXIiLCJtb2RhbCIsInVwZGF0ZVJlc3VsdCIsImRpc3BsYXlUaWVSZXN1bHQiLCJkaXNwbGF5V2lubmVyUmVzdWx0IiwicXVpdEJ1dHRvbiIsIm1vZGFsSGVhZGluZyIsImlubmVySFRNTCIsIm1lc3NhZ2UiLCJnZXRSb3VuZE1lc3NhZ2UiLCJtb2RhbE1lc3NhZ2UiLCJzZXRSZXN1bHRIZWFkaW5nIiwiaW1nRWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJoaWRkZW5NYXJrIiwibWVzc2FnZVRleHQiLCJjcmVhdGVUZXh0Tm9kZSIsImhlYWRpbmdTcGFuIiwiYXBwZW5kQ2hpbGQiLCJwbGF5ZXJOYW1lIiwiY29udGludWVCdXR0b24iLCJnYW1lUmVzdGFydEhhbmRsaW5nIiwiY2FuY2VsU3VwcG9ydCIsIl90aGlzMTAiLCJoYW5kbGVDYW5jZWwiLCJoYW5kbGVSZXN0YXJ0IiwiY2FuY2VsQnV0dG9uIiwicmVzdGFydEJ1dHRvbiIsInRpY1RhY1RvZUdhbWUiXSwibWFwcGluZ3MiOiJneUhBS0EsSUFDTUEsS0FBSUMsYUFvQlQsU0FBQUQsSUFBQSxJQUFBRSxFQUFBQyxLQUFBQyxnQkFBQUQsS0FBQUgsQ0FBQSxFQUpRRyxLQUFBRSxLQUFlLEVBQ2ZGLEtBQUFHLFVBQW9CLEVBQ3BCSCxLQUFBSSxVQUFvQixFQTJCNUJKLEtBQUFLLGFBQWUsU0FBQ0MsR0FFZixJQUFNQyxFQUFjRCxFQUFHRSxPQUNqQkMsRUFBY0MsU0FBU0gsRUFBWUksUUFBUUYsR0FBRyxFQUM5Q0csRUFBaUJGLFNBQVNILEVBQVlJLFFBQVFDLE1BQU0sRUFDMURiLEVBQUtjLFNBQVNKLEVBQUtHLENBQU0sQ0FDMUIsRUFFQVosS0FBQWMsZUFBaUIsV0FDaEJmLEVBQUtJLFNBQVMsR0FDZEosRUFBS0ssVUFBWSxFQUNqQkwsRUFBS2dCLFVBQVVDLE1BQUssRUFDcEJqQixFQUFLa0Isb0JBQW1CLEVBQ3hCbEIsRUFBS21CLGlCQUFnQixFQUNyQm5CLEVBQUtvQixZQUFXLENBQ2pCLEVBRUFuQixLQUFBb0IsV0FBYSxXQUNackIsRUFBS3NCLGNBQWNDLFVBQVVDLElBQUksUUFBUSxFQUN6Q3hCLEVBQUtnQixVQUFVQyxNQUFLLEVBQ3BCakIsRUFBS3lCLFNBQVNDLEtBQUksRUFDbEIxQixFQUFLeUIsU0FBU0UsU0FBUSxDQUN2QixFQUVBMUIsS0FBQTJCLHFCQUF1QixXQUN0QjVCLEVBQUs2QixpQkFBaUJILEtBQUksQ0FDM0Is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RGxNLEtBQUt1TixlQUFpQnZOLEtBQUtvTSxNQUFNakksY0FBYyxnQ0FBZ0MsRUFDL0VuRSxLQUFLdU4sZUFBZWhKLGlCQUFpQixRQUFTdkUsS0FBS2lNLGNBQWMsQ0FDbEUsQ0FBQyxFQWtHSXhILGFBQVkzRSxhQUtqQixTQUFBMkUsRUFBb0IrSSxFQUF5Q0MsR0FBeUIsSUFBQUMsRUFBQTFOLEtBQUFDLGdCQUFBRCxLQUFBeUUsQ0FBQSxFQUFsRXpFLEtBQUF3TixvQkFBQUEsRUFBeUN4TixLQUFBeU4sY0FBQUEsRUFhN0R6TixLQUFBMk4sYUFBZSxXQUNkRCxFQUFLcEQsS0FBSSxFQUNUb0QsRUFBS0QsY0FBYSxDQUNuQixFQUVBek4sS0FBQTROLGNBQWdCLFdBQ2ZGLEVBQUtGLG9CQUFtQixFQUN4QkUsRUFBS3BELEtBQUksQ0FDVixFQUlBdEssS0FBQXlCLEtBQU8sV0FDTmlNLEVBQUt0QixNQUFNOUssVUFBVUMsSUFBSSxRQUFRLEVBQ2pDbU0sRUFBS0csYUFBYS9MLE1BQUssQ0FDeEIsRUFFQTlCLEtBQUFzSyxLQUFPLFdBQ05vRCxFQUFLdEIsTUFBTTlLLFVBQVVzQixPQUFPLFFBQVEsQ0FDckMsRUEvQkM1QyxLQUFLb00sTUFBUWxJLFNBQVNDLGNBQWMsbUJBQW1CLEVBR3ZEbkUsS0FBSzZOLGFBQWU3TixLQUFLb00sTUFBTWpJLGNBQWMsOEJBQThCLEVBQzNFbkUsS0FBSzZOLGFBQWF0SixpQkFBaUIsUUFBU3ZFLEtBQUsyTixZQUFZLEVBRzdEM04sS0FBSzhOLGNBQWdCOU4sS0FBS29NLE1BQU1qSSxjQUFjLCtCQUErQixFQUM3RW5FLEtBQUs4TixjQUFjdkosaUJBQWlCLFFBQVN2RSxLQUFLNE4sYUFBYSxDQUNoRSxDQUFDLEVBNkJJRyxjQUFzQixJQUFJbE8iLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiB0eXBlcyAqL1xyXG50eXBlIFRyaXBsZUZpZWxkID0gW0ZpZWxkLCBGaWVsZCwgRmllbGRdO1xyXG4vKiB0eXBlcyBlbmQgKi9cclxuXHJcbi8qIGNsYXNzZXMgKi9cclxuLyogR2FtZSBjbGFzcyBzdGFydCAqL1xyXG5jbGFzcyBHYW1lIHtcclxuXHQvKiBnYW1lIGVsZW1lbnRzICovXHJcblx0cHJpdmF0ZSBnYW1lTWVudTogR2FtZU1lbnU7XHJcblx0cHJpdmF0ZSBnYW1lQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIGdhbWVCb2FyZDogR2FtZUJvYXJkO1xyXG5cdHByaXZhdGUgc2NvcmVCb2FyZDogU2NvcmVCb2FyZDtcclxuXHRwcml2YXRlIHR1cm5JbmRpY2F0b3I6IFR1cm5JbmRpY2F0b3I7XHJcblx0cHJpdmF0ZSByZXN0YXJ0R2FtZUJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblx0LyogZ2FtZSBtb2RhbHMgKi9cclxuXHRwcml2YXRlIGdhbWVSZXN1bHRNb2RhbDogUmVzdWx0TW9kYWw7XHJcblx0cHJpdmF0ZSByZXN0YXJ0R2FtZU1vZGFsOiBSZXN0YXJ0TW9kYWw7XHJcblx0LyogcGxheWVycyAqL1xyXG5cdHByaXZhdGUgeFBsYXllcjogUGxheWVyO1xyXG5cdHByaXZhdGUgb1BsYXllcjogUGxheWVyO1xyXG5cdHByaXZhdGUgcGxheWVyUXVldWU6IFtQbGF5ZXIsIFBsYXllcl07XHJcblx0LyogZ2FtZSBzdGF0ZXMgKi9cclxuXHRwcml2YXRlIHRpZXM6IG51bWJlciA9IDA7XHJcblx0cHJpdmF0ZSBnYW1lQ291bnQ6IG51bWJlciA9IDA7XHJcblx0cHJpdmF0ZSB0dXJuQ291bnQ6IG51bWJlciA9IDA7XHJcblxyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0LyogZ2FtZSBtZW51ICovXHJcblx0XHR0aGlzLmdhbWVNZW51ID0gbmV3IEdhbWVNZW51KCcjZ2FtZS1tZW51JywgdGhpcy5pbml0KTtcclxuXHRcdHRoaXMuZ2FtZU1lbnUuaW5pdCgpO1xyXG5cclxuXHRcdC8qIGNvbnRhaW5lciAqL1xyXG5cdFx0dGhpcy5nYW1lQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RpYy10YWMtdG9lLWdhbWUnKTtcclxuXHJcblx0XHQvKiBnYW1lIGJvYXJkICovXHJcblx0XHR0aGlzLmdhbWVCb2FyZCA9IG5ldyBHYW1lQm9hcmQoJyNnYW1lLWJvYXJkJywgdGhpcy5vbkZpZWxkQ2xpY2ssIHRoaXMuZ2V0Q3VycmVudFBsYXllck1hcmspO1xyXG5cclxuXHRcdC8qIHNjb3JlIGJvYXJkIGFuZCBjdXJyZW50J3MgcGxheWVyIHR1cm4gKi9cclxuXHRcdHRoaXMuc2NvcmVCb2FyZCA9IG5ldyBTY29yZUJvYXJkKCcjc2NvcmUtYm9hcmQnKTtcclxuXHRcdHRoaXMudHVybkluZGljYXRvciA9IG5ldyBUdXJuSW5kaWNhdG9yKCk7XHJcblxyXG5cdFx0LyogcmVzdGFydCBidXR0b24gKi9cclxuXHRcdHRoaXMucmVzdGFydEdhbWVCdXR0b24gPSB0aGlzLmdhbWVDb250YWluZXIucXVlcnlTZWxlY3RvcignI3Jlc3RhcnQtZ2FtZS1idXR0b24nKTtcclxuXHRcdHRoaXMucmVzdGFydEdhbWVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uUmVzdGFydEJ1dHRvbkNsaWNrKTtcclxuXHJcblx0XHQvKiBtb2RhbHMgKi9cclxuXHRcdHRoaXMuZ2FtZVJlc3VsdE1vZGFsID0gbmV3IFJlc3VsdE1vZGFsKHRoaXMub25HYW1lUXVpdCwgdGhpcy5vbkdhbWVDb250aW51ZSk7XHJcblx0XHR0aGlzLnJlc3RhcnRHYW1lTW9kYWwgPSBuZXcgUmVzdGFydE1vZGFsKHRoaXMucmVzdGFydEdhbWUsIHRoaXMuc2V0UmVzZXRCdXR0b25Gb2N1cyk7XHJcblx0fVxyXG5cclxuXHQvKiBoYW5kbGVycyAqL1xyXG5cdG9uRmllbGRDbGljayA9IChldjogRXZlbnQpOiB2b2lkID0+IHtcclxuXHRcdC8qIHJldHJpZXZlIHJvdyBhbmQgY29sdW1uIGZyb20gY2xpY2tlZCBidXR0b24gYW5kIG1ha2UgbW92ZSAqL1xyXG5cdFx0Y29uc3QgZmllbGRCdXR0b24gPSBldi50YXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblx0XHRjb25zdCByb3c6IG51bWJlciA9IHBhcnNlSW50KGZpZWxkQnV0dG9uLmRhdGFzZXQucm93KTtcclxuXHRcdGNvbnN0IGNvbHVtbjogbnVtYmVyID0gcGFyc2VJbnQoZmllbGRCdXR0b24uZGF0YXNldC5jb2x1bW4pO1xyXG5cdFx0dGhpcy5tYWtlTW92ZShyb3csIGNvbHVtbik7XHJcblx0fTtcclxuXHJcblx0b25HYW1lQ29udGludWUgPSAoKSA9PiB7XHJcblx0XHR0aGlzLmdhbWVDb3VudCsrO1xyXG5cdFx0dGhpcy50dXJuQ291bnQgPSAwO1xyXG5cdFx0dGhpcy5nYW1lQm9hcmQuY2xlYXIoKTtcclxuXHRcdHRoaXMuc2V0UmVzZXRCdXR0b25Gb2N1cygpO1xyXG5cdFx0dGhpcy51cGRhdGVTY29yZUJvYXJkKCk7XHJcblx0XHR0aGlzLm1ha2VNb3ZlQ1BVKCk7XHJcblx0fTtcclxuXHJcblx0b25HYW1lUXVpdCA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuZ2FtZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuXHRcdHRoaXMuZ2FtZUJvYXJkLmNsZWFyKCk7XHJcblx0XHR0aGlzLmdhbWVNZW51LnNob3coKTtcclxuXHRcdHRoaXMuZ2FtZU1lbnUuc2V0Rm9jdXMoKTtcclxuXHR9O1xyXG5cclxuXHRvblJlc3RhcnRCdXR0b25DbGljayA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMucmVzdGFydEdhbWVNb2RhbC5zaG93KCk7XHJcblx0fTtcclxuXHJcblx0c2V0UmVzZXRCdXR0b25Gb2N1cyA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMucmVzdGFydEdhbWVCdXR0b24uZm9jdXMoKTtcclxuXHR9O1xyXG5cdC8qIGhhbmRsZXJzIGVuZCAqL1xyXG5cclxuXHQvKiBnYW1lIG1hbmFnZW1lbnQgKi9cclxuXHRpbml0ID0gKG1vZGU6IHN0cmluZywgcDFNYXJrOiBzdHJpbmcpOiB2b2lkID0+IHtcclxuXHRcdGNvbnN0IHAyTWFyazogc3RyaW5nID0gcDFNYXJrID09PSAneCcgPyAnbycgOiAneCc7XHJcblx0XHRsZXQgcDFMYWJlbDogc3RyaW5nLCBwbGF5ZXIxOiBQbGF5ZXI7XHJcblx0XHRsZXQgcDJMYWJlbDogc3RyaW5nLCBwbGF5ZXIyOiBQbGF5ZXI7XHJcblxyXG5cdFx0LyogY3JlYXRlcyBsYWJlbHMgYW5kIHBsYXllcnMgZGVwZW5kaW5nIG9uIGdhbWUgbW9kZSAqL1xyXG5cdFx0aWYgKG1vZGUgPT09ICdzaW5nbGVwbGF5ZXInKSB7XHJcblx0XHRcdHAxTGFiZWwgPSAneW91JztcclxuXHRcdFx0cDJMYWJlbCA9ICdjcHUnO1xyXG5cdFx0XHRwbGF5ZXIyID0gbmV3IENQVVBsYXllcihwMkxhYmVsLCBwMk1hcmspO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cDFMYWJlbCA9ICdwMSc7XHJcblx0XHRcdHAyTGFiZWwgPSAncDInO1xyXG5cdFx0XHRwbGF5ZXIyID0gbmV3IFBsYXllcihwMkxhYmVsLCBwMk1hcmspO1xyXG5cdFx0fVxyXG5cdFx0cGxheWVyMSA9IG5ldyBQbGF5ZXIocDFMYWJlbCwgcDFNYXJrKTtcclxuXHJcblx0XHQvKiBhc3NpZ25zIGNyZWF0ZWQgcGxheWVycyB0byByaWdodCBzcG90cyAqL1xyXG5cdFx0aWYgKHAxTWFyayA9PT0gJ3gnKSB7XHJcblx0XHRcdHRoaXMueFBsYXllciA9IHBsYXllcjE7XHJcblx0XHRcdHRoaXMub1BsYXllciA9IHBsYXllcjI7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLnhQbGF5ZXIgPSBwbGF5ZXIyO1xyXG5cdFx0XHR0aGlzLm9QbGF5ZXIgPSBwbGF5ZXIxO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qIGNyZWF0ZXMgdHVwbGUgb2YgcGxheWVycywgdG8gY2hvb3NlIGN1cnJlbnQgcGxheWVyIGRlcGVuZGluZyBvbiB0dXJuIGNvdW50ZXIgKi9cclxuXHRcdHRoaXMucGxheWVyUXVldWUgPSBbdGhpcy54UGxheWVyLCB0aGlzLm9QbGF5ZXJdO1xyXG5cdFx0dGhpcy5yZXNldENvdW50ZXJzKCk7XHJcblxyXG5cdFx0Lyogc2hvd3MgZ2FtZSBjb250YWluZXIgKi9cclxuXHRcdHRoaXMuZ2FtZUNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuXHJcblx0XHR0aGlzLnN0YXJ0R2FtZSgpO1xyXG5cdH07XHJcblxyXG5cdHN0YXJ0R2FtZSA9ICgpOiB2b2lkID0+IHtcclxuXHRcdC8qIGluaXRpYWxpemUgc2NvcmUgYm9hcmQgd2l0aCBjcmVhdGVkIHBsYXllcnMgKi9cclxuXHRcdHRoaXMuc2NvcmVCb2FyZC5pbml0KHRoaXMueFBsYXllciwgdGhpcy5vUGxheWVyLCB0aGlzLnRpZXMpO1xyXG5cclxuXHRcdC8qIGluaXRpYWxpemUgZ2FtZSBib2FyZCAqL1xyXG5cdFx0dGhpcy5nYW1lQm9hcmQuaW5pdCgpO1xyXG5cclxuXHRcdHRoaXMudXBkYXRlVHVybkluZGljYXRvcigpO1xyXG5cclxuXHRcdC8qIGlmIHN0YXJ0aW5nIHBsYXllciBpcyBDUFUgdGhlbiBtYWtlIGF1dG8gbW92ZSAqL1xyXG5cdFx0dGhpcy5tYWtlTW92ZUNQVSgpO1xyXG5cdH07XHJcblxyXG5cdHJlc3RhcnRHYW1lID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0LyogcmVzZXQgY291bnRlcnMgKi9cclxuXHRcdHRoaXMucmVzZXRDb3VudGVycygpO1xyXG5cclxuXHRcdC8qIHJlc2V0IGJvYXJkICovXHJcblx0XHR0aGlzLmdhbWVCb2FyZC5jbGVhcigpO1xyXG5cclxuXHRcdC8qIHJlc2V0IHBsYXllcnMgKi9cclxuXHRcdHRoaXMueFBsYXllci5yZXNldFNjb3JlKCk7XHJcblx0XHR0aGlzLm9QbGF5ZXIucmVzZXRTY29yZSgpO1xyXG5cclxuXHRcdC8qIHVwZGF0ZSBzY29yZSBib2FyZCAqL1xyXG5cdFx0dGhpcy51cGRhdGVTY29yZUJvYXJkKCk7XHJcblx0XHR0aGlzLnVwZGF0ZVR1cm5JbmRpY2F0b3IoKTtcclxuXHJcblx0XHQvKiB0byBtYWtlIG1vdmUgaWYgZmlyc3QgcGxheWVyIGlzIENQVSAqL1xyXG5cdFx0dGhpcy5tYWtlTW92ZUNQVSgpO1xyXG5cclxuXHRcdC8qIHNldCBmb2N1cyB0byByZXN0YXJ0IGJ1dHRvbiAqL1xyXG5cdFx0dGhpcy5zZXRSZXNldEJ1dHRvbkZvY3VzKCk7XHJcblx0fTtcclxuXHQvKiBnYW1lIG1hbmFnZW1lbnQgZW5kICovXHJcblxyXG5cdC8qIG1ha2luZyBtb3ZlIHJlbGF0ZWQgKi9cclxuXHRtYWtlTW92ZSA9IChyb3c6IG51bWJlciwgY29sdW1uOiBudW1iZXIpOiB2b2lkID0+IHtcclxuXHRcdC8qIG9uIGZpZWxkIGNsaWNrLCBpZiBmaWVsZCBpcyBjaGVja2VkIHRoZW4gcmV0dXJuIGRvaW5nIG5vdGhpbmcgKi9cclxuXHRcdGlmICh0aGlzLmdhbWVCb2FyZC5pc0ZpZWxkQ2hlY2tlZChyb3csIGNvbHVtbikpIHJldHVybjtcclxuXHJcblx0XHQvKiBjaGVja3Mgc2VsZWN0ZWQgZmllbGQgKi9cclxuXHRcdHRoaXMuZ2FtZUJvYXJkLmNoZWNrRmllbGQodGhpcy5nZXRDdXJyZW50UGxheWVyKCkuZ2V0TWFyaygpLCByb3csIGNvbHVtbik7XHJcblx0XHR0aGlzLmFmdGVyTW92ZSgpO1xyXG5cdH07XHJcblxyXG5cdGFmdGVyTW92ZSA9ICgpOiB2b2lkID0+IHtcclxuXHRcdGNvbnN0IHdpbm5pbmdGaWVsZHMgPSB0aGlzLmdhbWVCb2FyZC5nZXRXaW5uaW5nRmllbGRzKCk7XHJcblx0XHRpZiAod2lubmluZ0ZpZWxkcyAhPT0gbnVsbCkge1xyXG5cdFx0XHR0aGlzLmdhbWVSZXN1bHRNb2RhbC5zaG93KHRoaXMuZ2V0Q3VycmVudFBsYXllcigpKTtcclxuXHRcdFx0dGhpcy5nZXRDdXJyZW50UGxheWVyKCkudXBkYXRlU2NvcmUoKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLmdhbWVCb2FyZC5pc0Z1bGwoKSkge1xyXG5cdFx0XHR0aGlzLmdhbWVSZXN1bHRNb2RhbC5zaG93KCk7XHJcblx0XHRcdHRoaXMudGllcysrO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5pbmNyZWFzZVR1cm5Db3VudCgpO1xyXG5cdFx0dGhpcy51cGRhdGVUdXJuSW5kaWNhdG9yKCk7XHJcblxyXG5cdFx0dGhpcy5tYWtlTW92ZUNQVSgpO1xyXG5cdH07XHJcblxyXG5cdG1ha2VNb3ZlQ1BVID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0LyogYWZ0ZXIgZmllbGQgaXMgY2hlY2tlZCwgY2hlY2tzIGlmIGN1cnJlbnQgcGxheWVyIGlzIENQVSBhbmQgaWYgaXMsIHRoZW4gbWFrZXMgYSBtb3ZlICovXHJcblx0XHRpZiAodGhpcy5nZXRDdXJyZW50UGxheWVyKCkgaW5zdGFuY2VvZiBDUFVQbGF5ZXIpIHtcclxuXHRcdFx0dGhpcy5tYWtlTW92ZSguLi4odGhpcy5nZXRDdXJyZW50UGxheWVyKCkgYXMgQ1BVUGxheWVyKS5tYWtlTW92ZSh0aGlzLmdhbWVCb2FyZCkpO1xyXG5cdFx0fVxyXG5cdH07XHJcblx0LyogbWFraW5nIG1vdmUgcmVsYXRlZCBlbmQgKi9cclxuXHJcblx0LyogcGxheWVyIHN0YXRlcyAqL1xyXG5cdGdldEN1cnJlbnRQbGF5ZXJNYXJrID0gKCk6IHN0cmluZyA9PiB7XHJcblx0XHRyZXR1cm4gdGhpcy5nZXRDdXJyZW50UGxheWVyKCkuZ2V0TWFyaygpO1xyXG5cdH07XHJcblxyXG5cdGdldEN1cnJlbnRQbGF5ZXIgPSAoKTogUGxheWVyID0+IHtcclxuXHRcdHJldHVybiB0aGlzLnBsYXllclF1ZXVlWyh0aGlzLmdhbWVDb3VudCArIHRoaXMudHVybkNvdW50KSAlIDJdO1xyXG5cdH07XHJcblx0LyogcGxheWVyIHN0YXRlcyBlbmQgKi9cclxuXHJcblx0LyogY291bnRlcnMgbWFuYWdlbWVudCAqL1xyXG5cdHJlc2V0Q291bnRlcnMgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnRpZXMgPSAwO1xyXG5cdFx0dGhpcy50dXJuQ291bnQgPSAwO1xyXG5cdFx0dGhpcy5nYW1lQ291bnQgPSAwO1xyXG5cdH07XHJcblxyXG5cdGluY3JlYXNlVHVybkNvdW50ID0gKCk6IG51bWJlciA9PiB7XHJcblx0XHRyZXR1cm4gKyt0aGlzLnR1cm5Db3VudDtcclxuXHR9O1xyXG5cdC8qIGNvdW50ZXJzIG1hbmFnZW1lbnQgZW5kICovXHJcblxyXG5cdC8qIHZpZXcgdXBkYXRlcyAqL1xyXG5cdHVwZGF0ZVR1cm5JbmRpY2F0b3IgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnR1cm5JbmRpY2F0b3IudXBkYXRlKHRoaXMuZ2V0Q3VycmVudFBsYXllck1hcmsoKSk7XHJcblx0fTtcclxuXHJcblx0dXBkYXRlU2NvcmVCb2FyZCA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuc2NvcmVCb2FyZC51cGRhdGVTY29yZSh0aGlzLnhQbGF5ZXIsIHRoaXMub1BsYXllciwgdGhpcy50aWVzKTtcclxuXHR9O1xyXG5cdC8qIHZpZXcgdXBkYXRlcyBlbmQgKi9cclxufVxyXG4vKiBHYW1lIGNsYXNzIGVuZCAqL1xyXG5cclxuLyogUGxheWVyIGNsYXNzIHN0YXJ0ICovXHJcbmNsYXNzIFBsYXllciB7XHJcblx0Y29uc3RydWN0b3IocHJpdmF0ZSBuYW1lOiBzdHJpbmcsIHByaXZhdGUgbWFyazogc3RyaW5nLCBwcml2YXRlIHNjb3JlOiBudW1iZXIgPSAwKSB7fVxyXG5cclxuXHR0b1N0cmluZyA9ICgpOiBzdHJpbmcgPT4gYCR7dGhpcy5tYXJrfSAoJHt0aGlzLm5hbWV9KWA7XHJcblxyXG5cdGdldE5hbWUgPSAoKTogc3RyaW5nID0+IHRoaXMubmFtZTtcclxuXHJcblx0Z2V0TWFyayA9ICgpOiBzdHJpbmcgPT4gdGhpcy5tYXJrO1xyXG5cclxuXHRnZXRTY29yZSA9ICgpOiBudW1iZXIgPT4gdGhpcy5zY29yZTtcclxuXHJcblx0dXBkYXRlU2NvcmUgPSAoKTogbnVtYmVyID0+ICsrdGhpcy5zY29yZTtcclxuXHJcblx0cmVzZXRTY29yZSA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuc2NvcmUgPSAwO1xyXG5cdH07XHJcbn1cclxuXHJcbmNsYXNzIENQVVBsYXllciBleHRlbmRzIFBsYXllciB7XHJcblx0bWFrZU1vdmUgPSAoYm9hcmQ6IEdhbWVCb2FyZCk6IFtudW1iZXIsIG51bWJlcl0gPT4ge1xyXG5cdFx0Y29uc3Qgd2lubmluZ1BsYXk6IFtudW1iZXIsIG51bWJlcl0gPSB0aGlzLmdldFdpbm5pbmdQbGF5KGJvYXJkKTtcclxuXHRcdGlmICh3aW5uaW5nUGxheSAhPT0gbnVsbCkgcmV0dXJuIHdpbm5pbmdQbGF5O1xyXG5cclxuXHRcdGNvbnN0IGJsb2NraW5nUGxheTogW251bWJlciwgbnVtYmVyXSA9IHRoaXMuZ2V0QmxvY2tpbmdQbGF5KGJvYXJkKTtcclxuXHRcdGlmIChibG9ja2luZ1BsYXkgIT09IG51bGwpIHJldHVybiBibG9ja2luZ1BsYXk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMubWFrZVJhbmRvbU1vdmUoYm9hcmQpO1xyXG5cdH07XHJcblxyXG5cdGdldFdpbm5pbmdQbGF5ID0gKGJvYXJkOiBHYW1lQm9hcmQpOiBbbnVtYmVyLCBudW1iZXJdIHwgbnVsbCA9PiB7XHJcblx0XHRyZXR1cm4gdGhpcy5nZXRQbGF5KGJvYXJkLCB0aGlzLmdldE1hcmsoKSk7XHJcblx0fTtcclxuXHJcblx0Z2V0QmxvY2tpbmdQbGF5ID0gKGJvYXJkOiBHYW1lQm9hcmQpOiBbbnVtYmVyLCBudW1iZXJdIHwgbnVsbCA9PiB7XHJcblx0XHRjb25zdCBjb21wYXJlVG9NYXJrID0gdGhpcy5nZXRNYXJrKCkgPT09ICdvJyA/ICd4JyA6ICdvJztcclxuXHRcdHJldHVybiB0aGlzLmdldFBsYXkoYm9hcmQsIGNvbXBhcmVUb01hcmspO1xyXG5cdH07XHJcblxyXG5cdGdldFBsYXkgPSAoYm9hcmQ6IEdhbWVCb2FyZCwgY29tcGFyZVRvTWFyazogc3RyaW5nKTogW251bWJlciwgbnVtYmVyXSB8IG51bGwgPT4ge1xyXG5cdFx0Y29uc3QgYm9hcmRTaXplOiBudW1iZXIgPSBib2FyZC5CT0FSRF9TSVpFO1xyXG5cdFx0LyogY2hlY2sgcm93cyBhbmQgY29sdW1ucyAqL1xyXG5cdFx0Zm9yIChsZXQgcm93TnVtYmVyID0gMDsgcm93TnVtYmVyIDwgYm9hcmRTaXplOyByb3dOdW1iZXIrKykge1xyXG5cdFx0XHRjb25zdCBmaWVsZHNSb3c6IFRyaXBsZUZpZWxkID0gYm9hcmQuZ2V0Um93KHJvd051bWJlcik7XHJcblx0XHRcdGxldCBzYW1lTWFya0NvdW50OiBudW1iZXIgPSAwO1xyXG5cdFx0XHRsZXQgZW1wdHlGaWVsZENvdW50OiBudW1iZXIgPSAwO1xyXG5cdFx0XHRsZXQgZW1wdHlGaWVsZDogRmllbGQ7XHJcblx0XHRcdGZvciAoY29uc3QgZmllbGQgb2YgZmllbGRzUm93KSB7XHJcblx0XHRcdFx0aWYgKGZpZWxkLmdldE1hcmsoKSA9PT0gY29tcGFyZVRvTWFyaykgc2FtZU1hcmtDb3VudCsrO1xyXG5cdFx0XHRcdGlmIChmaWVsZC5nZXRNYXJrKCkgPT09IG51bGwpIHtcclxuXHRcdFx0XHRcdGVtcHR5RmllbGRDb3VudCsrO1xyXG5cdFx0XHRcdFx0ZW1wdHlGaWVsZCA9IGZpZWxkO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0LyogIGlmIHRoZXJlIGFyZSB0d28gbWFyayBpbiBjaGVja2VkIGxpbmUgYW5kIGVtcHR5IGZpZWxkLFxyXG4gICAgICAgICAgICAgICAgdGhlbiByZXR1cm4gY29vcmRpbmF0ZXMgb2YgZW1wdHkgZmllbGQgKi9cclxuXHRcdFx0aWYgKHNhbWVNYXJrQ291bnQgPT09IDIgJiYgZW1wdHlGaWVsZENvdW50ID09PSAxKSB7XHJcblx0XHRcdFx0cmV0dXJuIFtlbXB0eUZpZWxkLmdldFJvdygpLCBlbXB0eUZpZWxkLmdldENvbHVtbigpXTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8qIGNoZWNrIGNvbHVtbnMgKi9cclxuXHRcdGZvciAobGV0IGNvbE51bWJlciA9IDA7IGNvbE51bWJlciA8IGJvYXJkU2l6ZTsgY29sTnVtYmVyKyspIHtcclxuXHRcdFx0Y29uc3QgZmllbGRzQ29sdW1uOiBUcmlwbGVGaWVsZCA9IGJvYXJkLmdldENvbHVtbihjb2xOdW1iZXIpO1xyXG5cdFx0XHRsZXQgc2FtZU1hcmtDb3VudDogbnVtYmVyID0gMDtcclxuXHRcdFx0bGV0IGVtcHR5RmllbGRDb3VudDogbnVtYmVyID0gMDtcclxuXHRcdFx0bGV0IGVtcHR5RmllbGQ6IEZpZWxkO1xyXG5cdFx0XHRmb3IgKGNvbnN0IGZpZWxkIG9mIGZpZWxkc0NvbHVtbikge1xyXG5cdFx0XHRcdGlmIChmaWVsZC5nZXRNYXJrKCkgPT09IGNvbXBhcmVUb01hcmspIHNhbWVNYXJrQ291bnQrKztcclxuXHRcdFx0XHRpZiAoZmllbGQuZ2V0TWFyaygpID09PSBudWxsKSB7XHJcblx0XHRcdFx0XHRlbXB0eUZpZWxkQ291bnQrKztcclxuXHRcdFx0XHRcdGVtcHR5RmllbGQgPSBmaWVsZDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8qICBpZiB0aGVyZSBhcmUgdHdvIG1hcmsgaW4gY2hlY2tlZCBsaW5lIGFuZCBlbXB0eSBmaWVsZCxcclxuICAgICAgICAgICAgICAgIHRoZW4gcmV0dXJuIGNvb3JkaW5hdGVzIG9mIGVtcHR5IGZpZWxkICovXHJcblx0XHRcdGlmIChzYW1lTWFya0NvdW50ID09PSAyICYmIGVtcHR5RmllbGRDb3VudCA9PT0gMSkge1xyXG5cdFx0XHRcdHJldHVybiBbZW1wdHlGaWVsZC5nZXRSb3coKSwgZW1wdHlGaWVsZC5nZXRDb2x1bW4oKV07XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvKiBjaGVjayBkaWFnb25hbHMgKi9cclxuXHRcdC8vIGxlZnQgdG9wIHRvIGJvdHRvbSByaWdodFxyXG5cdFx0Y29uc3QgbGVmdFRvcERpYWdvbmFsOiBUcmlwbGVGaWVsZCA9IGJvYXJkLmdldExlZnRUb3BEaWFnb25hbCgpO1xyXG5cdFx0bGV0IHNhbWVNYXJrQ291bnQ6IG51bWJlciA9IDA7XHJcblx0XHRsZXQgZW1wdHlGaWVsZENvdW50OiBudW1iZXIgPSAwO1xyXG5cdFx0bGV0IGVtcHR5RmllbGQ6IEZpZWxkO1xyXG5cdFx0Zm9yIChjb25zdCBmaWVsZCBvZiBsZWZ0VG9wRGlhZ29uYWwpIHtcclxuXHRcdFx0aWYgKGZpZWxkLmdldE1hcmsoKSA9PT0gY29tcGFyZVRvTWFyaykgc2FtZU1hcmtDb3VudCsrO1xyXG5cdFx0XHRpZiAoZmllbGQuZ2V0TWFyaygpID09PSBudWxsKSB7XHJcblx0XHRcdFx0ZW1wdHlGaWVsZENvdW50Kys7XHJcblx0XHRcdFx0ZW1wdHlGaWVsZCA9IGZpZWxkO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0LyogIGlmIHRoZXJlIGFyZSB0d28gbWFyayBpbiBjaGVja2VkIGxpbmUgYW5kIGVtcHR5IGZpZWxkLFxyXG4gICAgICAgICAgICB0aGVuIHJldHVybiBjb29yZGluYXRlcyBvZiBlbXB0eSBmaWVsZCAqL1xyXG5cdFx0aWYgKHNhbWVNYXJrQ291bnQgPT09IDIgJiYgZW1wdHlGaWVsZENvdW50ID09PSAxKSB7XHJcblx0XHRcdHJldHVybiBbZW1wdHlGaWVsZC5nZXRSb3coKSwgZW1wdHlGaWVsZC5nZXRDb2x1bW4oKV07XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gcmlnaHQgdG9wIHRvIGJvdHRvbSBsZWZ0XHJcblx0XHRjb25zdCByaWdodFRvcERpYWdvbmFsOiBUcmlwbGVGaWVsZCA9IGJvYXJkLmdldFJpZ2h0VG9wRGlhZ29uYWwoKTtcclxuXHRcdHNhbWVNYXJrQ291bnQgPSAwO1xyXG5cdFx0ZW1wdHlGaWVsZENvdW50ID0gMDtcclxuXHRcdGVtcHR5RmllbGQgPSBudWxsO1xyXG5cdFx0Zm9yIChjb25zdCBmaWVsZCBvZiByaWdodFRvcERpYWdvbmFsKSB7XHJcblx0XHRcdGlmIChmaWVsZC5nZXRNYXJrKCkgPT09IGNvbXBhcmVUb01hcmspIHNhbWVNYXJrQ291bnQrKztcclxuXHRcdFx0aWYgKGZpZWxkLmdldE1hcmsoKSA9PT0gbnVsbCkge1xyXG5cdFx0XHRcdGVtcHR5RmllbGRDb3VudCsrO1xyXG5cdFx0XHRcdGVtcHR5RmllbGQgPSBmaWVsZDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8qICBpZiB0aGVyZSBhcmUgdHdvIG1hcmsgaW4gY2hlY2tlZCBsaW5lIGFuZCBlbXB0eSBmaWVsZCxcclxuICAgICAgICAgICAgdGhlbiByZXR1cm4gY29vcmRpbmF0ZXMgb2YgZW1wdHkgZmllbGQgKi9cclxuXHRcdGlmIChzYW1lTWFya0NvdW50ID09PSAyICYmIGVtcHR5RmllbGRDb3VudCA9PT0gMSkge1xyXG5cdFx0XHRyZXR1cm4gW2VtcHR5RmllbGQuZ2V0Um93KCksIGVtcHR5RmllbGQuZ2V0Q29sdW1uKCldO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH07XHJcblxyXG5cdG1ha2VSYW5kb21Nb3ZlID0gKGJvYXJkOiBHYW1lQm9hcmQpOiBbbnVtYmVyLCBudW1iZXJdID0+IHtcclxuXHRcdGNvbnN0IGJvYXJkU2l6ZSA9IGJvYXJkLkJPQVJEX1NJWkU7XHJcblx0XHRsZXQgcm93LCBjb2x1bW47XHJcblx0XHRkbyB7XHJcblx0XHRcdHJvdyA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGJvYXJkU2l6ZSk7XHJcblx0XHRcdGNvbHVtbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGJvYXJkU2l6ZSk7XHJcblx0XHR9IHdoaWxlIChib2FyZC5pc0ZpZWxkQ2hlY2tlZChyb3csIGNvbHVtbikpO1xyXG5cdFx0cmV0dXJuIFtyb3csIGNvbHVtbl07XHJcblx0fTtcclxufVxyXG4vKiBQbGF5ZXIgY2xhc3MgZW5kICovXHJcblxyXG4vKiBHYW1lQm9hcmQgY2xhc3Mgc3RhcnQgKi9cclxuY2xhc3MgR2FtZUJvYXJkIHtcclxuXHRCT0FSRF9TSVpFOiBudW1iZXIgPSAzO1xyXG5cdHByaXZhdGUgYm9hcmRFbGVtZW50OiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIGJvYXJkOiBGaWVsZFtdW107XHJcblxyXG5cdGNvbnN0cnVjdG9yKGdhbWVCb2FyZElkOiBzdHJpbmcsIHByaXZhdGUgb25GaWVsZENsaWNrOiAoZXY6IEV2ZW50KSA9PiB2b2lkLCBwcml2YXRlIGdldEN1cnJlbnRNYXJrOiAoKSA9PiBzdHJpbmcpIHtcclxuXHRcdHRoaXMuYm9hcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihnYW1lQm9hcmRJZCk7XHJcblx0fVxyXG5cclxuXHQvKiBtYW5hZ2VtZW50ICovXHJcblx0aW5pdCA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuYm9hcmQgPSBbW10sIFtdLCBbXV07XHJcblx0XHQvKiBnZXRzIGFsbCBib2FyZCBmaWVsZHMgKi9cclxuXHRcdGNvbnN0IGJvYXJkRmllbGRFbGVtZW50czogTm9kZUxpc3RPZjxIVE1MQnV0dG9uRWxlbWVudD4gPSB0aGlzLmJvYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ2FtZS1ib2FyZF9fZmllbGQnKTtcclxuXHJcblx0XHQvKiBjcmVhdGluZyBmaWVsZHMgKi9cclxuXHRcdGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IHRoaXMuYm9hcmQubGVuZ3RoOyByb3crKykge1xyXG5cdFx0XHRmb3IgKGxldCBjb2x1bW4gPSAwOyBjb2x1bW4gPCB0aGlzLkJPQVJEX1NJWkU7IGNvbHVtbisrKSB7XHJcblx0XHRcdFx0dGhpcy5ib2FyZFtyb3ddLnB1c2goXHJcblx0XHRcdFx0XHRuZXcgRmllbGQoXHJcblx0XHRcdFx0XHRcdHJvdyxcclxuXHRcdFx0XHRcdFx0Y29sdW1uLFxyXG5cdFx0XHRcdFx0XHRib2FyZEZpZWxkRWxlbWVudHNbY29sdW1uICsgcm93ICogdGhpcy5CT0FSRF9TSVpFXSxcclxuXHRcdFx0XHRcdFx0Ly8gaGFuZGxlcyBmb3IgZmllbGQoYnV0dG9ucykgZXZlbnRzXHJcblx0XHRcdFx0XHRcdHRoaXMub25GaWVsZENsaWNrLFxyXG5cdFx0XHRcdFx0XHR0aGlzLmdldEN1cnJlbnRNYXJrXHJcblx0XHRcdFx0XHQpXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGNsZWFyID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0Zm9yIChsZXQgcm93ID0gMDsgcm93IDwgdGhpcy5ib2FyZC5sZW5ndGg7IHJvdysrKSB7XHJcblx0XHRcdGZvciAobGV0IGNvbHVtbiA9IDA7IGNvbHVtbiA8IHRoaXMuQk9BUkRfU0laRTsgY29sdW1uKyspIHtcclxuXHRcdFx0XHR0aGlzLmJvYXJkW3Jvd11bY29sdW1uXS5jbGVhcigpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxuXHQvKiBtYW5hZ2VtZW50IGVuZCAqL1xyXG5cclxuXHQvKiBjaGVja2luZyBzdGF0ZSAqL1xyXG5cdC8qIGNoZWNrcy9tYXJrcyBmaWVsZCBvbiBwYXNzZWQgcG9zaXRpb24gKi9cclxuXHRjaGVja0ZpZWxkID0gKG1hcms6IHN0cmluZywgcm93OiBudW1iZXIsIGNvbHVtbjogbnVtYmVyKSA9PiB7XHJcblx0XHRpZiAocm93IDwgdGhpcy5ib2FyZC5sZW5ndGggJiYgY29sdW1uIDwgdGhpcy5ib2FyZFswXS5sZW5ndGgpIHtcclxuXHRcdFx0dGhpcy5ib2FyZFtyb3ddW2NvbHVtbl0uY2hlY2sobWFyayk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0aXNGaWVsZENoZWNrZWQgPSAocm93OiBudW1iZXIsIGNvbHVtbjogbnVtYmVyKTogYm9vbGVhbiA9PiB7XHJcblx0XHRyZXR1cm4gdGhpcy5ib2FyZFtyb3ddW2NvbHVtbl0uaXNDaGVja2VkKCk7XHJcblx0fTtcclxuXHJcblx0aXNGdWxsID0gKCk6IGJvb2xlYW4gPT4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuYm9hcmQuZmxhdCgpLmV2ZXJ5KGZpZWxkID0+IGZpZWxkLmlzQ2hlY2tlZCgpKTtcclxuXHR9O1xyXG5cdC8qIGNoZWNraW5nIHN0YXRlIGVuZCAqL1xyXG5cclxuXHQvKiB3aW5uaW5nIGZpZWxkcyBzZWFyY2ggKi9cclxuXHRnZXRXaW5uaW5nRmllbGRzID0gKCk6IFRyaXBsZUZpZWxkIHwgbnVsbCA9PiB7XHJcblx0XHRyZXR1cm4gdGhpcy5jaGVja1Jvd3MoKSB8fCB0aGlzLmNoZWNrQ29sdW1ucygpIHx8IHRoaXMuY2hlY2tEaWFnb25hbCgpO1xyXG5cdH07XHJcblxyXG5cdGNoZWNrUm93cyA9ICgpOiBUcmlwbGVGaWVsZCB8IG51bGwgPT4ge1xyXG5cdFx0Zm9yIChsZXQgcm93ID0gMDsgcm93IDwgdGhpcy5CT0FSRF9TSVpFOyByb3crKykge1xyXG5cdFx0XHRpZiAoXHJcblx0XHRcdFx0dGhpcy5ib2FyZFtyb3ddWzBdLmdldE1hcmsoKSAhPT0gbnVsbCAmJlxyXG5cdFx0XHRcdHRoaXMuYm9hcmRbcm93XVswXS5nZXRNYXJrKCkgPT09IHRoaXMuYm9hcmRbcm93XVsxXS5nZXRNYXJrKCkgJiZcclxuXHRcdFx0XHR0aGlzLmJvYXJkW3Jvd11bMV0uZ2V0TWFyaygpID09PSB0aGlzLmJvYXJkW3Jvd11bMl0uZ2V0TWFyaygpXHJcblx0XHRcdClcclxuXHRcdFx0XHRyZXR1cm4gW1xyXG5cdFx0XHRcdFx0dGhpcy5ib2FyZFtyb3ddWzBdLnNldEFzR2FtZVdpbm5pbmcoKSxcclxuXHRcdFx0XHRcdHRoaXMuYm9hcmRbcm93XVsxXS5zZXRBc0dhbWVXaW5uaW5nKCksXHJcblx0XHRcdFx0XHR0aGlzLmJvYXJkW3Jvd11bMl0uc2V0QXNHYW1lV2lubmluZygpLFxyXG5cdFx0XHRcdF07XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9O1xyXG5cclxuXHRjaGVja0NvbHVtbnMgPSAoKTogVHJpcGxlRmllbGQgfCBudWxsID0+IHtcclxuXHRcdGZvciAobGV0IGNvbHVtbiA9IDA7IGNvbHVtbiA8IHRoaXMuQk9BUkRfU0laRTsgY29sdW1uKyspIHtcclxuXHRcdFx0aWYgKFxyXG5cdFx0XHRcdHRoaXMuYm9hcmRbMF1bY29sdW1uXS5nZXRNYXJrKCkgIT09IG51bGwgJiZcclxuXHRcdFx0XHR0aGlzLmJvYXJkWzBdW2NvbHVtbl0uZ2V0TWFyaygpID09PSB0aGlzLmJvYXJkWzFdW2NvbHVtbl0uZ2V0TWFyaygpICYmXHJcblx0XHRcdFx0dGhpcy5ib2FyZFsxXVtjb2x1bW5dLmdldE1hcmsoKSA9PT0gdGhpcy5ib2FyZFsyXVtjb2x1bW5dLmdldE1hcmsoKVxyXG5cdFx0XHQpXHJcblx0XHRcdFx0cmV0dXJuIFtcclxuXHRcdFx0XHRcdHRoaXMuYm9hcmRbMF1bY29sdW1uXS5zZXRBc0dhbWVXaW5uaW5nKCksXHJcblx0XHRcdFx0XHR0aGlzLmJvYXJkWzFdW2NvbHVtbl0uc2V0QXNHYW1lV2lubmluZygpLFxyXG5cdFx0XHRcdFx0dGhpcy5ib2FyZFsyXVtjb2x1bW5dLnNldEFzR2FtZVdpbm5pbmcoKSxcclxuXHRcdFx0XHRdO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fTtcclxuXHJcblx0Y2hlY2tEaWFnb25hbCA9ICgpOiBUcmlwbGVGaWVsZCB8IG51bGwgPT4ge1xyXG5cdFx0LyogdG9wIGxlZnQsIG1pZGRsZSwgYW5kIGJvdHRvbSByaWdodCAqL1xyXG5cdFx0aWYgKFxyXG5cdFx0XHR0aGlzLmJvYXJkWzFdWzFdLmdldE1hcmsoKSAhPT0gbnVsbCAmJlxyXG5cdFx0XHR0aGlzLmJvYXJkWzBdWzBdLmdldE1hcmsoKSA9PT0gdGhpcy5ib2FyZFsxXVsxXS5nZXRNYXJrKCkgJiZcclxuXHRcdFx0dGhpcy5ib2FyZFsxXVsxXS5nZXRNYXJrKCkgPT09IHRoaXMuYm9hcmRbMl1bMl0uZ2V0TWFyaygpXHJcblx0XHQpXHJcblx0XHRcdHJldHVybiBbXHJcblx0XHRcdFx0dGhpcy5ib2FyZFswXVswXS5zZXRBc0dhbWVXaW5uaW5nKCksXHJcblx0XHRcdFx0dGhpcy5ib2FyZFsxXVsxXS5zZXRBc0dhbWVXaW5uaW5nKCksXHJcblx0XHRcdFx0dGhpcy5ib2FyZFsyXVsyXS5zZXRBc0dhbWVXaW5uaW5nKCksXHJcblx0XHRcdF07XHJcblxyXG5cdFx0LyogdG9wIHJpZ2h0LCBtaWRkbGUsIGFuZCBib3R0b20gbGVmdCAqL1xyXG5cdFx0aWYgKFxyXG5cdFx0XHR0aGlzLmJvYXJkWzFdWzFdLmdldE1hcmsoKSAhPT0gbnVsbCAmJlxyXG5cdFx0XHR0aGlzLmJvYXJkWzBdWzJdLmdldE1hcmsoKSA9PT0gdGhpcy5ib2FyZFsxXVsxXS5nZXRNYXJrKCkgJiZcclxuXHRcdFx0dGhpcy5ib2FyZFsxXVsxXS5nZXRNYXJrKCkgPT09IHRoaXMuYm9hcmRbMl1bMF0uZ2V0TWFyaygpXHJcblx0XHQpXHJcblx0XHRcdHJldHVybiBbXHJcblx0XHRcdFx0dGhpcy5ib2FyZFswXVsyXS5zZXRBc0dhbWVXaW5uaW5nKCksXHJcblx0XHRcdFx0dGhpcy5ib2FyZFsxXVsxXS5zZXRBc0dhbWVXaW5uaW5nKCksXHJcblx0XHRcdFx0dGhpcy5ib2FyZFsyXVswXS5zZXRBc0dhbWVXaW5uaW5nKCksXHJcblx0XHRcdF07XHJcblxyXG5cdFx0Lyogbm8gZmllbGRzIG1hdGNoZWQgKi9cclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH07XHJcblx0Lyogd2lubmluZyBmaWVsZHMgc2VhcmNoIGVuZCAqL1xyXG5cclxuXHQvKiBhY2Nlc3NvcnMgKi9cclxuXHRnZXRSb3cgPSAocm93TnVtYmVyOiBudW1iZXIpOiBUcmlwbGVGaWVsZCA9PiB7XHJcblx0XHRyZXR1cm4gW3RoaXMuYm9hcmRbcm93TnVtYmVyXVswXSwgdGhpcy5ib2FyZFtyb3dOdW1iZXJdWzFdLCB0aGlzLmJvYXJkW3Jvd051bWJlcl1bMl1dO1xyXG5cdH07XHJcblxyXG5cdGdldENvbHVtbiA9IChjb2x1bW5OdW1iZXI6IG51bWJlcik6IFRyaXBsZUZpZWxkID0+IHtcclxuXHRcdHJldHVybiBbdGhpcy5ib2FyZFswXVtjb2x1bW5OdW1iZXJdLCB0aGlzLmJvYXJkWzFdW2NvbHVtbk51bWJlcl0sIHRoaXMuYm9hcmRbMl1bY29sdW1uTnVtYmVyXV07XHJcblx0fTtcclxuXHJcblx0Z2V0TGVmdFRvcERpYWdvbmFsID0gKCk6IFRyaXBsZUZpZWxkID0+IHtcclxuXHRcdHJldHVybiBbdGhpcy5ib2FyZFswXVswXSwgdGhpcy5ib2FyZFsxXVsxXSwgdGhpcy5ib2FyZFsyXVsyXV07XHJcblx0fTtcclxuXHJcblx0Z2V0UmlnaHRUb3BEaWFnb25hbCA9ICgpOiBUcmlwbGVGaWVsZCA9PiB7XHJcblx0XHRyZXR1cm4gW3RoaXMuYm9hcmRbMF1bMl0sIHRoaXMuYm9hcmRbMV1bMV0sIHRoaXMuYm9hcmRbMl1bMF1dO1xyXG5cdH07XHJcbn1cclxuLyogR2FtZUJvYXJkIGNsYXNzIGVuZCAqL1xyXG5cclxuLyogRmllbGQgY2xhc3Mgc3RhcnQgKi9cclxuY2xhc3MgRmllbGQge1xyXG5cdHByaXZhdGUgbWFyazogc3RyaW5nID0gbnVsbDtcclxuXHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRwcml2YXRlIHJvdzogbnVtYmVyLFxyXG5cdFx0cHJpdmF0ZSBjb2x1bW46IG51bWJlcixcclxuXHRcdHByaXZhdGUgZmllbGRFbGVtZW50OiBIVE1MQnV0dG9uRWxlbWVudCxcclxuXHRcdHByaXZhdGUgZ2FtZU9uQ2xpY2tIYW5kbGVyOiAoZXY6IEV2ZW50KSA9PiB2b2lkLFxyXG5cdFx0cHJpdmF0ZSBnZXRDdXJyZW50TWFyazogKCkgPT4gc3RyaW5nXHJcblx0KSB7XHJcblx0XHRpZiAodGhpcy5maWVsZEVsZW1lbnQpIHtcclxuXHRcdFx0LyogY2xpY2sgaGFuZGxpbmcgKi9cclxuXHRcdFx0dGhpcy5maWVsZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmdhbWVPbkNsaWNrSGFuZGxlcik7XHJcblxyXG5cdFx0XHQvKiBob3Zlci9mb2N1cyBpbiBoYW5kbGluZyAqL1xyXG5cdFx0XHR0aGlzLmZpZWxkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCB0aGlzLmhhbmRsZUhvdmVyKTtcclxuXHRcdFx0dGhpcy5maWVsZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIHRoaXMuaGFuZGxlSG92ZXIpO1xyXG5cclxuXHRcdFx0LyogaG92ZXIvZm9jdXMgb3V0IGhhbmRsaW5nICovXHJcblx0XHRcdHRoaXMuZmllbGRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgdGhpcy5oYW5kbGVCbHVyKTtcclxuXHRcdFx0dGhpcy5maWVsZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCB0aGlzLmhhbmRsZUJsdXIpO1xyXG5cclxuXHRcdFx0Lyogc2V0dGluZyBhdHRyaWJ1dGVzICovXHJcblx0XHRcdHRoaXMuZmllbGRFbGVtZW50LmRhdGFzZXQucm93ID0gdGhpcy5yb3cudG9TdHJpbmcoKTtcclxuXHRcdFx0dGhpcy5maWVsZEVsZW1lbnQuZGF0YXNldC5jb2x1bW4gPSB0aGlzLmNvbHVtbi50b1N0cmluZygpO1xyXG5cdFx0XHR0aGlzLmNsZWFyKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKiBoYW5kbGVycyAqL1xyXG5cdC8qIGhvdmVyL2ZvY3VzIGluIGZpZWxkIGhhbmRsZSAqL1xyXG5cdGhhbmRsZUhvdmVyID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0Y29uc3QgY3VycmVudFBsYXllck1hcmsgPSB0aGlzLmdldEN1cnJlbnRNYXJrKCk7XHJcblx0XHR0aGlzLmZpZWxkRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY3VycmVudC1wbGF5ZXInLCBjdXJyZW50UGxheWVyTWFyayk7XHJcblx0fTtcclxuXHJcblx0LyogaG92ZXIvZm9jdXMgb3V0IGZpZWxkIGhhbmRsZSAqL1xyXG5cdGhhbmRsZUJsdXIgPSAoKSA9PiB7XHJcblx0XHR0aGlzLmZpZWxkRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtY3VycmVudC1wbGF5ZXInKTtcclxuXHR9O1xyXG5cdC8qIGhhbmRsZXJzIGVuZCAqL1xyXG5cclxuXHQvKiBtYW5hZ2VtZW50ICovXHJcblx0Y2xlYXIgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLm1hcmsgPSBudWxsO1xyXG5cdFx0dGhpcy5maWVsZEVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgYFJvdyAke3RoaXMucm93ICsgMX0sIGNvbHVtbiAke3RoaXMuY29sdW1uICsgMX0sIGVtcHR5IGZpZWxkYCk7XHJcblx0XHR0aGlzLmZpZWxkRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtZ2FtZS13aW5uaW5nJyk7XHJcblx0XHR0aGlzLmZpZWxkRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtY3VycmVudC1wbGF5ZXInKTtcclxuXHRcdHRoaXMuZmllbGRFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1tYXJrJyk7XHJcblx0fTtcclxuXHJcblx0Y2hlY2sgPSAobWFyazogc3RyaW5nKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLm1hcmsgPSBtYXJrO1xyXG5cdFx0dGhpcy5maWVsZEVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgYFJvdyAke3RoaXMucm93ICsgMX0sIGNvbHVtbiAke3RoaXMuY29sdW1uICsgMX0sICR7dGhpcy5tYXJrfSBtYXJrYCk7XHJcblx0XHR0aGlzLmZpZWxkRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWFyaycsIG1hcmspO1xyXG5cdH07XHJcblx0LyogbWFuYWdlbWVudCBlbmQgKi9cclxuXHJcblx0LyogaGVscGVycyAqL1xyXG5cdGlzQ2hlY2tlZCA9ICgpOiBib29sZWFuID0+IHtcclxuXHRcdHJldHVybiB0aGlzLm1hcmsgIT09IG51bGw7XHJcblx0fTtcclxuXHJcblx0c2V0QXNHYW1lV2lubmluZyA9ICgpOiBGaWVsZCA9PiB7XHJcblx0XHR0aGlzLmZpZWxkRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZ2FtZS13aW5uaW5nJywgJycpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fTtcclxuXHQvKiBoZWxwZXJzIGVuZCAqL1xyXG5cclxuXHQvKiBnZXR0ZXJzICovXHJcblx0Z2V0TWFyayA9ICgpOiBzdHJpbmcgfCBudWxsID0+IHtcclxuXHRcdHJldHVybiB0aGlzLm1hcms7XHJcblx0fTtcclxuXHJcblx0Z2V0Um93ID0gKCk6IG51bWJlciA9PiB0aGlzLnJvdztcclxuXHJcblx0Z2V0Q29sdW1uID0gKCk6IG51bWJlciA9PiB0aGlzLmNvbHVtbjtcclxufVxyXG4vKiBGaWVsZCBjbGFzcyBlbmQgKi9cclxuXHJcbi8qIEdhbWVNZW51IGNsYXNzIHN0YXJ0ICovXHJcbmNsYXNzIEdhbWVNZW51IHtcclxuXHRwcml2YXRlIGdhbWVNZW51OiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIG1lbnVGb3JtOiBIVE1MRm9ybUVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBmb3JtT3B0aW9uczogTm9kZUxpc3RPZjxIVE1MSW5wdXRFbGVtZW50PjtcclxuXHRwcml2YXRlIGVycm9yTXNnOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIGZvcm1TdWJtaXRCdXR0b25zOiBOb2RlTGlzdE9mPEhUTUxCdXR0b25FbGVtZW50PjtcclxuXHJcblx0Y29uc3RydWN0b3IoZ2FtZU1lbnVJZDogc3RyaW5nLCBwcml2YXRlIGdhbWVJbml0OiAobW9kZTogc3RyaW5nLCBwMU1hcms6IHN0cmluZykgPT4gdm9pZCkge1xyXG5cdFx0dGhpcy5nYW1lTWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZ2FtZU1lbnVJZCk7XHJcblx0XHR0aGlzLm1lbnVGb3JtID0gdGhpcy5nYW1lTWVudS5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XHJcblx0XHR0aGlzLmZvcm1PcHRpb25zID0gdGhpcy5tZW51Rm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0nKTtcclxuXHRcdHRoaXMuZXJyb3JNc2cgPSB0aGlzLm1lbnVGb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tyb2xlPVwiYWxlcnRcIl0nKTtcclxuXHRcdHRoaXMuZm9ybVN1Ym1pdEJ1dHRvbnMgPSB0aGlzLm1lbnVGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdJyk7XHJcblx0fVxyXG5cclxuXHRpbml0ID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5mb3JtU3VibWl0QnV0dG9ucy5mb3JFYWNoKGJ0biA9PiBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZU1lbnVTdWJtaXRCdXR0b24pKTtcclxuXHR9O1xyXG5cclxuXHQvKiBoYW5kbGVycyAqL1xyXG5cdGhhbmRsZU1lbnVTdWJtaXRCdXR0b24gPSAoZXY6IEV2ZW50KTogdm9pZCA9PiB7XHJcblx0XHRldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0Lyogc2hvd3MgZXJyb3IgaWYgYW55IGZpZWxkIHdhc24ndCBzZWxlY3RlZCAqL1xyXG5cdFx0aWYgKCF0aGlzLmlzQW55T3B0aW9uU2VsZWN0ZWQoKSkge1xyXG5cdFx0XHR0aGlzLmVycm9yTXNnLmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcclxuXHRcdFx0dGhpcy5lcnJvck1zZy5pbm5lclRleHQgPSAnUGxlYXNlIHNlbGVjdCBtYXJrIGZvciBwbGF5ZXIgMSc7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuZXJyb3JNc2cuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xyXG5cdFx0XHR0aGlzLmVycm9yTXNnLmlubmVyVGV4dCA9ICcnO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qIHJldHJpZXZlIGdhbWUgbW9kZSBmcm9tIHN1Ym1pdCBidXR0b24gY2xpY2tlZCBhbmQgc2VsZWN0ZWQgbWFyayBmcm9tIG9wdGlvbnMgKi9cclxuXHRcdGNvbnN0IHN1Ym1pdEJ0bjogSFRNTEJ1dHRvbkVsZW1lbnQgPSBldi50YXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblx0XHRjb25zdCBnYW1lTW9kZTogc3RyaW5nID0gc3VibWl0QnRuLmRhdGFzZXQubW9kZTtcclxuXHRcdGNvbnN0IHAxTWFyazogc3RyaW5nID0gdGhpcy5nZXRDaGVja2VkT3B0aW9uTWFyaygpO1xyXG5cclxuXHRcdC8qIGhpZGVzIGdhbWUgbWVudSAqL1xyXG5cdFx0dGhpcy5oaWRlKCk7XHJcblxyXG5cdFx0LyogYW5kIHJ1bnMgZ2FtZSBpbml0aWFsaXphdGlvbiAqL1xyXG5cdFx0dGhpcy5nYW1lSW5pdChnYW1lTW9kZSwgcDFNYXJrKTsgLy8gbWV0aG9kIGZyb20gdGhlIHBhcmVudCBHYW1lIGNsYXNzXHJcblx0fTtcclxuXHQvKiBoYW5kbGVycyBlbmQgKi9cclxuXHRpc0FueU9wdGlvblNlbGVjdGVkID0gKCk6IGJvb2xlYW4gPT4ge1xyXG5cdFx0cmV0dXJuIEFycmF5LmZyb20odGhpcy5mb3JtT3B0aW9ucykuc29tZShvcHRpb24gPT4gb3B0aW9uLmNoZWNrZWQpO1xyXG5cdH07XHJcblxyXG5cdGdldENoZWNrZWRPcHRpb25NYXJrID0gKCk6IHN0cmluZyA9PiB7XHJcblx0XHRmb3IgKGNvbnN0IG9wdGlvbiBvZiB0aGlzLmZvcm1PcHRpb25zKSB7XHJcblx0XHRcdGlmIChvcHRpb24uY2hlY2tlZCkgcmV0dXJuIG9wdGlvbi5kYXRhc2V0Lm1hcms7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gJyc7XHJcblx0fTtcclxuXHQvKiBoZWxwZXJzICovXHJcblxyXG5cdC8qIHZpZXcgdXBkYXRlICovXHJcblx0c2hvdyA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuZ2FtZU1lbnUuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcblx0fTtcclxuXHJcblx0aGlkZSA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuZ2FtZU1lbnUuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcblx0fTtcclxuXHQvKiB2aWV3IHVwZGF0ZSBlbmQgKi9cclxuXHJcblx0Lyogb3RoZXIgKi9cclxuXHRzZXRGb2N1cyA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuZm9ybU9wdGlvbnNbMF0/LmZvY3VzKCk7XHJcblx0fTtcclxufVxyXG4vKiBHYW1lTWVudSBjbGFzcyBlbmQgKi9cclxuXHJcbi8qIFR1cm5JbmRpY2F0b3IgY2xhc3Mgc3RhcnQgKi9cclxuY2xhc3MgVHVybkluZGljYXRvciB7XHJcblx0cHJpdmF0ZSBjdXJyZW50UGxheWVyTWFya0VsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgY3VycmVudFBsYXllck1hcmtJY29uOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG5cclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdHRoaXMuY3VycmVudFBsYXllck1hcmtFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2N1cnJlbnQtcGxheWVyLW1hcmsnKTtcclxuXHRcdHRoaXMuY3VycmVudFBsYXllck1hcmtJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2N1cnJlbnQtcGxheWVyLW1hcmstaWNvbicpO1xyXG5cdH1cclxuXHJcblx0dXBkYXRlID0gKG1hcms6IHN0cmluZykgPT4ge1xyXG5cdFx0dGhpcy5jdXJyZW50UGxheWVyTWFya0VsZW1lbnQuaW5uZXJUZXh0ID0gbWFyaztcclxuXHRcdHRoaXMuY3VycmVudFBsYXllck1hcmtJY29uLnNyYyA9IGAuL2Rpc3QvYXNzZXRzL2ljb24tJHttYXJrfS5zdmdgO1xyXG5cdH07XHJcbn1cclxuLyogVHVybkluZGljYXRvciBjbGFzcyBlbmQgKi9cclxuXHJcbi8qIFNjb3JlQm9hcmQgY2xhc3Mgc3RhcnQgKi9cclxuY2xhc3MgU2NvcmVCb2FyZCB7XHJcblx0cHJpdmF0ZSBzY29yZUJvYXJkQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIHAxTGFiZWw6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgcDFTY29yZTogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBwMkxhYmVsOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIHAyU2NvcmU6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgdGllc1Njb3JlOiBIVE1MRWxlbWVudDtcclxuXHJcblx0Y29uc3RydWN0b3Ioc2NvcmVCb2FyZElkOiBzdHJpbmcpIHtcclxuXHRcdHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2NvcmVCb2FyZElkKTtcclxuXHRcdHRoaXMucDFMYWJlbCA9IHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjcDEtZ2FtZS1uYW1lJyk7XHJcblx0XHR0aGlzLnAxU2NvcmUgPSB0aGlzLnNjb3JlQm9hcmRDb250YWluZXIucXVlcnlTZWxlY3RvcignI3AxLWdhbWUtc2NvcmUnKTtcclxuXHRcdHRoaXMucDJMYWJlbCA9IHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjcDItZ2FtZS1uYW1lJyk7XHJcblx0XHR0aGlzLnAyU2NvcmUgPSB0aGlzLnNjb3JlQm9hcmRDb250YWluZXIucXVlcnlTZWxlY3RvcignI3AyLWdhbWUtc2NvcmUnKTtcclxuXHRcdHRoaXMudGllc1Njb3JlID0gdGhpcy5zY29yZUJvYXJkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNnYW1lLXRpZXMnKTtcclxuXHR9XHJcblxyXG5cdGluaXQgPSAocDE6IFBsYXllciwgcDI6IFBsYXllciwgdGllczogbnVtYmVyID0gMCk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5wMUxhYmVsLmlubmVyVGV4dCA9IHAxLnRvU3RyaW5nKCk7XHJcblx0XHR0aGlzLnAyTGFiZWwuaW5uZXJUZXh0ID0gcDIudG9TdHJpbmcoKTtcclxuXHRcdHRoaXMudXBkYXRlU2NvcmUocDEsIHAyLCB0aWVzKTtcclxuXHR9O1xyXG5cclxuXHR1cGRhdGVTY29yZSA9IChwMTogUGxheWVyLCBwMjogUGxheWVyLCB0aWVzOiBudW1iZXIpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMucDFTY29yZS5pbm5lclRleHQgPSBwMS5nZXRTY29yZSgpLnRvU3RyaW5nKCk7XHJcblx0XHR0aGlzLnAyU2NvcmUuaW5uZXJUZXh0ID0gcDIuZ2V0U2NvcmUoKS50b1N0cmluZygpO1xyXG5cdFx0dGhpcy50aWVzU2NvcmUuaW5uZXJUZXh0ID0gdGllcy50b1N0cmluZygpO1xyXG5cdH07XHJcbn1cclxuLyogU2NvcmVCb2FyZCBjbGFzcyBlbmQgKi9cclxuXHJcbi8qIFJlc3VsdE1vZGFsIGNsYXNzIHN0YXJ0ICovXHJcbmNsYXNzIFJlc3VsdE1vZGFsIHtcclxuXHRwcml2YXRlIG1vZGFsOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIG1vZGFsTWVzc2FnZTogSFRNTFBhcmFncmFwaEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBtb2RhbEhlYWRpbmc6IEhUTUxIZWFkaW5nRWxlbWVudDtcclxuXHRwcml2YXRlIHF1aXRCdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xyXG5cdHByaXZhdGUgY29udGludWVCdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xyXG5cclxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIGdhbWVRdWl0SGFuZGxpbmc6ICgpID0+IHZvaWQsIHByaXZhdGUgZ2FtZUNvbnRpbnVlSGFuZGxpbmc6ICgpID0+IHZvaWQpIHtcclxuXHRcdHRoaXMubW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2FtZS1yZXN1bHQtbW9kYWwnKTtcclxuXHRcdHRoaXMubW9kYWxNZXNzYWdlID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX21lc3NhZ2UnKTtcclxuXHRcdHRoaXMubW9kYWxIZWFkaW5nID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2hlYWRpbmcnKTtcclxuXHJcblx0XHQvKiBxdWl0IGJ1dHRvbiAqL1xyXG5cdFx0dGhpcy5xdWl0QnV0dG9uID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCdidXR0b25bZGF0YS1hY3Rpb249XCJxdWl0XCJdJyk7XHJcblx0XHR0aGlzLnF1aXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZVF1aXQpO1xyXG5cclxuXHRcdC8qIGNvbnRpbnVlIGJ1dHRvbiAqL1xyXG5cdFx0dGhpcy5jb250aW51ZUJ1dHRvbiA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignYnV0dG9uW2RhdGEtYWN0aW9uPVwiY29udGludWVcIl0nKTtcclxuXHRcdHRoaXMuY29udGludWVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZUNvbnRpbnVlKTtcclxuXHR9XHJcblxyXG5cdC8qIGhhbmRsZXJzICovXHJcblx0aGFuZGxlQ29udGludWUgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLmdhbWVDb250aW51ZUhhbmRsaW5nKCk7XHJcblx0XHR0aGlzLmhpZGUoKTtcclxuXHR9O1xyXG5cclxuXHRoYW5kbGVRdWl0ID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5oaWRlKCk7XHJcblx0XHR0aGlzLmdhbWVRdWl0SGFuZGxpbmcoKTtcclxuXHR9O1xyXG5cdC8qIGhhbmRsZXJzIGVuZCAqL1xyXG5cclxuXHQvKiB2aWV3IHVwZGF0ZXMgKi9cclxuXHRzaG93ID0gKHdpbm5lcjogUGxheWVyIHwgbnVsbCA9IG51bGwpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMubW9kYWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblx0XHR0aGlzLnVwZGF0ZVJlc3VsdCh3aW5uZXIpO1xyXG5cdH07XHJcblxyXG5cdGhpZGUgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLm1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG5cdH07XHJcblxyXG5cdHVwZGF0ZVJlc3VsdCA9ICh3aW5uZXI6IFBsYXllciB8IG51bGwpOiB2b2lkID0+IHtcclxuXHRcdGlmICh3aW5uZXIgPT09IG51bGwpIHRoaXMuZGlzcGxheVRpZVJlc3VsdCgpO1xyXG5cdFx0ZWxzZSB0aGlzLmRpc3BsYXlXaW5uZXJSZXN1bHQod2lubmVyKTtcclxuXHJcblx0XHR0aGlzLnF1aXRCdXR0b24uZm9jdXMoKTtcclxuXHR9O1xyXG5cclxuXHRkaXNwbGF5VGllUmVzdWx0ID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5tb2RhbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtd2lubmVyJywgJ3RpZScpO1xyXG5cdFx0dGhpcy5tb2RhbEhlYWRpbmcuaW5uZXJIVE1MID0gJyc7XHJcblx0XHR0aGlzLm1vZGFsSGVhZGluZy5pbm5lclRleHQgPSAnUm91bmQgdGllZCc7XHJcblx0fTtcclxuXHJcblx0ZGlzcGxheVdpbm5lclJlc3VsdCA9ICh3aW5uZXI6IFBsYXllcik6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5tb2RhbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtd2lubmVyJywgd2lubmVyLmdldE1hcmsoKSk7XHJcblxyXG5cdFx0Y29uc3QgbWVzc2FnZSA9IHRoaXMuZ2V0Um91bmRNZXNzYWdlKHdpbm5lci5nZXROYW1lKCkpO1xyXG5cdFx0dGhpcy5tb2RhbE1lc3NhZ2UuaW5uZXJUZXh0ID0gbWVzc2FnZTtcclxuXHRcdHRoaXMuc2V0UmVzdWx0SGVhZGluZyh3aW5uZXIpO1xyXG5cdH07XHJcblxyXG5cdHNldFJlc3VsdEhlYWRpbmcgPSAod2lubmVyOiBQbGF5ZXIpOiB2b2lkID0+IHtcclxuXHRcdC8qIGNsZWFyIGhlYWRpbmcgYmVmb3JlIHNldHRpbmcgbWVzc2FnZSAqL1xyXG5cdFx0dGhpcy5tb2RhbEhlYWRpbmcuaW5uZXJIVE1MID0gJyc7XHJcblx0XHRjb25zdCBtYXJrID0gd2lubmVyLmdldE1hcmsoKTtcclxuXHJcblx0XHQvKiB3aW5uaW5nIG1hcmsgaWNvbiAqL1xyXG5cdFx0Y29uc3QgaW1nRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG5cdFx0aW1nRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3NyYycsIGAuL2Rpc3QvYXNzZXRzL2ljb24tJHttYXJrfS5zdmdgKTtcclxuXHRcdGltZ0VsZW1lbnQuc2V0QXR0cmlidXRlKCdhbHQnLCAnJyk7XHJcblxyXG5cdFx0LyogaGlkZGVuIG1hcmsgZm9yIHNjcmVlbiByZWFkZXJzICovXHJcblx0XHRjb25zdCBoaWRkZW5NYXJrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG5cdFx0aGlkZGVuTWFyay5jbGFzc0xpc3QuYWRkKCd2aXN1YWxseS1oaWRkZW4nKTtcclxuXHRcdGhpZGRlbk1hcmsuaW5uZXJUZXh0ID0gbWFyaztcclxuXHJcblx0XHQvKiBtZXNzYWdlIGFmdGVyIGltYWdlICovXHJcblx0XHRjb25zdCBtZXNzYWdlVGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCd0YWtlcyB0aGUgcm91bmQnKTtcclxuXHJcblx0XHQvKiBzcGFuIGNvbnRhaW5lciBmb3IgaGlkZGVuIG1hcmsgYW5kIG1lc3NhZ2UgdGV4dCAqL1xyXG5cdFx0Y29uc3QgaGVhZGluZ1NwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcblx0XHRoZWFkaW5nU3Bhbi5hcHBlbmRDaGlsZChoaWRkZW5NYXJrKTtcclxuXHRcdGhlYWRpbmdTcGFuLmFwcGVuZENoaWxkKG1lc3NhZ2VUZXh0KTtcclxuXHJcblx0XHR0aGlzLm1vZGFsSGVhZGluZy5hcHBlbmRDaGlsZChpbWdFbGVtZW50KTtcclxuXHRcdHRoaXMubW9kYWxIZWFkaW5nLmFwcGVuZENoaWxkKGhlYWRpbmdTcGFuKTtcclxuXHR9O1xyXG5cdC8qIHZpZXcgdXBkYXRlcyBlbmQgKi9cclxuXHJcblx0LyogaGVscGVycyAqL1xyXG5cdGdldFJvdW5kTWVzc2FnZSA9IChwbGF5ZXJOYW1lOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xyXG5cdFx0bGV0IG1lc3NhZ2U7XHJcblx0XHRzd2l0Y2ggKHBsYXllck5hbWUpIHtcclxuXHRcdFx0Y2FzZSAncDEnOlxyXG5cdFx0XHRcdG1lc3NhZ2UgPSAnUGxheWVyIDEgd2lucyEnO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdwMic6XHJcblx0XHRcdFx0bWVzc2FnZSA9ICdQbGF5ZXIgMiB3aW5zISc7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ3lvdSc6XHJcblx0XHRcdFx0bWVzc2FnZSA9ICdZb3Ugd29uISc7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ2NwdSc6XHJcblx0XHRcdFx0bWVzc2FnZSA9ICdPaCBubywgeW91IGxvc3QuLi4nO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdG1lc3NhZ2UgPSAnJztcclxuXHRcdH1cclxuXHRcdHJldHVybiBtZXNzYWdlO1xyXG5cdH07XHJcbn1cclxuLyogUmVzdWx0TW9kYWwgY2xhc3MgZW5kICovXHJcblxyXG4vKiBSZXN0YXJ0TW9kYWwgY2xhc3Mgc3RhcnQgKi9cclxuY2xhc3MgUmVzdGFydE1vZGFsIHtcclxuXHRwcml2YXRlIG1vZGFsOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIGNhbmNlbEJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblx0cHJpdmF0ZSByZXN0YXJ0QnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudDtcclxuXHJcblx0Y29uc3RydWN0b3IocHJpdmF0ZSBnYW1lUmVzdGFydEhhbmRsaW5nOiAoKSA9PiB2b2lkLCBwcml2YXRlIGNhbmNlbFN1cHBvcnQ6ICgpID0+IHZvaWQpIHtcclxuXHRcdHRoaXMubW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2FtZS1yZXNldC1tb2RhbCcpO1xyXG5cclxuXHRcdC8qIGNhbmNlbCBidXR0b24gKi9cclxuXHRcdHRoaXMuY2FuY2VsQnV0dG9uID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCdidXR0b25bZGF0YS1hY3Rpb249XCJjYW5jZWxcIl0nKTtcclxuXHRcdHRoaXMuY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVDYW5jZWwpO1xyXG5cclxuXHRcdC8qIHJlc3RhcnQgYnV0dG9uICovXHJcblx0XHR0aGlzLnJlc3RhcnRCdXR0b24gPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbltkYXRhLWFjdGlvbj1cInJlc3RhcnRcIl0nKTtcclxuXHRcdHRoaXMucmVzdGFydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlUmVzdGFydCk7XHJcblx0fVxyXG5cclxuXHQvKiBoYW5kbGVycyAqL1xyXG5cdGhhbmRsZUNhbmNlbCA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuaGlkZSgpO1xyXG5cdFx0dGhpcy5jYW5jZWxTdXBwb3J0KCk7XHJcblx0fTtcclxuXHJcblx0aGFuZGxlUmVzdGFydCA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuZ2FtZVJlc3RhcnRIYW5kbGluZygpO1xyXG5cdFx0dGhpcy5oaWRlKCk7XHJcblx0fTtcclxuXHQvKiBoYW5kbGVycyBlbmQgKi9cclxuXHJcblx0LyogdmlldyB1cGRhdGVzICovXHJcblx0c2hvdyA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMubW9kYWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblx0XHR0aGlzLmNhbmNlbEJ1dHRvbi5mb2N1cygpO1xyXG5cdH07XHJcblxyXG5cdGhpZGUgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLm1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG5cdH07XHJcblx0LyogdmlldyB1cGRhdGVzIGVuZCAqL1xyXG59XHJcbi8qIFJlc3RhcnRNb2RhbCBjbGFzcyBzdGFydCAqL1xyXG4vKiBjbGFzc2VzIGVuZCAqL1xyXG5cclxuLyogZ2FtZSBvYmplY3RzICovXHJcbmNvbnN0IHRpY1RhY1RvZUdhbWU6IEdhbWUgPSBuZXcgR2FtZSgpO1xyXG4vKiBnYW1lIG9iamVjdHMgZW5kICovXHJcbiIsIi8qIHR5cGVzIGVuZCAqL1xuLyogY2xhc3NlcyAqL1xuLyogR2FtZSBjbGFzcyBzdGFydCAqL1xuY2xhc3MgR2FtZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qIGdhbWUgc3RhdGVzICovXG4gICAgICAgIHRoaXMudGllcyA9IDA7XG4gICAgICAgIHRoaXMuZ2FtZUNvdW50ID0gMDtcbiAgICAgICAgdGhpcy50dXJuQ291bnQgPSAwO1xuICAgICAgICAvKiBoYW5kbGVycyAqL1xuICAgICAgICB0aGlzLm9uRmllbGRDbGljayA9IChldikgPT4ge1xuICAgICAgICAgICAgLyogcmV0cmlldmUgcm93IGFuZCBjb2x1bW4gZnJvbSBjbGlja2VkIGJ1dHRvbiBhbmQgbWFrZSBtb3ZlICovXG4gICAgICAgICAgICBjb25zdCBmaWVsZEJ1dHRvbiA9IGV2LnRhcmdldDtcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IHBhcnNlSW50KGZpZWxkQnV0dG9uLmRhdGFzZXQucm93KTtcbiAgICAgICAgICAgIGNvbnN0IGNvbHVtbiA9IHBhcnNlSW50KGZpZWxkQnV0dG9uLmRhdGFzZXQuY29sdW1uKTtcbiAgICAgICAgICAgIHRoaXMubWFrZU1vdmUocm93LCBjb2x1bW4pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uR2FtZUNvbnRpbnVlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5nYW1lQ291bnQrKztcbiAgICAgICAgICAgIHRoaXMudHVybkNvdW50ID0gMDtcbiAgICAgICAgICAgIHRoaXMuZ2FtZUJvYXJkLmNsZWFyKCk7XG4gICAgICAgICAgICB0aGlzLnNldFJlc2V0QnV0dG9uRm9jdXMoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2NvcmVCb2FyZCgpO1xuICAgICAgICAgICAgdGhpcy5tYWtlTW92ZUNQVSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uR2FtZVF1aXQgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmdhbWVDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgICB0aGlzLmdhbWVCb2FyZC5jbGVhcigpO1xuICAgICAgICAgICAgdGhpcy5nYW1lTWVudS5zaG93KCk7XG4gICAgICAgICAgICB0aGlzLmdhbWVNZW51LnNldEZvY3VzKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25SZXN0YXJ0QnV0dG9uQ2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlc3RhcnRHYW1lTW9kYWwuc2hvdygpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldFJlc2V0QnV0dG9uRm9jdXMgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlc3RhcnRHYW1lQnV0dG9uLmZvY3VzKCk7XG4gICAgICAgIH07XG4gICAgICAgIC8qIGhhbmRsZXJzIGVuZCAqL1xuICAgICAgICAvKiBnYW1lIG1hbmFnZW1lbnQgKi9cbiAgICAgICAgdGhpcy5pbml0ID0gKG1vZGUsIHAxTWFyaykgPT4ge1xuICAgICAgICAgICAgY29uc3QgcDJNYXJrID0gcDFNYXJrID09PSAneCcgPyAnbycgOiAneCc7XG4gICAgICAgICAgICBsZXQgcDFMYWJlbCwgcGxheWVyMTtcbiAgICAgICAgICAgIGxldCBwMkxhYmVsLCBwbGF5ZXIyO1xuICAgICAgICAgICAgLyogY3JlYXRlcyBsYWJlbHMgYW5kIHBsYXllcnMgZGVwZW5kaW5nIG9uIGdhbWUgbW9kZSAqL1xuICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdzaW5nbGVwbGF5ZXInKSB7XG4gICAgICAgICAgICAgICAgcDFMYWJlbCA9ICd5b3UnO1xuICAgICAgICAgICAgICAgIHAyTGFiZWwgPSAnY3B1JztcbiAgICAgICAgICAgICAgICBwbGF5ZXIyID0gbmV3IENQVVBsYXllcihwMkxhYmVsLCBwMk1hcmspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcDFMYWJlbCA9ICdwMSc7XG4gICAgICAgICAgICAgICAgcDJMYWJlbCA9ICdwMic7XG4gICAgICAgICAgICAgICAgcGxheWVyMiA9IG5ldyBQbGF5ZXIocDJMYWJlbCwgcDJNYXJrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBsYXllcjEgPSBuZXcgUGxheWVyKHAxTGFiZWwsIHAxTWFyayk7XG4gICAgICAgICAgICAvKiBhc3NpZ25zIGNyZWF0ZWQgcGxheWVycyB0byByaWdodCBzcG90cyAqL1xuICAgICAgICAgICAgaWYgKHAxTWFyayA9PT0gJ3gnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy54UGxheWVyID0gcGxheWVyMTtcbiAgICAgICAgICAgICAgICB0aGlzLm9QbGF5ZXIgPSBwbGF5ZXIyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy54UGxheWVyID0gcGxheWVyMjtcbiAgICAgICAgICAgICAgICB0aGlzLm9QbGF5ZXIgPSBwbGF5ZXIxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyogY3JlYXRlcyB0dXBsZSBvZiBwbGF5ZXJzLCB0byBjaG9vc2UgY3VycmVudCBwbGF5ZXIgZGVwZW5kaW5nIG9uIHR1cm4gY291bnRlciAqL1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXJRdWV1ZSA9IFt0aGlzLnhQbGF5ZXIsIHRoaXMub1BsYXllcl07XG4gICAgICAgICAgICB0aGlzLnJlc2V0Q291bnRlcnMoKTtcbiAgICAgICAgICAgIC8qIHNob3dzIGdhbWUgY29udGFpbmVyICovXG4gICAgICAgICAgICB0aGlzLmdhbWVDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0R2FtZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnN0YXJ0R2FtZSA9ICgpID0+IHtcbiAgICAgICAgICAgIC8qIGluaXRpYWxpemUgc2NvcmUgYm9hcmQgd2l0aCBjcmVhdGVkIHBsYXllcnMgKi9cbiAgICAgICAgICAgIHRoaXMuc2NvcmVCb2FyZC5pbml0KHRoaXMueFBsYXllciwgdGhpcy5vUGxheWVyLCB0aGlzLnRpZXMpO1xuICAgICAgICAgICAgLyogaW5pdGlhbGl6ZSBnYW1lIGJvYXJkICovXG4gICAgICAgICAgICB0aGlzLmdhbWVCb2FyZC5pbml0KCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVR1cm5JbmRpY2F0b3IoKTtcbiAgICAgICAgICAgIC8qIGlmIHN0YXJ0aW5nIHBsYXllciBpcyBDUFUgdGhlbiBtYWtlIGF1dG8gbW92ZSAqL1xuICAgICAgICAgICAgdGhpcy5tYWtlTW92ZUNQVSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlc3RhcnRHYW1lID0gKCkgPT4ge1xuICAgICAgICAgICAgLyogcmVzZXQgY291bnRlcnMgKi9cbiAgICAgICAgICAgIHRoaXMucmVzZXRDb3VudGVycygpO1xuICAgICAgICAgICAgLyogcmVzZXQgYm9hcmQgKi9cbiAgICAgICAgICAgIHRoaXMuZ2FtZUJvYXJkLmNsZWFyKCk7XG4gICAgICAgICAgICAvKiByZXNldCBwbGF5ZXJzICovXG4gICAgICAgICAgICB0aGlzLnhQbGF5ZXIucmVzZXRTY29yZSgpO1xuICAgICAgICAgICAgdGhpcy5vUGxheWVyLnJlc2V0U2NvcmUoKTtcbiAgICAgICAgICAgIC8qIHVwZGF0ZSBzY29yZSBib2FyZCAqL1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTY29yZUJvYXJkKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVR1cm5JbmRpY2F0b3IoKTtcbiAgICAgICAgICAgIC8qIHRvIG1ha2UgbW92ZSBpZiBmaXJzdCBwbGF5ZXIgaXMgQ1BVICovXG4gICAgICAgICAgICB0aGlzLm1ha2VNb3ZlQ1BVKCk7XG4gICAgICAgICAgICAvKiBzZXQgZm9jdXMgdG8gcmVzdGFydCBidXR0b24gKi9cbiAgICAgICAgICAgIHRoaXMuc2V0UmVzZXRCdXR0b25Gb2N1cygpO1xuICAgICAgICB9O1xuICAgICAgICAvKiBnYW1lIG1hbmFnZW1lbnQgZW5kICovXG4gICAgICAgIC8qIG1ha2luZyBtb3ZlIHJlbGF0ZWQgKi9cbiAgICAgICAgdGhpcy5tYWtlTW92ZSA9IChyb3csIGNvbHVtbikgPT4ge1xuICAgICAgICAgICAgLyogb24gZmllbGQgY2xpY2ssIGlmIGZpZWxkIGlzIGNoZWNrZWQgdGhlbiByZXR1cm4gZG9pbmcgbm90aGluZyAqL1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2FtZUJvYXJkLmlzRmllbGRDaGVja2VkKHJvdywgY29sdW1uKSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAvKiBjaGVja3Mgc2VsZWN0ZWQgZmllbGQgKi9cbiAgICAgICAgICAgIHRoaXMuZ2FtZUJvYXJkLmNoZWNrRmllbGQodGhpcy5nZXRDdXJyZW50UGxheWVyKCkuZ2V0TWFyaygpLCByb3csIGNvbHVtbik7XG4gICAgICAgICAgICB0aGlzLmFmdGVyTW92ZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFmdGVyTW92ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHdpbm5pbmdGaWVsZHMgPSB0aGlzLmdhbWVCb2FyZC5nZXRXaW5uaW5nRmllbGRzKCk7XG4gICAgICAgICAgICBpZiAod2lubmluZ0ZpZWxkcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZVJlc3VsdE1vZGFsLnNob3codGhpcy5nZXRDdXJyZW50UGxheWVyKCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q3VycmVudFBsYXllcigpLnVwZGF0ZVNjb3JlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZ2FtZUJvYXJkLmlzRnVsbCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lUmVzdWx0TW9kYWwuc2hvdygpO1xuICAgICAgICAgICAgICAgIHRoaXMudGllcysrO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaW5jcmVhc2VUdXJuQ291bnQoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVHVybkluZGljYXRvcigpO1xuICAgICAgICAgICAgdGhpcy5tYWtlTW92ZUNQVSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm1ha2VNb3ZlQ1BVID0gKCkgPT4ge1xuICAgICAgICAgICAgLyogYWZ0ZXIgZmllbGQgaXMgY2hlY2tlZCwgY2hlY2tzIGlmIGN1cnJlbnQgcGxheWVyIGlzIENQVSBhbmQgaWYgaXMsIHRoZW4gbWFrZXMgYSBtb3ZlICovXG4gICAgICAgICAgICBpZiAodGhpcy5nZXRDdXJyZW50UGxheWVyKCkgaW5zdGFuY2VvZiBDUFVQbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1ha2VNb3ZlKC4uLnRoaXMuZ2V0Q3VycmVudFBsYXllcigpLm1ha2VNb3ZlKHRoaXMuZ2FtZUJvYXJkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8qIG1ha2luZyBtb3ZlIHJlbGF0ZWQgZW5kICovXG4gICAgICAgIC8qIHBsYXllciBzdGF0ZXMgKi9cbiAgICAgICAgdGhpcy5nZXRDdXJyZW50UGxheWVyTWFyayA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRQbGF5ZXIoKS5nZXRNYXJrKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0Q3VycmVudFBsYXllciA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBsYXllclF1ZXVlWyh0aGlzLmdhbWVDb3VudCArIHRoaXMudHVybkNvdW50KSAlIDJdO1xuICAgICAgICB9O1xuICAgICAgICAvKiBwbGF5ZXIgc3RhdGVzIGVuZCAqL1xuICAgICAgICAvKiBjb3VudGVycyBtYW5hZ2VtZW50ICovXG4gICAgICAgIHRoaXMucmVzZXRDb3VudGVycyA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGllcyA9IDA7XG4gICAgICAgICAgICB0aGlzLnR1cm5Db3VudCA9IDA7XG4gICAgICAgICAgICB0aGlzLmdhbWVDb3VudCA9IDA7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaW5jcmVhc2VUdXJuQ291bnQgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKyt0aGlzLnR1cm5Db3VudDtcbiAgICAgICAgfTtcbiAgICAgICAgLyogY291bnRlcnMgbWFuYWdlbWVudCBlbmQgKi9cbiAgICAgICAgLyogdmlldyB1cGRhdGVzICovXG4gICAgICAgIHRoaXMudXBkYXRlVHVybkluZGljYXRvciA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudHVybkluZGljYXRvci51cGRhdGUodGhpcy5nZXRDdXJyZW50UGxheWVyTWFyaygpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51cGRhdGVTY29yZUJvYXJkID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zY29yZUJvYXJkLnVwZGF0ZVNjb3JlKHRoaXMueFBsYXllciwgdGhpcy5vUGxheWVyLCB0aGlzLnRpZXMpO1xuICAgICAgICB9O1xuICAgICAgICAvKiBnYW1lIG1lbnUgKi9cbiAgICAgICAgdGhpcy5nYW1lTWVudSA9IG5ldyBHYW1lTWVudSgnI2dhbWUtbWVudScsIHRoaXMuaW5pdCk7XG4gICAgICAgIHRoaXMuZ2FtZU1lbnUuaW5pdCgpO1xuICAgICAgICAvKiBjb250YWluZXIgKi9cbiAgICAgICAgdGhpcy5nYW1lQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RpYy10YWMtdG9lLWdhbWUnKTtcbiAgICAgICAgLyogZ2FtZSBib2FyZCAqL1xuICAgICAgICB0aGlzLmdhbWVCb2FyZCA9IG5ldyBHYW1lQm9hcmQoJyNnYW1lLWJvYXJkJywgdGhpcy5vbkZpZWxkQ2xpY2ssIHRoaXMuZ2V0Q3VycmVudFBsYXllck1hcmspO1xuICAgICAgICAvKiBzY29yZSBib2FyZCBhbmQgY3VycmVudCdzIHBsYXllciB0dXJuICovXG4gICAgICAgIHRoaXMuc2NvcmVCb2FyZCA9IG5ldyBTY29yZUJvYXJkKCcjc2NvcmUtYm9hcmQnKTtcbiAgICAgICAgdGhpcy50dXJuSW5kaWNhdG9yID0gbmV3IFR1cm5JbmRpY2F0b3IoKTtcbiAgICAgICAgLyogcmVzdGFydCBidXR0b24gKi9cbiAgICAgICAgdGhpcy5yZXN0YXJ0R2FtZUJ1dHRvbiA9IHRoaXMuZ2FtZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjcmVzdGFydC1nYW1lLWJ1dHRvbicpO1xuICAgICAgICB0aGlzLnJlc3RhcnRHYW1lQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vblJlc3RhcnRCdXR0b25DbGljayk7XG4gICAgICAgIC8qIG1vZGFscyAqL1xuICAgICAgICB0aGlzLmdhbWVSZXN1bHRNb2RhbCA9IG5ldyBSZXN1bHRNb2RhbCh0aGlzLm9uR2FtZVF1aXQsIHRoaXMub25HYW1lQ29udGludWUpO1xuICAgICAgICB0aGlzLnJlc3RhcnRHYW1lTW9kYWwgPSBuZXcgUmVzdGFydE1vZGFsKHRoaXMucmVzdGFydEdhbWUsIHRoaXMuc2V0UmVzZXRCdXR0b25Gb2N1cyk7XG4gICAgfVxufVxuLyogR2FtZSBjbGFzcyBlbmQgKi9cbi8qIFBsYXllciBjbGFzcyBzdGFydCAqL1xuY2xhc3MgUGxheWVyIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBtYXJrLCBzY29yZSA9IDApIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5tYXJrID0gbWFyaztcbiAgICAgICAgdGhpcy5zY29yZSA9IHNjb3JlO1xuICAgICAgICB0aGlzLnRvU3RyaW5nID0gKCkgPT4gYCR7dGhpcy5tYXJrfSAoJHt0aGlzLm5hbWV9KWA7XG4gICAgICAgIHRoaXMuZ2V0TmFtZSA9ICgpID0+IHRoaXMubmFtZTtcbiAgICAgICAgdGhpcy5nZXRNYXJrID0gKCkgPT4gdGhpcy5tYXJrO1xuICAgICAgICB0aGlzLmdldFNjb3JlID0gKCkgPT4gdGhpcy5zY29yZTtcbiAgICAgICAgdGhpcy51cGRhdGVTY29yZSA9ICgpID0+ICsrdGhpcy5zY29yZTtcbiAgICAgICAgdGhpcy5yZXNldFNjb3JlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zY29yZSA9IDA7XG4gICAgICAgIH07XG4gICAgfVxufVxuY2xhc3MgQ1BVUGxheWVyIGV4dGVuZHMgUGxheWVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5tYWtlTW92ZSA9IChib2FyZCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgd2lubmluZ1BsYXkgPSB0aGlzLmdldFdpbm5pbmdQbGF5KGJvYXJkKTtcbiAgICAgICAgICAgIGlmICh3aW5uaW5nUGxheSAhPT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gd2lubmluZ1BsYXk7XG4gICAgICAgICAgICBjb25zdCBibG9ja2luZ1BsYXkgPSB0aGlzLmdldEJsb2NraW5nUGxheShib2FyZCk7XG4gICAgICAgICAgICBpZiAoYmxvY2tpbmdQbGF5ICE9PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBibG9ja2luZ1BsYXk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYWtlUmFuZG9tTW92ZShib2FyZCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0V2lubmluZ1BsYXkgPSAoYm9hcmQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFBsYXkoYm9hcmQsIHRoaXMuZ2V0TWFyaygpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRCbG9ja2luZ1BsYXkgPSAoYm9hcmQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBhcmVUb01hcmsgPSB0aGlzLmdldE1hcmsoKSA9PT0gJ28nID8gJ3gnIDogJ28nO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UGxheShib2FyZCwgY29tcGFyZVRvTWFyayk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0UGxheSA9IChib2FyZCwgY29tcGFyZVRvTWFyaykgPT4ge1xuICAgICAgICAgICAgY29uc3QgYm9hcmRTaXplID0gYm9hcmQuQk9BUkRfU0laRTtcbiAgICAgICAgICAgIC8qIGNoZWNrIHJvd3MgYW5kIGNvbHVtbnMgKi9cbiAgICAgICAgICAgIGZvciAobGV0IHJvd051bWJlciA9IDA7IHJvd051bWJlciA8IGJvYXJkU2l6ZTsgcm93TnVtYmVyKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZHNSb3cgPSBib2FyZC5nZXRSb3cocm93TnVtYmVyKTtcbiAgICAgICAgICAgICAgICBsZXQgc2FtZU1hcmtDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgbGV0IGVtcHR5RmllbGRDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgbGV0IGVtcHR5RmllbGQ7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBmaWVsZCBvZiBmaWVsZHNSb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLmdldE1hcmsoKSA9PT0gY29tcGFyZVRvTWFyaylcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhbWVNYXJrQ291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLmdldE1hcmsoKSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlGaWVsZENvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbXB0eUZpZWxkID0gZmllbGQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLyogIGlmIHRoZXJlIGFyZSB0d28gbWFyayBpbiBjaGVja2VkIGxpbmUgYW5kIGVtcHR5IGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICB0aGVuIHJldHVybiBjb29yZGluYXRlcyBvZiBlbXB0eSBmaWVsZCAqL1xuICAgICAgICAgICAgICAgIGlmIChzYW1lTWFya0NvdW50ID09PSAyICYmIGVtcHR5RmllbGRDb3VudCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2VtcHR5RmllbGQuZ2V0Um93KCksIGVtcHR5RmllbGQuZ2V0Q29sdW1uKCldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qIGNoZWNrIGNvbHVtbnMgKi9cbiAgICAgICAgICAgIGZvciAobGV0IGNvbE51bWJlciA9IDA7IGNvbE51bWJlciA8IGJvYXJkU2l6ZTsgY29sTnVtYmVyKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZHNDb2x1bW4gPSBib2FyZC5nZXRDb2x1bW4oY29sTnVtYmVyKTtcbiAgICAgICAgICAgICAgICBsZXQgc2FtZU1hcmtDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgbGV0IGVtcHR5RmllbGRDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgbGV0IGVtcHR5RmllbGQ7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBmaWVsZCBvZiBmaWVsZHNDb2x1bW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLmdldE1hcmsoKSA9PT0gY29tcGFyZVRvTWFyaylcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhbWVNYXJrQ291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLmdldE1hcmsoKSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW1wdHlGaWVsZENvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbXB0eUZpZWxkID0gZmllbGQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLyogIGlmIHRoZXJlIGFyZSB0d28gbWFyayBpbiBjaGVja2VkIGxpbmUgYW5kIGVtcHR5IGZpZWxkLFxuICAgICAgICAgICAgICAgICAgICB0aGVuIHJldHVybiBjb29yZGluYXRlcyBvZiBlbXB0eSBmaWVsZCAqL1xuICAgICAgICAgICAgICAgIGlmIChzYW1lTWFya0NvdW50ID09PSAyICYmIGVtcHR5RmllbGRDb3VudCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2VtcHR5RmllbGQuZ2V0Um93KCksIGVtcHR5RmllbGQuZ2V0Q29sdW1uKCldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qIGNoZWNrIGRpYWdvbmFscyAqL1xuICAgICAgICAgICAgLy8gbGVmdCB0b3AgdG8gYm90dG9tIHJpZ2h0XG4gICAgICAgICAgICBjb25zdCBsZWZ0VG9wRGlhZ29uYWwgPSBib2FyZC5nZXRMZWZ0VG9wRGlhZ29uYWwoKTtcbiAgICAgICAgICAgIGxldCBzYW1lTWFya0NvdW50ID0gMDtcbiAgICAgICAgICAgIGxldCBlbXB0eUZpZWxkQ291bnQgPSAwO1xuICAgICAgICAgICAgbGV0IGVtcHR5RmllbGQ7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIGxlZnRUb3BEaWFnb25hbCkge1xuICAgICAgICAgICAgICAgIGlmIChmaWVsZC5nZXRNYXJrKCkgPT09IGNvbXBhcmVUb01hcmspXG4gICAgICAgICAgICAgICAgICAgIHNhbWVNYXJrQ291bnQrKztcbiAgICAgICAgICAgICAgICBpZiAoZmllbGQuZ2V0TWFyaygpID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGVtcHR5RmllbGRDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICBlbXB0eUZpZWxkID0gZmllbGQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyogIGlmIHRoZXJlIGFyZSB0d28gbWFyayBpbiBjaGVja2VkIGxpbmUgYW5kIGVtcHR5IGZpZWxkLFxuICAgICAgICAgICAgICAgIHRoZW4gcmV0dXJuIGNvb3JkaW5hdGVzIG9mIGVtcHR5IGZpZWxkICovXG4gICAgICAgICAgICBpZiAoc2FtZU1hcmtDb3VudCA9PT0gMiAmJiBlbXB0eUZpZWxkQ291bnQgPT09IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW2VtcHR5RmllbGQuZ2V0Um93KCksIGVtcHR5RmllbGQuZ2V0Q29sdW1uKCldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmlnaHQgdG9wIHRvIGJvdHRvbSBsZWZ0XG4gICAgICAgICAgICBjb25zdCByaWdodFRvcERpYWdvbmFsID0gYm9hcmQuZ2V0UmlnaHRUb3BEaWFnb25hbCgpO1xuICAgICAgICAgICAgc2FtZU1hcmtDb3VudCA9IDA7XG4gICAgICAgICAgICBlbXB0eUZpZWxkQ291bnQgPSAwO1xuICAgICAgICAgICAgZW1wdHlGaWVsZCA9IG51bGw7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIHJpZ2h0VG9wRGlhZ29uYWwpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGQuZ2V0TWFyaygpID09PSBjb21wYXJlVG9NYXJrKVxuICAgICAgICAgICAgICAgICAgICBzYW1lTWFya0NvdW50Kys7XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkLmdldE1hcmsoKSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBlbXB0eUZpZWxkQ291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgZW1wdHlGaWVsZCA9IGZpZWxkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qICBpZiB0aGVyZSBhcmUgdHdvIG1hcmsgaW4gY2hlY2tlZCBsaW5lIGFuZCBlbXB0eSBmaWVsZCxcbiAgICAgICAgICAgICAgICB0aGVuIHJldHVybiBjb29yZGluYXRlcyBvZiBlbXB0eSBmaWVsZCAqL1xuICAgICAgICAgICAgaWYgKHNhbWVNYXJrQ291bnQgPT09IDIgJiYgZW1wdHlGaWVsZENvdW50ID09PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtlbXB0eUZpZWxkLmdldFJvdygpLCBlbXB0eUZpZWxkLmdldENvbHVtbigpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm1ha2VSYW5kb21Nb3ZlID0gKGJvYXJkKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBib2FyZFNpemUgPSBib2FyZC5CT0FSRF9TSVpFO1xuICAgICAgICAgICAgbGV0IHJvdywgY29sdW1uO1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIHJvdyA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGJvYXJkU2l6ZSk7XG4gICAgICAgICAgICAgICAgY29sdW1uID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYm9hcmRTaXplKTtcbiAgICAgICAgICAgIH0gd2hpbGUgKGJvYXJkLmlzRmllbGRDaGVja2VkKHJvdywgY29sdW1uKSk7XG4gICAgICAgICAgICByZXR1cm4gW3JvdywgY29sdW1uXTtcbiAgICAgICAgfTtcbiAgICB9XG59XG4vKiBQbGF5ZXIgY2xhc3MgZW5kICovXG4vKiBHYW1lQm9hcmQgY2xhc3Mgc3RhcnQgKi9cbmNsYXNzIEdhbWVCb2FyZCB7XG4gICAgY29uc3RydWN0b3IoZ2FtZUJvYXJkSWQsIG9uRmllbGRDbGljaywgZ2V0Q3VycmVudE1hcmspIHtcbiAgICAgICAgdGhpcy5vbkZpZWxkQ2xpY2sgPSBvbkZpZWxkQ2xpY2s7XG4gICAgICAgIHRoaXMuZ2V0Q3VycmVudE1hcmsgPSBnZXRDdXJyZW50TWFyaztcbiAgICAgICAgdGhpcy5CT0FSRF9TSVpFID0gMztcbiAgICAgICAgLyogbWFuYWdlbWVudCAqL1xuICAgICAgICB0aGlzLmluaXQgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmJvYXJkID0gW1tdLCBbXSwgW11dO1xuICAgICAgICAgICAgLyogZ2V0cyBhbGwgYm9hcmQgZmllbGRzICovXG4gICAgICAgICAgICBjb25zdCBib2FyZEZpZWxkRWxlbWVudHMgPSB0aGlzLmJvYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ2FtZS1ib2FyZF9fZmllbGQnKTtcbiAgICAgICAgICAgIC8qIGNyZWF0aW5nIGZpZWxkcyAqL1xuICAgICAgICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgdGhpcy5ib2FyZC5sZW5ndGg7IHJvdysrKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgdGhpcy5CT0FSRF9TSVpFOyBjb2x1bW4rKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJvYXJkW3Jvd10ucHVzaChuZXcgRmllbGQocm93LCBjb2x1bW4sIGJvYXJkRmllbGRFbGVtZW50c1tjb2x1bW4gKyByb3cgKiB0aGlzLkJPQVJEX1NJWkVdLCBcbiAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlcyBmb3IgZmllbGQoYnV0dG9ucykgZXZlbnRzXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25GaWVsZENsaWNrLCB0aGlzLmdldEN1cnJlbnRNYXJrKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNsZWFyID0gKCkgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgdGhpcy5ib2FyZC5sZW5ndGg7IHJvdysrKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgdGhpcy5CT0FSRF9TSVpFOyBjb2x1bW4rKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJvYXJkW3Jvd11bY29sdW1uXS5jbGVhcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLyogbWFuYWdlbWVudCBlbmQgKi9cbiAgICAgICAgLyogY2hlY2tpbmcgc3RhdGUgKi9cbiAgICAgICAgLyogY2hlY2tzL21hcmtzIGZpZWxkIG9uIHBhc3NlZCBwb3NpdGlvbiAqL1xuICAgICAgICB0aGlzLmNoZWNrRmllbGQgPSAobWFyaywgcm93LCBjb2x1bW4pID0+IHtcbiAgICAgICAgICAgIGlmIChyb3cgPCB0aGlzLmJvYXJkLmxlbmd0aCAmJiBjb2x1bW4gPCB0aGlzLmJvYXJkWzBdLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbcm93XVtjb2x1bW5dLmNoZWNrKG1hcmspO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmlzRmllbGRDaGVja2VkID0gKHJvdywgY29sdW1uKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ib2FyZFtyb3ddW2NvbHVtbl0uaXNDaGVja2VkKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaXNGdWxsID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYm9hcmQuZmxhdCgpLmV2ZXJ5KGZpZWxkID0+IGZpZWxkLmlzQ2hlY2tlZCgpKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyogY2hlY2tpbmcgc3RhdGUgZW5kICovXG4gICAgICAgIC8qIHdpbm5pbmcgZmllbGRzIHNlYXJjaCAqL1xuICAgICAgICB0aGlzLmdldFdpbm5pbmdGaWVsZHMgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jaGVja1Jvd3MoKSB8fCB0aGlzLmNoZWNrQ29sdW1ucygpIHx8IHRoaXMuY2hlY2tEaWFnb25hbCgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNoZWNrUm93cyA9ICgpID0+IHtcbiAgICAgICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IHRoaXMuQk9BUkRfU0laRTsgcm93KyspIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ib2FyZFtyb3ddWzBdLmdldE1hcmsoKSAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJvYXJkW3Jvd11bMF0uZ2V0TWFyaygpID09PSB0aGlzLmJvYXJkW3Jvd11bMV0uZ2V0TWFyaygpICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbcm93XVsxXS5nZXRNYXJrKCkgPT09IHRoaXMuYm9hcmRbcm93XVsyXS5nZXRNYXJrKCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJvYXJkW3Jvd11bMF0uc2V0QXNHYW1lV2lubmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ib2FyZFtyb3ddWzFdLnNldEFzR2FtZVdpbm5pbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbcm93XVsyXS5zZXRBc0dhbWVXaW5uaW5nKCksXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jaGVja0NvbHVtbnMgPSAoKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCBjb2x1bW4gPSAwOyBjb2x1bW4gPCB0aGlzLkJPQVJEX1NJWkU7IGNvbHVtbisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYm9hcmRbMF1bY29sdW1uXS5nZXRNYXJrKCkgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ib2FyZFswXVtjb2x1bW5dLmdldE1hcmsoKSA9PT0gdGhpcy5ib2FyZFsxXVtjb2x1bW5dLmdldE1hcmsoKSAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJvYXJkWzFdW2NvbHVtbl0uZ2V0TWFyaygpID09PSB0aGlzLmJvYXJkWzJdW2NvbHVtbl0uZ2V0TWFyaygpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ib2FyZFswXVtjb2x1bW5dLnNldEFzR2FtZVdpbm5pbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbMV1bY29sdW1uXS5zZXRBc0dhbWVXaW5uaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJvYXJkWzJdW2NvbHVtbl0uc2V0QXNHYW1lV2lubmluZygpLFxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2hlY2tEaWFnb25hbCA9ICgpID0+IHtcbiAgICAgICAgICAgIC8qIHRvcCBsZWZ0LCBtaWRkbGUsIGFuZCBib3R0b20gcmlnaHQgKi9cbiAgICAgICAgICAgIGlmICh0aGlzLmJvYXJkWzFdWzFdLmdldE1hcmsoKSAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbMF1bMF0uZ2V0TWFyaygpID09PSB0aGlzLmJvYXJkWzFdWzFdLmdldE1hcmsoKSAmJlxuICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbMV1bMV0uZ2V0TWFyaygpID09PSB0aGlzLmJvYXJkWzJdWzJdLmdldE1hcmsoKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJvYXJkWzBdWzBdLnNldEFzR2FtZVdpbm5pbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ib2FyZFsxXVsxXS5zZXRBc0dhbWVXaW5uaW5nKCksXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbMl1bMl0uc2V0QXNHYW1lV2lubmluZygpLFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAvKiB0b3AgcmlnaHQsIG1pZGRsZSwgYW5kIGJvdHRvbSBsZWZ0ICovXG4gICAgICAgICAgICBpZiAodGhpcy5ib2FyZFsxXVsxXS5nZXRNYXJrKCkgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmJvYXJkWzBdWzJdLmdldE1hcmsoKSA9PT0gdGhpcy5ib2FyZFsxXVsxXS5nZXRNYXJrKCkgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmJvYXJkWzFdWzFdLmdldE1hcmsoKSA9PT0gdGhpcy5ib2FyZFsyXVswXS5nZXRNYXJrKCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ib2FyZFswXVsyXS5zZXRBc0dhbWVXaW5uaW5nKCksXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbMV1bMV0uc2V0QXNHYW1lV2lubmluZygpLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJvYXJkWzJdWzBdLnNldEFzR2FtZVdpbm5pbmcoKSxcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgLyogbm8gZmllbGRzIG1hdGNoZWQgKi9cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICAvKiB3aW5uaW5nIGZpZWxkcyBzZWFyY2ggZW5kICovXG4gICAgICAgIC8qIGFjY2Vzc29ycyAqL1xuICAgICAgICB0aGlzLmdldFJvdyA9IChyb3dOdW1iZXIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBbdGhpcy5ib2FyZFtyb3dOdW1iZXJdWzBdLCB0aGlzLmJvYXJkW3Jvd051bWJlcl1bMV0sIHRoaXMuYm9hcmRbcm93TnVtYmVyXVsyXV07XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0Q29sdW1uID0gKGNvbHVtbk51bWJlcikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIFt0aGlzLmJvYXJkWzBdW2NvbHVtbk51bWJlcl0sIHRoaXMuYm9hcmRbMV1bY29sdW1uTnVtYmVyXSwgdGhpcy5ib2FyZFsyXVtjb2x1bW5OdW1iZXJdXTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRMZWZ0VG9wRGlhZ29uYWwgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gW3RoaXMuYm9hcmRbMF1bMF0sIHRoaXMuYm9hcmRbMV1bMV0sIHRoaXMuYm9hcmRbMl1bMl1dO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldFJpZ2h0VG9wRGlhZ29uYWwgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gW3RoaXMuYm9hcmRbMF1bMl0sIHRoaXMuYm9hcmRbMV1bMV0sIHRoaXMuYm9hcmRbMl1bMF1dO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmJvYXJkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZ2FtZUJvYXJkSWQpO1xuICAgIH1cbn1cbi8qIEdhbWVCb2FyZCBjbGFzcyBlbmQgKi9cbi8qIEZpZWxkIGNsYXNzIHN0YXJ0ICovXG5jbGFzcyBGaWVsZCB7XG4gICAgY29uc3RydWN0b3Iocm93LCBjb2x1bW4sIGZpZWxkRWxlbWVudCwgZ2FtZU9uQ2xpY2tIYW5kbGVyLCBnZXRDdXJyZW50TWFyaykge1xuICAgICAgICB0aGlzLnJvdyA9IHJvdztcbiAgICAgICAgdGhpcy5jb2x1bW4gPSBjb2x1bW47XG4gICAgICAgIHRoaXMuZmllbGRFbGVtZW50ID0gZmllbGRFbGVtZW50O1xuICAgICAgICB0aGlzLmdhbWVPbkNsaWNrSGFuZGxlciA9IGdhbWVPbkNsaWNrSGFuZGxlcjtcbiAgICAgICAgdGhpcy5nZXRDdXJyZW50TWFyayA9IGdldEN1cnJlbnRNYXJrO1xuICAgICAgICB0aGlzLm1hcmsgPSBudWxsO1xuICAgICAgICAvKiBoYW5kbGVycyAqL1xuICAgICAgICAvKiBob3Zlci9mb2N1cyBpbiBmaWVsZCBoYW5kbGUgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVIb3ZlciA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRQbGF5ZXJNYXJrID0gdGhpcy5nZXRDdXJyZW50TWFyaygpO1xuICAgICAgICAgICAgdGhpcy5maWVsZEVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWN1cnJlbnQtcGxheWVyJywgY3VycmVudFBsYXllck1hcmspO1xuICAgICAgICB9O1xuICAgICAgICAvKiBob3Zlci9mb2N1cyBvdXQgZmllbGQgaGFuZGxlICovXG4gICAgICAgIHRoaXMuaGFuZGxlQmx1ciA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZmllbGRFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1jdXJyZW50LXBsYXllcicpO1xuICAgICAgICB9O1xuICAgICAgICAvKiBoYW5kbGVycyBlbmQgKi9cbiAgICAgICAgLyogbWFuYWdlbWVudCAqL1xuICAgICAgICB0aGlzLmNsZWFyID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5tYXJrID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuZmllbGRFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGBSb3cgJHt0aGlzLnJvdyArIDF9LCBjb2x1bW4gJHt0aGlzLmNvbHVtbiArIDF9LCBlbXB0eSBmaWVsZGApO1xuICAgICAgICAgICAgdGhpcy5maWVsZEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWdhbWUtd2lubmluZycpO1xuICAgICAgICAgICAgdGhpcy5maWVsZEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWN1cnJlbnQtcGxheWVyJyk7XG4gICAgICAgICAgICB0aGlzLmZpZWxkRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtbWFyaycpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNoZWNrID0gKG1hcmspID0+IHtcbiAgICAgICAgICAgIHRoaXMubWFyayA9IG1hcms7XG4gICAgICAgICAgICB0aGlzLmZpZWxkRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBgUm93ICR7dGhpcy5yb3cgKyAxfSwgY29sdW1uICR7dGhpcy5jb2x1bW4gKyAxfSwgJHt0aGlzLm1hcmt9IG1hcmtgKTtcbiAgICAgICAgICAgIHRoaXMuZmllbGRFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1tYXJrJywgbWFyayk7XG4gICAgICAgIH07XG4gICAgICAgIC8qIG1hbmFnZW1lbnQgZW5kICovXG4gICAgICAgIC8qIGhlbHBlcnMgKi9cbiAgICAgICAgdGhpcy5pc0NoZWNrZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tYXJrICE9PSBudWxsO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldEFzR2FtZVdpbm5pbmcgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmZpZWxkRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZ2FtZS13aW5uaW5nJywgJycpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIC8qIGhlbHBlcnMgZW5kICovXG4gICAgICAgIC8qIGdldHRlcnMgKi9cbiAgICAgICAgdGhpcy5nZXRNYXJrID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWFyaztcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRSb3cgPSAoKSA9PiB0aGlzLnJvdztcbiAgICAgICAgdGhpcy5nZXRDb2x1bW4gPSAoKSA9PiB0aGlzLmNvbHVtbjtcbiAgICAgICAgaWYgKHRoaXMuZmllbGRFbGVtZW50KSB7XG4gICAgICAgICAgICAvKiBjbGljayBoYW5kbGluZyAqL1xuICAgICAgICAgICAgdGhpcy5maWVsZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmdhbWVPbkNsaWNrSGFuZGxlcik7XG4gICAgICAgICAgICAvKiBob3Zlci9mb2N1cyBpbiBoYW5kbGluZyAqL1xuICAgICAgICAgICAgdGhpcy5maWVsZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgdGhpcy5oYW5kbGVIb3Zlcik7XG4gICAgICAgICAgICB0aGlzLmZpZWxkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJywgdGhpcy5oYW5kbGVIb3Zlcik7XG4gICAgICAgICAgICAvKiBob3Zlci9mb2N1cyBvdXQgaGFuZGxpbmcgKi9cbiAgICAgICAgICAgIHRoaXMuZmllbGRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgdGhpcy5oYW5kbGVCbHVyKTtcbiAgICAgICAgICAgIHRoaXMuZmllbGRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgdGhpcy5oYW5kbGVCbHVyKTtcbiAgICAgICAgICAgIC8qIHNldHRpbmcgYXR0cmlidXRlcyAqL1xuICAgICAgICAgICAgdGhpcy5maWVsZEVsZW1lbnQuZGF0YXNldC5yb3cgPSB0aGlzLnJvdy50b1N0cmluZygpO1xuICAgICAgICAgICAgdGhpcy5maWVsZEVsZW1lbnQuZGF0YXNldC5jb2x1bW4gPSB0aGlzLmNvbHVtbi50b1N0cmluZygpO1xuICAgICAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyogRmllbGQgY2xhc3MgZW5kICovXG4vKiBHYW1lTWVudSBjbGFzcyBzdGFydCAqL1xuY2xhc3MgR2FtZU1lbnUge1xuICAgIGNvbnN0cnVjdG9yKGdhbWVNZW51SWQsIGdhbWVJbml0KSB7XG4gICAgICAgIHRoaXMuZ2FtZUluaXQgPSBnYW1lSW5pdDtcbiAgICAgICAgdGhpcy5pbml0ID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5mb3JtU3VibWl0QnV0dG9ucy5mb3JFYWNoKGJ0biA9PiBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZU1lbnVTdWJtaXRCdXR0b24pKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyogaGFuZGxlcnMgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVNZW51U3VibWl0QnV0dG9uID0gKGV2KSA9PiB7XG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgLyogc2hvd3MgZXJyb3IgaWYgYW55IGZpZWxkIHdhc24ndCBzZWxlY3RlZCAqL1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQW55T3B0aW9uU2VsZWN0ZWQoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JNc2cuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JNc2cuaW5uZXJUZXh0ID0gJ1BsZWFzZSBzZWxlY3QgbWFyayBmb3IgcGxheWVyIDEnO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JNc2cuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JNc2cuaW5uZXJUZXh0ID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKiByZXRyaWV2ZSBnYW1lIG1vZGUgZnJvbSBzdWJtaXQgYnV0dG9uIGNsaWNrZWQgYW5kIHNlbGVjdGVkIG1hcmsgZnJvbSBvcHRpb25zICovXG4gICAgICAgICAgICBjb25zdCBzdWJtaXRCdG4gPSBldi50YXJnZXQ7XG4gICAgICAgICAgICBjb25zdCBnYW1lTW9kZSA9IHN1Ym1pdEJ0bi5kYXRhc2V0Lm1vZGU7XG4gICAgICAgICAgICBjb25zdCBwMU1hcmsgPSB0aGlzLmdldENoZWNrZWRPcHRpb25NYXJrKCk7XG4gICAgICAgICAgICAvKiBoaWRlcyBnYW1lIG1lbnUgKi9cbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgLyogYW5kIHJ1bnMgZ2FtZSBpbml0aWFsaXphdGlvbiAqL1xuICAgICAgICAgICAgdGhpcy5nYW1lSW5pdChnYW1lTW9kZSwgcDFNYXJrKTsgLy8gbWV0aG9kIGZyb20gdGhlIHBhcmVudCBHYW1lIGNsYXNzXG4gICAgICAgIH07XG4gICAgICAgIC8qIGhhbmRsZXJzIGVuZCAqL1xuICAgICAgICB0aGlzLmlzQW55T3B0aW9uU2VsZWN0ZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmZvcm1PcHRpb25zKS5zb21lKG9wdGlvbiA9PiBvcHRpb24uY2hlY2tlZCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0Q2hlY2tlZE9wdGlvbk1hcmsgPSAoKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiB0aGlzLmZvcm1PcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbi5jaGVja2VkKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9uLmRhdGFzZXQubWFyaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfTtcbiAgICAgICAgLyogaGVscGVycyAqL1xuICAgICAgICAvKiB2aWV3IHVwZGF0ZSAqL1xuICAgICAgICB0aGlzLnNob3cgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmdhbWVNZW51LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhpZGUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmdhbWVNZW51LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICB9O1xuICAgICAgICAvKiB2aWV3IHVwZGF0ZSBlbmQgKi9cbiAgICAgICAgLyogb3RoZXIgKi9cbiAgICAgICAgdGhpcy5zZXRGb2N1cyA9ICgpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIChfYSA9IHRoaXMuZm9ybU9wdGlvbnNbMF0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mb2N1cygpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdhbWVNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihnYW1lTWVudUlkKTtcbiAgICAgICAgdGhpcy5tZW51Rm9ybSA9IHRoaXMuZ2FtZU1lbnUucXVlcnlTZWxlY3RvcignZm9ybScpO1xuICAgICAgICB0aGlzLmZvcm1PcHRpb25zID0gdGhpcy5tZW51Rm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0nKTtcbiAgICAgICAgdGhpcy5lcnJvck1zZyA9IHRoaXMubWVudUZvcm0ucXVlcnlTZWxlY3RvcignW3JvbGU9XCJhbGVydFwiXScpO1xuICAgICAgICB0aGlzLmZvcm1TdWJtaXRCdXR0b25zID0gdGhpcy5tZW51Rm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpO1xuICAgIH1cbn1cbi8qIEdhbWVNZW51IGNsYXNzIGVuZCAqL1xuLyogVHVybkluZGljYXRvciBjbGFzcyBzdGFydCAqL1xuY2xhc3MgVHVybkluZGljYXRvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlID0gKG1hcmspID0+IHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBsYXllck1hcmtFbGVtZW50LmlubmVyVGV4dCA9IG1hcms7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQbGF5ZXJNYXJrSWNvbi5zcmMgPSBgLi9kaXN0L2Fzc2V0cy9pY29uLSR7bWFya30uc3ZnYDtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jdXJyZW50UGxheWVyTWFya0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY3VycmVudC1wbGF5ZXItbWFyaycpO1xuICAgICAgICB0aGlzLmN1cnJlbnRQbGF5ZXJNYXJrSWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjdXJyZW50LXBsYXllci1tYXJrLWljb24nKTtcbiAgICB9XG59XG4vKiBUdXJuSW5kaWNhdG9yIGNsYXNzIGVuZCAqL1xuLyogU2NvcmVCb2FyZCBjbGFzcyBzdGFydCAqL1xuY2xhc3MgU2NvcmVCb2FyZCB7XG4gICAgY29uc3RydWN0b3Ioc2NvcmVCb2FyZElkKSB7XG4gICAgICAgIHRoaXMuaW5pdCA9IChwMSwgcDIsIHRpZXMgPSAwKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnAxTGFiZWwuaW5uZXJUZXh0ID0gcDEudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHRoaXMucDJMYWJlbC5pbm5lclRleHQgPSBwMi50b1N0cmluZygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTY29yZShwMSwgcDIsIHRpZXMpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnVwZGF0ZVNjb3JlID0gKHAxLCBwMiwgdGllcykgPT4ge1xuICAgICAgICAgICAgdGhpcy5wMVNjb3JlLmlubmVyVGV4dCA9IHAxLmdldFNjb3JlKCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHRoaXMucDJTY29yZS5pbm5lclRleHQgPSBwMi5nZXRTY29yZSgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB0aGlzLnRpZXNTY29yZS5pbm5lclRleHQgPSB0aWVzLnRvU3RyaW5nKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2NvcmVCb2FyZElkKTtcbiAgICAgICAgdGhpcy5wMUxhYmVsID0gdGhpcy5zY29yZUJvYXJkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNwMS1nYW1lLW5hbWUnKTtcbiAgICAgICAgdGhpcy5wMVNjb3JlID0gdGhpcy5zY29yZUJvYXJkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNwMS1nYW1lLXNjb3JlJyk7XG4gICAgICAgIHRoaXMucDJMYWJlbCA9IHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjcDItZ2FtZS1uYW1lJyk7XG4gICAgICAgIHRoaXMucDJTY29yZSA9IHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjcDItZ2FtZS1zY29yZScpO1xuICAgICAgICB0aGlzLnRpZXNTY29yZSA9IHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjZ2FtZS10aWVzJyk7XG4gICAgfVxufVxuLyogU2NvcmVCb2FyZCBjbGFzcyBlbmQgKi9cbi8qIFJlc3VsdE1vZGFsIGNsYXNzIHN0YXJ0ICovXG5jbGFzcyBSZXN1bHRNb2RhbCB7XG4gICAgY29uc3RydWN0b3IoZ2FtZVF1aXRIYW5kbGluZywgZ2FtZUNvbnRpbnVlSGFuZGxpbmcpIHtcbiAgICAgICAgdGhpcy5nYW1lUXVpdEhhbmRsaW5nID0gZ2FtZVF1aXRIYW5kbGluZztcbiAgICAgICAgdGhpcy5nYW1lQ29udGludWVIYW5kbGluZyA9IGdhbWVDb250aW51ZUhhbmRsaW5nO1xuICAgICAgICAvKiBoYW5kbGVycyAqL1xuICAgICAgICB0aGlzLmhhbmRsZUNvbnRpbnVlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5nYW1lQ29udGludWVIYW5kbGluZygpO1xuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFuZGxlUXVpdCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgdGhpcy5nYW1lUXVpdEhhbmRsaW5nKCk7XG4gICAgICAgIH07XG4gICAgICAgIC8qIGhhbmRsZXJzIGVuZCAqL1xuICAgICAgICAvKiB2aWV3IHVwZGF0ZXMgKi9cbiAgICAgICAgdGhpcy5zaG93ID0gKHdpbm5lciA9IG51bGwpID0+IHtcbiAgICAgICAgICAgIHRoaXMubW9kYWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJlc3VsdCh3aW5uZXIpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhpZGUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnVwZGF0ZVJlc3VsdCA9ICh3aW5uZXIpID0+IHtcbiAgICAgICAgICAgIGlmICh3aW5uZXIgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGllUmVzdWx0KCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5V2lubmVyUmVzdWx0KHdpbm5lcik7XG4gICAgICAgICAgICB0aGlzLnF1aXRCdXR0b24uZm9jdXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kaXNwbGF5VGllUmVzdWx0ID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5tb2RhbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtd2lubmVyJywgJ3RpZScpO1xuICAgICAgICAgICAgdGhpcy5tb2RhbEhlYWRpbmcuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICB0aGlzLm1vZGFsSGVhZGluZy5pbm5lclRleHQgPSAnUm91bmQgdGllZCc7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZGlzcGxheVdpbm5lclJlc3VsdCA9ICh3aW5uZXIpID0+IHtcbiAgICAgICAgICAgIHRoaXMubW9kYWwuc2V0QXR0cmlidXRlKCdkYXRhLXdpbm5lcicsIHdpbm5lci5nZXRNYXJrKCkpO1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRoaXMuZ2V0Um91bmRNZXNzYWdlKHdpbm5lci5nZXROYW1lKCkpO1xuICAgICAgICAgICAgdGhpcy5tb2RhbE1lc3NhZ2UuaW5uZXJUZXh0ID0gbWVzc2FnZTtcbiAgICAgICAgICAgIHRoaXMuc2V0UmVzdWx0SGVhZGluZyh3aW5uZXIpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldFJlc3VsdEhlYWRpbmcgPSAod2lubmVyKSA9PiB7XG4gICAgICAgICAgICAvKiBjbGVhciBoZWFkaW5nIGJlZm9yZSBzZXR0aW5nIG1lc3NhZ2UgKi9cbiAgICAgICAgICAgIHRoaXMubW9kYWxIZWFkaW5nLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgY29uc3QgbWFyayA9IHdpbm5lci5nZXRNYXJrKCk7XG4gICAgICAgICAgICAvKiB3aW5uaW5nIG1hcmsgaWNvbiAqL1xuICAgICAgICAgICAgY29uc3QgaW1nRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgaW1nRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3NyYycsIGAuL2Rpc3QvYXNzZXRzL2ljb24tJHttYXJrfS5zdmdgKTtcbiAgICAgICAgICAgIGltZ0VsZW1lbnQuc2V0QXR0cmlidXRlKCdhbHQnLCAnJyk7XG4gICAgICAgICAgICAvKiBoaWRkZW4gbWFyayBmb3Igc2NyZWVuIHJlYWRlcnMgKi9cbiAgICAgICAgICAgIGNvbnN0IGhpZGRlbk1hcmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICBoaWRkZW5NYXJrLmNsYXNzTGlzdC5hZGQoJ3Zpc3VhbGx5LWhpZGRlbicpO1xuICAgICAgICAgICAgaGlkZGVuTWFyay5pbm5lclRleHQgPSBtYXJrO1xuICAgICAgICAgICAgLyogbWVzc2FnZSBhZnRlciBpbWFnZSAqL1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZVRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgndGFrZXMgdGhlIHJvdW5kJyk7XG4gICAgICAgICAgICAvKiBzcGFuIGNvbnRhaW5lciBmb3IgaGlkZGVuIG1hcmsgYW5kIG1lc3NhZ2UgdGV4dCAqL1xuICAgICAgICAgICAgY29uc3QgaGVhZGluZ1NwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICBoZWFkaW5nU3Bhbi5hcHBlbmRDaGlsZChoaWRkZW5NYXJrKTtcbiAgICAgICAgICAgIGhlYWRpbmdTcGFuLmFwcGVuZENoaWxkKG1lc3NhZ2VUZXh0KTtcbiAgICAgICAgICAgIHRoaXMubW9kYWxIZWFkaW5nLmFwcGVuZENoaWxkKGltZ0VsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5tb2RhbEhlYWRpbmcuYXBwZW5kQ2hpbGQoaGVhZGluZ1NwYW4pO1xuICAgICAgICB9O1xuICAgICAgICAvKiB2aWV3IHVwZGF0ZXMgZW5kICovXG4gICAgICAgIC8qIGhlbHBlcnMgKi9cbiAgICAgICAgdGhpcy5nZXRSb3VuZE1lc3NhZ2UgPSAocGxheWVyTmFtZSkgPT4ge1xuICAgICAgICAgICAgbGV0IG1lc3NhZ2U7XG4gICAgICAgICAgICBzd2l0Y2ggKHBsYXllck5hbWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdwMSc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAnUGxheWVyIDEgd2lucyEnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdwMic6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAnUGxheWVyIDIgd2lucyEnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd5b3UnOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gJ1lvdSB3b24hJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3B1JzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9ICdPaCBubywgeW91IGxvc3QuLi4nO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5tb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNnYW1lLXJlc3VsdC1tb2RhbCcpO1xuICAgICAgICB0aGlzLm1vZGFsTWVzc2FnZSA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignLm1vZGFsX19tZXNzYWdlJyk7XG4gICAgICAgIHRoaXMubW9kYWxIZWFkaW5nID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2hlYWRpbmcnKTtcbiAgICAgICAgLyogcXVpdCBidXR0b24gKi9cbiAgICAgICAgdGhpcy5xdWl0QnV0dG9uID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCdidXR0b25bZGF0YS1hY3Rpb249XCJxdWl0XCJdJyk7XG4gICAgICAgIHRoaXMucXVpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlUXVpdCk7XG4gICAgICAgIC8qIGNvbnRpbnVlIGJ1dHRvbiAqL1xuICAgICAgICB0aGlzLmNvbnRpbnVlQnV0dG9uID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCdidXR0b25bZGF0YS1hY3Rpb249XCJjb250aW51ZVwiXScpO1xuICAgICAgICB0aGlzLmNvbnRpbnVlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVDb250aW51ZSk7XG4gICAgfVxufVxuLyogUmVzdWx0TW9kYWwgY2xhc3MgZW5kICovXG4vKiBSZXN0YXJ0TW9kYWwgY2xhc3Mgc3RhcnQgKi9cbmNsYXNzIFJlc3RhcnRNb2RhbCB7XG4gICAgY29uc3RydWN0b3IoZ2FtZVJlc3RhcnRIYW5kbGluZywgY2FuY2VsU3VwcG9ydCkge1xuICAgICAgICB0aGlzLmdhbWVSZXN0YXJ0SGFuZGxpbmcgPSBnYW1lUmVzdGFydEhhbmRsaW5nO1xuICAgICAgICB0aGlzLmNhbmNlbFN1cHBvcnQgPSBjYW5jZWxTdXBwb3J0O1xuICAgICAgICAvKiBoYW5kbGVycyAqL1xuICAgICAgICB0aGlzLmhhbmRsZUNhbmNlbCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgdGhpcy5jYW5jZWxTdXBwb3J0KCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFuZGxlUmVzdGFydCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZ2FtZVJlc3RhcnRIYW5kbGluZygpO1xuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIH07XG4gICAgICAgIC8qIGhhbmRsZXJzIGVuZCAqL1xuICAgICAgICAvKiB2aWV3IHVwZGF0ZXMgKi9cbiAgICAgICAgdGhpcy5zaG93ID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5tb2RhbC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsQnV0dG9uLmZvY3VzKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGlkZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2FtZS1yZXNldC1tb2RhbCcpO1xuICAgICAgICAvKiBjYW5jZWwgYnV0dG9uICovXG4gICAgICAgIHRoaXMuY2FuY2VsQnV0dG9uID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCdidXR0b25bZGF0YS1hY3Rpb249XCJjYW5jZWxcIl0nKTtcbiAgICAgICAgdGhpcy5jYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZUNhbmNlbCk7XG4gICAgICAgIC8qIHJlc3RhcnQgYnV0dG9uICovXG4gICAgICAgIHRoaXMucmVzdGFydEJ1dHRvbiA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignYnV0dG9uW2RhdGEtYWN0aW9uPVwicmVzdGFydFwiXScpO1xuICAgICAgICB0aGlzLnJlc3RhcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZVJlc3RhcnQpO1xuICAgIH1cbn1cbi8qIFJlc3RhcnRNb2RhbCBjbGFzcyBzdGFydCAqL1xuLyogY2xhc3NlcyBlbmQgKi9cbi8qIGdhbWUgb2JqZWN0cyAqL1xuY29uc3QgdGljVGFjVG9lR2FtZSA9IG5ldyBHYW1lKCk7XG4vKiBnYW1lIG9iamVjdHMgZW5kICovXG4iXX0=
