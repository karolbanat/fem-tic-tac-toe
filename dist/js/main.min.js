"use strict";function _createForOfIteratorHelper(e,t){var r,n,i,a,o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return n=!(r=!0),{s:function(){o=o.call(e)},n:function(){var e=o.next();return r=e.done,e},e:function(e){n=!0,i=e},f:function(){try{r||null==o.return||o.return()}finally{if(n)throw i}}};if(Array.isArray(e)||(o=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return o&&(e=o),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var r;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Game=_createClass(function e(t,r){var i=this;_classCallCheck(this,e),this.ties=0,this.gameCount=0,this.turnCount=0,this.init=function(e,t){var r="x"===t?"o":"x",n="singleplayer"===e?"you":"p1",e="singleplayer"===e?"cpu":"p2";"x"===t?(i.xPlayer=new Player(n,t),i.oPlayer=new Player(e,r)):(i.xPlayer=new Player(e,r),i.oPlayer=new Player(n,t)),i.playerQueue=[i.xPlayer,i.oPlayer],i.gameContainer.classList.remove("hidden"),i.scoreBoard.init(i.xPlayer,i.oPlayer,i.ties),i.gameBoard.init()},this.onFieldClick=function(e){var e=e.target,t=parseInt(e.dataset.row),e=parseInt(e.dataset.column);i.makeMove(t,e)},this.getCurrentPlayerMark=function(){return i.getCurrentPlayer().getMark()},this.getCurrentPlayer=function(){return i.playerQueue[i.turnCount%2]},this.makeMove=function(e,t){i.gameBoard.isFieldChecked(e,t)||(i.gameBoard.checkField(i.getCurrentPlayer().getMark(),e,t),i.increaseTurnCount())},this.increaseTurnCount=function(){return++i.turnCount},this.gameMenu=new GameMenu(t,this.init),this.gameMenu.init(),this.gameContainer=document.querySelector(r),this.scoreBoard=new ScoreBoard("#score-board"),this.gameBoard=new GameBoard("#game-board",this.onFieldClick,this.getCurrentPlayerMark)}),GameMenu=_createClass(function e(t,r){var n=this;_classCallCheck(this,e),this.gameInit=r,this.init=function(){n.formSubmitButtons.forEach(function(e){return e.addEventListener("click",n.handleMenuSubmitButton)})},this.handleMenuSubmitButton=function(e){var t;e.preventDefault(),n.isAnyOptionSelected()?(n.errorMsg.classList.remove("visible"),n.errorMsg.innerText="",e=e.target.dataset.mode,t=n.getCheckedOptionMark(),n.gameMenu.classList.add("hidden"),n.gameInit(e,t)):(n.errorMsg.classList.add("visible"),n.errorMsg.innerText="Please select mark for player 1")},this.isAnyOptionSelected=function(){return Array.from(n.formOptions).some(function(e){return e.checked})},this.getCheckedOptionMark=function(){var e,t=_createForOfIteratorHelper(n.formOptions);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(r.checked)return r.dataset.mark}}catch(e){t.e(e)}finally{t.f()}return""},this.gameMenu=document.querySelector(t),this.menuForm=this.gameMenu.querySelector("form"),this.formOptions=this.menuForm.querySelectorAll('input[type="radio"]'),this.errorMsg=this.menuForm.querySelector('[role="alert"]'),this.formSubmitButtons=this.menuForm.querySelectorAll('button[type="submit"]')}),ScoreBoard=_createClass(function e(t){var n=this;_classCallCheck(this,e),this.init=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;n.p1Label.innerText=e.toString(),n.p2Label.innerText=t.toString(),n.updateScore(e,t,r)},this.updateScore=function(e,t,r){n.p1Score.innerText=e.getScore().toString(),n.p2Score.innerText=t.getScore().toString(),n.tiesScore.innerText=r.toString()},this.scoreBoardContainer=document.querySelector(t),this.p1Label=this.scoreBoardContainer.querySelector("#p1-game-name"),this.p1Score=this.scoreBoardContainer.querySelector("#p1-game-score"),this.p2Label=this.scoreBoardContainer.querySelector("#p2-game-name"),this.p2Score=this.scoreBoardContainer.querySelector("#p2-game-score"),this.tiesScore=this.scoreBoardContainer.querySelector("#game-ties")}),GameBoard=_createClass(function e(t,r,n){var i=this;_classCallCheck(this,e),this.onFieldClick=r,this.getCurrentMark=n,this.BOARD_SIZE=3,this.board=[[],[],[]],this.init=function(){for(var e=i.boardElement.querySelectorAll(".game-board__field"),t=0;t<i.board.length;t++)for(var r=0;r<i.BOARD_SIZE;r++)i.board[t].push(new Field(t,r,e[r+t*i.BOARD_SIZE],i.onFieldClick,i.getCurrentMark))},this.checkField=function(e,t,r){t<i.board.length&&r<i.board[0].length&&i.board[t][r].check(e)},this.isFieldChecked=function(e,t){return i.board[e][t].isChecked()},this.boardElement=document.querySelector(t)}),Field=_createClass(function e(t,r,n,i,a){var o=this;_classCallCheck(this,e),this.row=t,this.column=r,this.fieldElement=n,this.gameOnClickHandler=i,this.getCurrentMark=a,this.mark=null,this.handleHover=function(){var e=o.getCurrentMark();o.fieldElement.setAttribute("data-current-player",e)},this.handleBlur=function(){o.fieldElement.removeAttribute("data-current-player")},this.insertImages=function(){var e=document.createElement("img"),t=(e.setAttribute("src","./dist/assets/icon-o.svg"),e.setAttribute("alt",""),e.setAttribute("data-name","o-icon"),document.createElement("img")),r=(t.setAttribute("src","./dist/assets/icon-o-outline.svg"),t.setAttribute("alt",""),t.setAttribute("data-name","o-outline-icon"),document.createElement("img")),n=(r.setAttribute("src","./dist/assets/icon-x.svg"),r.setAttribute("alt",""),r.setAttribute("data-name","x-icon"),document.createElement("img"));n.setAttribute("src","./dist/assets/icon-x-outline.svg"),n.setAttribute("alt",""),n.setAttribute("data-name","x-outline-icon"),o.fieldElement.appendChild(e),o.fieldElement.appendChild(r),o.fieldElement.appendChild(t),o.fieldElement.appendChild(n)},this.check=function(e){o.mark=e,o.fieldElement.setAttribute("aria-label","Row ".concat(o.row+1,", column ").concat(o.column+1,", ").concat(o.mark," mark")),o.fieldElement.setAttribute("data-mark",e)},this.isChecked=function(){return null!==o.mark},this.getMark=function(){return o.mark},this.fieldElement&&(this.fieldElement.addEventListener("click",this.gameOnClickHandler),this.fieldElement.addEventListener("mouseover",this.handleHover),this.fieldElement.addEventListener("focusin",this.handleHover),this.fieldElement.addEventListener("mouseout",this.handleBlur),this.fieldElement.addEventListener("focusout",this.handleBlur),this.fieldElement.dataset.row=this.row.toString(),this.fieldElement.dataset.column=this.column.toString(),this.fieldElement.setAttribute("aria-label","Row ".concat(this.row+1,", column ").concat(this.column+1,", empty field")),this.insertImages())}),Player=_createClass(function e(t,r){var n=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck(this,e),this.name=t,this.mark=r,this.score=i,this.toString=function(){return"".concat(n.mark," (").concat(n.name,")")},this.getMark=function(){return n.mark},this.getScore=function(){return n.score},this.updateScore=function(){return++n.score}}),ticTacToeGame=new Game("#game-menu","#tic-tac-toe-game");
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4udHMiXSwibmFtZXMiOlsiR2FtZSIsIl9jcmVhdGVDbGFzcyIsImdhbWVNZW51SWQiLCJnYW1lQ29udGFpbmVySWQiLCJfdGhpcyIsInRoaXMiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aWVzIiwiZ2FtZUNvdW50IiwidHVybkNvdW50IiwiaW5pdCIsIm1vZGUiLCJwMU1hcmsiLCJwMk1hcmsiLCJwMUxhYmVsIiwicDJMYWJlbCIsInhQbGF5ZXIiLCJQbGF5ZXIiLCJvUGxheWVyIiwicGxheWVyUXVldWUiLCJnYW1lQ29udGFpbmVyIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwic2NvcmVCb2FyZCIsImdhbWVCb2FyZCIsIm9uRmllbGRDbGljayIsImV2IiwiZmllbGRCdXR0b24iLCJ0YXJnZXQiLCJyb3ciLCJwYXJzZUludCIsImRhdGFzZXQiLCJjb2x1bW4iLCJtYWtlTW92ZSIsImdldEN1cnJlbnRQbGF5ZXJNYXJrIiwiZ2V0Q3VycmVudFBsYXllciIsImdldE1hcmsiLCJpc0ZpZWxkQ2hlY2tlZCIsImNoZWNrRmllbGQiLCJpbmNyZWFzZVR1cm5Db3VudCIsImdhbWVNZW51IiwiR2FtZU1lbnUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJTY29yZUJvYXJkIiwiR2FtZUJvYXJkIiwiZ2FtZUluaXQiLCJfdGhpczIiLCJmb3JtU3VibWl0QnV0dG9ucyIsImZvckVhY2giLCJidG4iLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlTWVudVN1Ym1pdEJ1dHRvbiIsInByZXZlbnREZWZhdWx0IiwiaXNBbnlPcHRpb25TZWxlY3RlZCIsImVycm9yTXNnIiwiaW5uZXJUZXh0IiwiZ2FtZU1vZGUiLCJnZXRDaGVja2VkT3B0aW9uTWFyayIsImFkZCIsIkFycmF5IiwiZnJvbSIsImZvcm1PcHRpb25zIiwic29tZSIsIm9wdGlvbiIsImNoZWNrZWQiLCJfc3RlcCIsIl9pdGVyYXRvciIsIl9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIiwicyIsIm4iLCJkb25lIiwidmFsdWUiLCJtYXJrIiwiZXJyIiwiZSIsImYiLCJtZW51Rm9ybSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzY29yZUJvYXJkSWQiLCJfdGhpczMiLCJwMSIsInAyIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwidG9TdHJpbmciLCJ1cGRhdGVTY29yZSIsInAxU2NvcmUiLCJnZXRTY29yZSIsInAyU2NvcmUiLCJ0aWVzU2NvcmUiLCJzY29yZUJvYXJkQ29udGFpbmVyIiwiZ2FtZUJvYXJkSWQiLCJnZXRDdXJyZW50TWFyayIsIl90aGlzNCIsIkJPQVJEX1NJWkUiLCJib2FyZCIsImJvYXJkRmllbGRFbGVtZW50cyIsImJvYXJkRWxlbWVudCIsInB1c2giLCJGaWVsZCIsImNoZWNrIiwiaXNDaGVja2VkIiwiZmllbGRFbGVtZW50IiwiZ2FtZU9uQ2xpY2tIYW5kbGVyIiwiX3RoaXM1IiwiaGFuZGxlSG92ZXIiLCJjdXJyZW50UGxheWVyTWFyayIsInNldEF0dHJpYnV0ZSIsImhhbmRsZUJsdXIiLCJyZW1vdmVBdHRyaWJ1dGUiLCJpbnNlcnRJbWFnZXMiLCJvSW1hZ2UiLCJjcmVhdGVFbGVtZW50Iiwib091dGxpbmVJbWFnZSIsInhJbWFnZSIsInhPdXRsaW5lSW1hZ2UiLCJhcHBlbmRDaGlsZCIsImNvbmNhdCIsIm5hbWUiLCJfdGhpczYiLCJzY29yZSIsInRpY1RhY1RvZUdhbWUiXSwibWFwcGluZ3MiOiI2akRBQ0EsSUFDTUEsS0FBSUMsYUFZVCxTQUFBRCxFQUFZRSxFQUFvQkMsR0FBdUIsSUFBQUMsRUFBQUMsS0FBQUMsZ0JBQUFELEtBQUFMLENBQUEsRUFKL0NLLEtBQUFFLEtBQWUsRUFDZkYsS0FBQUcsVUFBb0IsRUFDcEJILEtBQUFJLFVBQW9CLEVBVTVCSixLQUFBSyxLQUFPLFNBQUNDLEVBQWNDLEdBQ3JCLElBQU1DLEVBQTRCLE1BQVhELEVBQWlCLElBQU0sSUFDeENFLEVBQTJCLGlCQUFUSCxFQUEwQixNQUFRLEtBQ3BESSxFQUEyQixpQkFBVEosRUFBMEIsTUFB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QWF6RSxRQUFRRixJQUFNeEIsS0FBS3dCLElBQUl5RCxTQUFRLEVBQ2pEakYsS0FBS21HLGFBQWF6RSxRQUFRQyxPQUFTM0IsS0FBSzJCLE9BQU9zRCxTQUFRLEVBQ3ZEakYsS0FBS21HLGFBQWFLLGFBQWEsYUFBWSxPQUFBVSxPQUFTbEgsS0FBS3dCLElBQU0sRUFBQyxXQUFBLEVBQUEwRixPQUFZbEgsS0FBSzJCLE9BQVMsRUFBQyxlQUFBLENBQUEsRUFFM0YzQixLQUFLMkcsYUFBWSxFQUVuQixDQUFDLEVBb0RJL0YsT0FBTWhCLGFBQ1gsU0FBQWdCLEVBQW9CdUcsRUFBc0IvQyxHQUF1QyxJQUFBZ0QsRUFBQXBILEtBQWpCcUgsRUFBQSxFQUFBdkMsVUFBQUMsUUFBQUMsS0FBQUEsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQWdCLEVBQUM3RSxnQkFBQUQsS0FBQVksQ0FBQSxFQUE3RFosS0FBQW1ILEtBQUFBLEVBQXNCbkgsS0FBQW9FLEtBQUFBLEVBQXNCcEUsS0FBQXFILE1BQUFBLEVBRWhFckgsS0FBQWlGLFNBQVcsV0FBQSxNQUFBLEdBQUFpQyxPQUFpQkUsRUFBS2hELEtBQUksSUFBQSxFQUFBOEMsT0FBS0UsRUFBS0QsS0FBSSxHQUFBLENBQUEsRUFFbkRuSCxLQUFBK0IsUUFBVSxXQUFBLE9BQWNxRixFQUFLaEQsSUFBSSxFQUVqQ3BFLEtBQUFvRixTQUFXLFdBQUEsT0FBY2dDLEVBQUtDLEtBQUssRUFFbkNySCxLQUFBa0YsWUFBYyxXQUFBLE1BQWMsRUFBRWtDLEVBQUtDLEtBQUssQ0FSNEMsQ0FBQyxFQWNoRkMsY0FBc0IsSUFBSTNILEtBQUssYUFBYyxtQkFBbUIiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBjbGFzc2VzICovXHJcbi8qIEdhbWUgY2xhc3Mgc3RhcnQgKi9cclxuY2xhc3MgR2FtZSB7XHJcblx0cHJpdmF0ZSBnYW1lTWVudTogR2FtZU1lbnU7XHJcblx0cHJpdmF0ZSBnYW1lQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIGdhbWVCb2FyZDogR2FtZUJvYXJkO1xyXG5cdHByaXZhdGUgc2NvcmVCb2FyZDogU2NvcmVCb2FyZDtcclxuXHRwcml2YXRlIHhQbGF5ZXI6IFBsYXllcjtcclxuXHRwcml2YXRlIG9QbGF5ZXI6IFBsYXllcjtcclxuXHRwcml2YXRlIHBsYXllclF1ZXVlOiBbUGxheWVyLCBQbGF5ZXJdO1xyXG5cdHByaXZhdGUgdGllczogbnVtYmVyID0gMDtcclxuXHRwcml2YXRlIGdhbWVDb3VudDogbnVtYmVyID0gMDtcclxuXHRwcml2YXRlIHR1cm5Db3VudDogbnVtYmVyID0gMDtcclxuXHJcblx0Y29uc3RydWN0b3IoZ2FtZU1lbnVJZDogc3RyaW5nLCBnYW1lQ29udGFpbmVySWQ6IHN0cmluZykge1xyXG5cdFx0dGhpcy5nYW1lTWVudSA9IG5ldyBHYW1lTWVudShnYW1lTWVudUlkLCB0aGlzLmluaXQpO1xyXG5cdFx0dGhpcy5nYW1lTWVudS5pbml0KCk7XHJcblx0XHR0aGlzLmdhbWVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGdhbWVDb250YWluZXJJZCk7XHJcblx0XHR0aGlzLnNjb3JlQm9hcmQgPSBuZXcgU2NvcmVCb2FyZCgnI3Njb3JlLWJvYXJkJyk7XHJcblx0XHR0aGlzLmdhbWVCb2FyZCA9IG5ldyBHYW1lQm9hcmQoJyNnYW1lLWJvYXJkJywgdGhpcy5vbkZpZWxkQ2xpY2ssIHRoaXMuZ2V0Q3VycmVudFBsYXllck1hcmspO1xyXG5cdH1cclxuXHJcblx0aW5pdCA9IChtb2RlOiBzdHJpbmcsIHAxTWFyazogc3RyaW5nKTogdm9pZCA9PiB7XHJcblx0XHRjb25zdCBwMk1hcms6IHN0cmluZyA9IHAxTWFyayA9PT0gJ3gnID8gJ28nIDogJ3gnO1xyXG5cdFx0Y29uc3QgcDFMYWJlbDogc3RyaW5nID0gbW9kZSA9PT0gJ3NpbmdsZXBsYXllcicgPyAneW91JyA6ICdwMSc7XHJcblx0XHRjb25zdCBwMkxhYmVsOiBzdHJpbmcgPSBtb2RlID09PSAnc2luZ2xlcGxheWVyJyA/ICdjcHUnIDogJ3AyJztcclxuXHJcblx0XHRpZiAocDFNYXJrID09PSAneCcpIHtcclxuXHRcdFx0dGhpcy54UGxheWVyID0gbmV3IFBsYXllcihwMUxhYmVsLCBwMU1hcmspO1xyXG5cdFx0XHR0aGlzLm9QbGF5ZXIgPSBuZXcgUGxheWVyKHAyTGFiZWwsIHAyTWFyayk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLnhQbGF5ZXIgPSBuZXcgUGxheWVyKHAyTGFiZWwsIHAyTWFyayk7XHJcblx0XHRcdHRoaXMub1BsYXllciA9IG5ldyBQbGF5ZXIocDFMYWJlbCwgcDFNYXJrKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnBsYXllclF1ZXVlID0gW3RoaXMueFBsYXllciwgdGhpcy5vUGxheWVyXTtcclxuXHRcdHRoaXMuZ2FtZUNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuXHRcdHRoaXMuc2NvcmVCb2FyZC5pbml0KHRoaXMueFBsYXllciwgdGhpcy5vUGxheWVyLCB0aGlzLnRpZXMpO1xyXG5cdFx0dGhpcy5nYW1lQm9hcmQuaW5pdCgpO1xyXG5cdH07XHJcblxyXG5cdG9uRmllbGRDbGljayA9IChldjogRXZlbnQpOiB2b2lkID0+IHtcclxuXHRcdGNvbnN0IGZpZWxkQnV0dG9uID0gZXYudGFyZ2V0IGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5cdFx0Y29uc3Qgcm93OiBudW1iZXIgPSBwYXJzZUludChmaWVsZEJ1dHRvbi5kYXRhc2V0LnJvdyk7XHJcblx0XHRjb25zdCBjb2x1bW46IG51bWJlciA9IHBhcnNlSW50KGZpZWxkQnV0dG9uLmRhdGFzZXQuY29sdW1uKTtcclxuXHRcdHRoaXMubWFrZU1vdmUocm93LCBjb2x1bW4pO1xyXG5cdH07XHJcblxyXG5cdGdldEN1cnJlbnRQbGF5ZXJNYXJrID0gKCk6IHN0cmluZyA9PiB7XHJcblx0XHRyZXR1cm4gdGhpcy5nZXRDdXJyZW50UGxheWVyKCkuZ2V0TWFyaygpO1xyXG5cdH07XHJcblxyXG5cdGdldEN1cnJlbnRQbGF5ZXIgPSAoKTogUGxheWVyID0+IHtcclxuXHRcdHJldHVybiB0aGlzLnBsYXllclF1ZXVlW3RoaXMudHVybkNvdW50ICUgMl07XHJcblx0fTtcclxuXHJcblx0bWFrZU1vdmUgPSAocm93OiBudW1iZXIsIGNvbHVtbjogbnVtYmVyKTogdm9pZCA9PiB7XHJcblx0XHRpZiAodGhpcy5nYW1lQm9hcmQuaXNGaWVsZENoZWNrZWQocm93LCBjb2x1bW4pKSByZXR1cm47XHJcblxyXG5cdFx0dGhpcy5nYW1lQm9hcmQuY2hlY2tGaWVsZCh0aGlzLmdldEN1cnJlbnRQbGF5ZXIoKS5nZXRNYXJrKCksIHJvdywgY29sdW1uKTtcclxuXHRcdHRoaXMuaW5jcmVhc2VUdXJuQ291bnQoKTtcclxuXHR9O1xyXG5cclxuXHRpbmNyZWFzZVR1cm5Db3VudCA9ICgpOiBudW1iZXIgPT4ge1xyXG5cdFx0cmV0dXJuICsrdGhpcy50dXJuQ291bnQ7XHJcblx0fTtcclxufVxyXG4vKiBHYW1lIGNsYXNzIGVuZCAqL1xyXG5cclxuLyogR2FtZU1lbnUgY2xhc3Mgc3RhcnQgKi9cclxuY2xhc3MgR2FtZU1lbnUge1xyXG5cdHByaXZhdGUgZ2FtZU1lbnU6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgbWVudUZvcm06IEhUTUxGb3JtRWxlbWVudDtcclxuXHRwcml2YXRlIGZvcm1PcHRpb25zOiBOb2RlTGlzdE9mPEhUTUxJbnB1dEVsZW1lbnQ+O1xyXG5cdHByaXZhdGUgZXJyb3JNc2c6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgZm9ybVN1Ym1pdEJ1dHRvbnM6IE5vZGVMaXN0T2Y8SFRNTEJ1dHRvbkVsZW1lbnQ+O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihnYW1lTWVudUlkOiBzdHJpbmcsIHByaXZhdGUgZ2FtZUluaXQ6IChtb2RlOiBzdHJpbmcsIHAxTWFyazogc3RyaW5nKSA9PiB2b2lkKSB7XHJcblx0XHR0aGlzLmdhbWVNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihnYW1lTWVudUlkKTtcclxuXHRcdHRoaXMubWVudUZvcm0gPSB0aGlzLmdhbWVNZW51LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcclxuXHRcdHRoaXMuZm9ybU9wdGlvbnMgPSB0aGlzLm1lbnVGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXScpO1xyXG5cdFx0dGhpcy5lcnJvck1zZyA9IHRoaXMubWVudUZvcm0ucXVlcnlTZWxlY3RvcignW3JvbGU9XCJhbGVydFwiXScpO1xyXG5cdFx0dGhpcy5mb3JtU3VibWl0QnV0dG9ucyA9IHRoaXMubWVudUZvcm0ucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKTtcclxuXHR9XHJcblxyXG5cdGluaXQgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLmZvcm1TdWJtaXRCdXR0b25zLmZvckVhY2goYnRuID0+IGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlTWVudVN1Ym1pdEJ1dHRvbikpO1xyXG5cdH07XHJcblxyXG5cdGhhbmRsZU1lbnVTdWJtaXRCdXR0b24gPSAoZXY6IEV2ZW50KTogdm9pZCA9PiB7XHJcblx0XHRldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0aWYgKCF0aGlzLmlzQW55T3B0aW9uU2VsZWN0ZWQoKSkge1xyXG5cdFx0XHR0aGlzLmVycm9yTXNnLmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcclxuXHRcdFx0dGhpcy5lcnJvck1zZy5pbm5lclRleHQgPSAnUGxlYXNlIHNlbGVjdCBtYXJrIGZvciBwbGF5ZXIgMSc7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuZXJyb3JNc2cuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xyXG5cdFx0XHR0aGlzLmVycm9yTXNnLmlubmVyVGV4dCA9ICcnO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IHN1Ym1pdEJ0bjogSFRNTEJ1dHRvbkVsZW1lbnQgPSBldi50YXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblx0XHRjb25zdCBnYW1lTW9kZTogc3RyaW5nID0gc3VibWl0QnRuLmRhdGFzZXQubW9kZTtcclxuXHRcdGNvbnN0IHAxTWFyazogc3RyaW5nID0gdGhpcy5nZXRDaGVja2VkT3B0aW9uTWFyaygpO1xyXG5cdFx0dGhpcy5nYW1lTWVudS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuXHRcdHRoaXMuZ2FtZUluaXQoZ2FtZU1vZGUsIHAxTWFyayk7IC8vIG1ldGhvZCBmcm9tIHRoZSBwYXJlbnQgR2FtZSBjbGFzc1xyXG5cdH07XHJcblxyXG5cdGlzQW55T3B0aW9uU2VsZWN0ZWQgPSAoKTogYm9vbGVhbiA9PiB7XHJcblx0XHRyZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmZvcm1PcHRpb25zKS5zb21lKG9wdGlvbiA9PiBvcHRpb24uY2hlY2tlZCk7XHJcblx0fTtcclxuXHJcblx0Z2V0Q2hlY2tlZE9wdGlvbk1hcmsgPSAoKTogc3RyaW5nID0+IHtcclxuXHRcdGZvciAoY29uc3Qgb3B0aW9uIG9mIHRoaXMuZm9ybU9wdGlvbnMpIHtcclxuXHRcdFx0aWYgKG9wdGlvbi5jaGVja2VkKSByZXR1cm4gb3B0aW9uLmRhdGFzZXQubWFyaztcclxuXHRcdH1cclxuXHRcdHJldHVybiAnJztcclxuXHR9O1xyXG59XHJcbi8qIEdhbWVNZW51IGNsYXNzIGVuZCAqL1xyXG5cclxuLyogU2NvcmVCb2FyZCBjbGFzcyBzdGFydCAqL1xyXG5jbGFzcyBTY29yZUJvYXJkIHtcclxuXHRwcml2YXRlIHNjb3JlQm9hcmRDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgcDFMYWJlbDogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBwMVNjb3JlOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIHAyTGFiZWw6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgcDJTY29yZTogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSB0aWVzU2NvcmU6IEhUTUxFbGVtZW50O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihzY29yZUJvYXJkSWQ6IHN0cmluZykge1xyXG5cdFx0dGhpcy5zY29yZUJvYXJkQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzY29yZUJvYXJkSWQpO1xyXG5cdFx0dGhpcy5wMUxhYmVsID0gdGhpcy5zY29yZUJvYXJkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNwMS1nYW1lLW5hbWUnKTtcclxuXHRcdHRoaXMucDFTY29yZSA9IHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjcDEtZ2FtZS1zY29yZScpO1xyXG5cdFx0dGhpcy5wMkxhYmVsID0gdGhpcy5zY29yZUJvYXJkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNwMi1nYW1lLW5hbWUnKTtcclxuXHRcdHRoaXMucDJTY29yZSA9IHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjcDItZ2FtZS1zY29yZScpO1xyXG5cdFx0dGhpcy50aWVzU2NvcmUgPSB0aGlzLnNjb3JlQm9hcmRDb250YWluZXIucXVlcnlTZWxlY3RvcignI2dhbWUtdGllcycpO1xyXG5cdH1cclxuXHJcblx0aW5pdCA9IChwMTogUGxheWVyLCBwMjogUGxheWVyLCB0aWVzOiBudW1iZXIgPSAwKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnAxTGFiZWwuaW5uZXJUZXh0ID0gcDEudG9TdHJpbmcoKTtcclxuXHRcdHRoaXMucDJMYWJlbC5pbm5lclRleHQgPSBwMi50b1N0cmluZygpO1xyXG5cdFx0dGhpcy51cGRhdGVTY29yZShwMSwgcDIsIHRpZXMpO1xyXG5cdH07XHJcblxyXG5cdHVwZGF0ZVNjb3JlID0gKHAxOiBQbGF5ZXIsIHAyOiBQbGF5ZXIsIHRpZXM6IG51bWJlcik6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5wMVNjb3JlLmlubmVyVGV4dCA9IHAxLmdldFNjb3JlKCkudG9TdHJpbmcoKTtcclxuXHRcdHRoaXMucDJTY29yZS5pbm5lclRleHQgPSBwMi5nZXRTY29yZSgpLnRvU3RyaW5nKCk7XHJcblx0XHR0aGlzLnRpZXNTY29yZS5pbm5lclRleHQgPSB0aWVzLnRvU3RyaW5nKCk7XHJcblx0fTtcclxufVxyXG4vKiBTY29yZUJvYXJkIGNsYXNzIGVuZCAqL1xyXG5cclxuLyogR2FtZUJvYXJkIGNsYXNzIHN0YXJ0ICovXHJcbmNsYXNzIEdhbWVCb2FyZCB7XHJcblx0cHJpdmF0ZSBCT0FSRF9TSVpFOiBudW1iZXIgPSAzO1xyXG5cdHByaXZhdGUgYm9hcmRFbGVtZW50OiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIGJvYXJkOiBGaWVsZFtdW10gPSBbW10sIFtdLCBbXV07XHJcblxyXG5cdGNvbnN0cnVjdG9yKGdhbWVCb2FyZElkOiBzdHJpbmcsIHByaXZhdGUgb25GaWVsZENsaWNrOiAoZXY6IEV2ZW50KSA9PiB2b2lkLCBwcml2YXRlIGdldEN1cnJlbnRNYXJrOiAoKSA9PiBzdHJpbmcpIHtcclxuXHRcdHRoaXMuYm9hcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihnYW1lQm9hcmRJZCk7XHJcblx0fVxyXG5cclxuXHRpbml0ID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0Y29uc3QgYm9hcmRGaWVsZEVsZW1lbnRzOiBOb2RlTGlzdE9mPEhUTUxCdXR0b25FbGVtZW50PiA9IHRoaXMuYm9hcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5nYW1lLWJvYXJkX19maWVsZCcpO1xyXG5cdFx0Zm9yIChsZXQgcm93ID0gMDsgcm93IDwgdGhpcy5ib2FyZC5sZW5ndGg7IHJvdysrKSB7XHJcblx0XHRcdGZvciAobGV0IGNvbHVtbiA9IDA7IGNvbHVtbiA8IHRoaXMuQk9BUkRfU0laRTsgY29sdW1uKyspIHtcclxuXHRcdFx0XHR0aGlzLmJvYXJkW3Jvd10ucHVzaChcclxuXHRcdFx0XHRcdG5ldyBGaWVsZChcclxuXHRcdFx0XHRcdFx0cm93LFxyXG5cdFx0XHRcdFx0XHRjb2x1bW4sXHJcblx0XHRcdFx0XHRcdGJvYXJkRmllbGRFbGVtZW50c1tjb2x1bW4gKyByb3cgKiB0aGlzLkJPQVJEX1NJWkVdLFxyXG5cdFx0XHRcdFx0XHR0aGlzLm9uRmllbGRDbGljayxcclxuXHRcdFx0XHRcdFx0dGhpcy5nZXRDdXJyZW50TWFya1xyXG5cdFx0XHRcdFx0KVxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRjaGVja0ZpZWxkID0gKG1hcms6IHN0cmluZywgcm93OiBudW1iZXIsIGNvbHVtbjogbnVtYmVyKSA9PiB7XHJcblx0XHRpZiAocm93IDwgdGhpcy5ib2FyZC5sZW5ndGggJiYgY29sdW1uIDwgdGhpcy5ib2FyZFswXS5sZW5ndGgpIHtcclxuXHRcdFx0dGhpcy5ib2FyZFtyb3ddW2NvbHVtbl0uY2hlY2sobWFyayk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0aXNGaWVsZENoZWNrZWQgPSAocm93OiBudW1iZXIsIGNvbHVtbjogbnVtYmVyKTogYm9vbGVhbiA9PiB7XHJcblx0XHRyZXR1cm4gdGhpcy5ib2FyZFtyb3ddW2NvbHVtbl0uaXNDaGVja2VkKCk7XHJcblx0fTtcclxufVxyXG4vKiBHYW1lQm9hcmQgY2xhc3MgZW5kICovXHJcblxyXG4vKiBGaWVsZCBjbGFzcyBzdGFydCAqL1xyXG5jbGFzcyBGaWVsZCB7XHJcblx0cHJpdmF0ZSBtYXJrOiBzdHJpbmcgPSBudWxsO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdHByaXZhdGUgcm93OiBudW1iZXIsXHJcblx0XHRwcml2YXRlIGNvbHVtbjogbnVtYmVyLFxyXG5cdFx0cHJpdmF0ZSBmaWVsZEVsZW1lbnQ6IEhUTUxCdXR0b25FbGVtZW50LFxyXG5cdFx0cHJpdmF0ZSBnYW1lT25DbGlja0hhbmRsZXI6IChldjogRXZlbnQpID0+IHZvaWQsXHJcblx0XHRwcml2YXRlIGdldEN1cnJlbnRNYXJrOiAoKSA9PiBzdHJpbmdcclxuXHQpIHtcclxuXHRcdGlmICh0aGlzLmZpZWxkRWxlbWVudCkge1xyXG5cdFx0XHQvKiBjbGljayBoYW5kbGluZyAqL1xyXG5cdFx0XHR0aGlzLmZpZWxkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZ2FtZU9uQ2xpY2tIYW5kbGVyKTtcclxuXHRcdFx0LyogaG92ZXIvZm9jdXMgaW4gaGFuZGxpbmcgKi9cclxuXHRcdFx0dGhpcy5maWVsZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgdGhpcy5oYW5kbGVIb3Zlcik7XHJcblx0XHRcdHRoaXMuZmllbGRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCB0aGlzLmhhbmRsZUhvdmVyKTtcclxuXHRcdFx0LyogaG92ZXIvZm9jdXMgb3V0IGhhbmRsaW5nICovXHJcblx0XHRcdHRoaXMuZmllbGRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgdGhpcy5oYW5kbGVCbHVyKTtcclxuXHRcdFx0dGhpcy5maWVsZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCB0aGlzLmhhbmRsZUJsdXIpO1xyXG5cdFx0XHQvKiBzZXR0aW5nIGF0dHJpYnV0cyAqL1xyXG5cdFx0XHR0aGlzLmZpZWxkRWxlbWVudC5kYXRhc2V0LnJvdyA9IHRoaXMucm93LnRvU3RyaW5nKCk7XHJcblx0XHRcdHRoaXMuZmllbGRFbGVtZW50LmRhdGFzZXQuY29sdW1uID0gdGhpcy5jb2x1bW4udG9TdHJpbmcoKTtcclxuXHRcdFx0dGhpcy5maWVsZEVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgYFJvdyAke3RoaXMucm93ICsgMX0sIGNvbHVtbiAke3RoaXMuY29sdW1uICsgMX0sIGVtcHR5IGZpZWxkYCk7XHJcblxyXG5cdFx0XHR0aGlzLmluc2VydEltYWdlcygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aGFuZGxlSG92ZXIgPSAoKTogdm9pZCA9PiB7XHJcblx0XHRjb25zdCBjdXJyZW50UGxheWVyTWFyayA9IHRoaXMuZ2V0Q3VycmVudE1hcmsoKTtcclxuXHRcdHRoaXMuZmllbGRFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1jdXJyZW50LXBsYXllcicsIGN1cnJlbnRQbGF5ZXJNYXJrKTtcclxuXHR9O1xyXG5cclxuXHRoYW5kbGVCbHVyID0gKCkgPT4ge1xyXG5cdFx0dGhpcy5maWVsZEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWN1cnJlbnQtcGxheWVyJyk7XHJcblx0fTtcclxuXHJcblx0aW5zZXJ0SW1hZ2VzID0gKCkgPT4ge1xyXG5cdFx0Y29uc3Qgb0ltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcblx0XHRvSW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCAnLi9kaXN0L2Fzc2V0cy9pY29uLW8uc3ZnJyk7XHJcblx0XHRvSW1hZ2Uuc2V0QXR0cmlidXRlKCdhbHQnLCAnJyk7XHJcblx0XHRvSW1hZ2Uuc2V0QXR0cmlidXRlKCdkYXRhLW5hbWUnLCAnby1pY29uJyk7XHJcblx0XHRjb25zdCBvT3V0bGluZUltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcblx0XHRvT3V0bGluZUltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgJy4vZGlzdC9hc3NldHMvaWNvbi1vLW91dGxpbmUuc3ZnJyk7XHJcblx0XHRvT3V0bGluZUltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgJycpO1xyXG5cdFx0b091dGxpbmVJbWFnZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScsICdvLW91dGxpbmUtaWNvbicpO1xyXG5cdFx0Y29uc3QgeEltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcblx0XHR4SW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCAnLi9kaXN0L2Fzc2V0cy9pY29uLXguc3ZnJyk7XHJcblx0XHR4SW1hZ2Uuc2V0QXR0cmlidXRlKCdhbHQnLCAnJyk7XHJcblx0XHR4SW1hZ2Uuc2V0QXR0cmlidXRlKCdkYXRhLW5hbWUnLCAneC1pY29uJyk7XHJcblx0XHRjb25zdCB4T3V0bGluZUltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcblx0XHR4T3V0bGluZUltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgJy4vZGlzdC9hc3NldHMvaWNvbi14LW91dGxpbmUuc3ZnJyk7XHJcblx0XHR4T3V0bGluZUltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgJycpO1xyXG5cdFx0eE91dGxpbmVJbWFnZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScsICd4LW91dGxpbmUtaWNvbicpO1xyXG5cclxuXHRcdHRoaXMuZmllbGRFbGVtZW50LmFwcGVuZENoaWxkKG9JbWFnZSk7XHJcblx0XHR0aGlzLmZpZWxkRWxlbWVudC5hcHBlbmRDaGlsZCh4SW1hZ2UpO1xyXG5cdFx0dGhpcy5maWVsZEVsZW1lbnQuYXBwZW5kQ2hpbGQob091dGxpbmVJbWFnZSk7XHJcblx0XHR0aGlzLmZpZWxkRWxlbWVudC5hcHBlbmRDaGlsZCh4T3V0bGluZUltYWdlKTtcclxuXHR9O1xyXG5cclxuXHRjaGVjayA9IChtYXJrOiBzdHJpbmcpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMubWFyayA9IG1hcms7XHJcblx0XHR0aGlzLmZpZWxkRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBgUm93ICR7dGhpcy5yb3cgKyAxfSwgY29sdW1uICR7dGhpcy5jb2x1bW4gKyAxfSwgJHt0aGlzLm1hcmt9IG1hcmtgKTtcclxuXHRcdHRoaXMuZmllbGRFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1tYXJrJywgbWFyayk7XHJcblx0fTtcclxuXHJcblx0aXNDaGVja2VkID0gKCk6IGJvb2xlYW4gPT4ge1xyXG5cdFx0cmV0dXJuIHRoaXMubWFyayAhPT0gbnVsbDtcclxuXHR9O1xyXG5cclxuXHRnZXRNYXJrID0gKCk6IHN0cmluZyA9PiB7XHJcblx0XHRyZXR1cm4gdGhpcy5tYXJrO1xyXG5cdH07XHJcbn1cclxuLyogRmllbGQgY2xhc3MgZW5kICovXHJcblxyXG4vKiBQbGF5ZXIgY2xhc3Mgc3RhcnQgKi9cclxuY2xhc3MgUGxheWVyIHtcclxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIG5hbWU6IHN0cmluZywgcHJpdmF0ZSBtYXJrOiBzdHJpbmcsIHByaXZhdGUgc2NvcmU6IG51bWJlciA9IDApIHt9XHJcblxyXG5cdHRvU3RyaW5nID0gKCk6IHN0cmluZyA9PiBgJHt0aGlzLm1hcmt9ICgke3RoaXMubmFtZX0pYDtcclxuXHJcblx0Z2V0TWFyayA9ICgpOiBzdHJpbmcgPT4gdGhpcy5tYXJrO1xyXG5cclxuXHRnZXRTY29yZSA9ICgpOiBudW1iZXIgPT4gdGhpcy5zY29yZTtcclxuXHJcblx0dXBkYXRlU2NvcmUgPSAoKTogbnVtYmVyID0+ICsrdGhpcy5zY29yZTtcclxufVxyXG4vKiBQbGF5ZXIgY2xhc3MgZW5kICovXHJcbi8qIGNsYXNzZXMgZW5kICovXHJcblxyXG4vKiBnYW1lIG9iamVjdHMgKi9cclxuY29uc3QgdGljVGFjVG9lR2FtZTogR2FtZSA9IG5ldyBHYW1lKCcjZ2FtZS1tZW51JywgJyN0aWMtdGFjLXRvZS1nYW1lJyk7XHJcbi8qIGdhbWUgb2JqZWN0cyBlbmQgKi9cclxuIl19
