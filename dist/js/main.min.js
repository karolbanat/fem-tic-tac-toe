"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(r){var n=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(r);return _possibleConstructorReturn(this,n?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _createForOfIteratorHelper(e,t){var r,n,a,o,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return n=!(r=!0),{s:function(){i=i.call(e)},n:function(){var e=i.next();return r=e.done,e},e:function(e){n=!0,a=e},f:function(){try{r||null==i.return||i.return()}finally{if(n)throw a}}};if(Array.isArray(e)||(i=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var r;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Game=_createClass(function e(t,r){var a=this;_classCallCheck(this,e),this.ties=0,this.gameCount=0,this.turnCount=0,this.onFieldClick=function(e){var e=e.target,t=parseInt(e.dataset.row),e=parseInt(e.dataset.column);a.makeMove(t,e)},this.onGameContinue=function(){a.gameCount++,a.turnCount=0,a.gameBoard.clear(),a.scoreBoard.updateScore(a.xPlayer,a.oPlayer,a.ties),a.makeMoveCPU()},this.init=function(e,t){var r,n="x"===t?"o":"x",e="singleplayer"===e?(r="you",new CPUPlayer("cpu",n)):(r="p1",new Player("p2",n)),n=new Player(r,t);"x"===t?(a.xPlayer=n,a.oPlayer=e):(a.xPlayer=e,a.oPlayer=n),a.playerQueue=[a.xPlayer,a.oPlayer],a.gameContainer.classList.remove("hidden"),a.startGame()},this.startGame=function(){a.scoreBoard.init(a.xPlayer,a.oPlayer,a.ties),a.gameBoard.init(),a.turnIndicator.update(a.getCurrentPlayerMark()),a.makeMoveCPU()},this.getCurrentPlayerMark=function(){return a.getCurrentPlayer().getMark()},this.getCurrentPlayer=function(){return a.playerQueue[(a.gameCount+a.turnCount)%2]},this.makeMove=function(e,t){a.gameBoard.isFieldChecked(e,t)||(a.gameBoard.checkField(a.getCurrentPlayer().getMark(),e,t),a.afterMove())},this.afterMove=function(){null!==a.gameBoard.getWinningFields()?(a.gameResultModal.show(a.getCurrentPlayer()),a.getCurrentPlayer().updateScore()):a.gameBoard.isFull()?(a.gameResultModal.show(),a.ties++):(a.increaseTurnCount(),a.turnIndicator.update(a.getCurrentPlayerMark()),a.makeMoveCPU())},this.makeMoveCPU=function(){a.getCurrentPlayer()instanceof CPUPlayer&&a.makeMove.apply(a,_toConsumableArray(a.getCurrentPlayer().makeMove(a.gameBoard)))},this.increaseTurnCount=function(){return++a.turnCount},this.gameMenu=new GameMenu(t,this.init),this.gameMenu.init(),this.gameContainer=document.querySelector(r),this.scoreBoard=new ScoreBoard("#score-board"),this.gameBoard=new GameBoard("#game-board",this.onFieldClick,this.getCurrentPlayerMark),this.turnIndicator=new TurnIndicator,this.gameResultModal=new ResultModal(this.onGameContinue)}),GameMenu=_createClass(function e(t,r){var n=this;_classCallCheck(this,e),this.gameInit=r,this.init=function(){n.formSubmitButtons.forEach(function(e){return e.addEventListener("click",n.handleMenuSubmitButton)})},this.handleMenuSubmitButton=function(e){var t;e.preventDefault(),n.isAnyOptionSelected()?(n.errorMsg.classList.remove("visible"),n.errorMsg.innerText="",e=e.target.dataset.mode,t=n.getCheckedOptionMark(),n.gameMenu.classList.add("hidden"),n.gameInit(e,t)):(n.errorMsg.classList.add("visible"),n.errorMsg.innerText="Please select mark for player 1")},this.isAnyOptionSelected=function(){return Array.from(n.formOptions).some(function(e){return e.checked})},this.getCheckedOptionMark=function(){var e,t=_createForOfIteratorHelper(n.formOptions);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(r.checked)return r.dataset.mark}}catch(e){t.e(e)}finally{t.f()}return""},this.gameMenu=document.querySelector(t),this.menuForm=this.gameMenu.querySelector("form"),this.formOptions=this.menuForm.querySelectorAll('input[type="radio"]'),this.errorMsg=this.menuForm.querySelector('[role="alert"]'),this.formSubmitButtons=this.menuForm.querySelectorAll('button[type="submit"]')}),TurnIndicator=_createClass(function e(){var t=this;_classCallCheck(this,e),this.update=function(e){t.currentPlayerMarkElement.innerText=e,t.currentPlayerMarkIcon.src="./dist/assets/icon-".concat(e,".svg")},this.currentPlayerMarkElement=document.querySelector("#current-player-mark"),this.currentPlayerMarkIcon=document.querySelector("#current-player-mark-icon")}),ScoreBoard=_createClass(function e(t){var n=this;_classCallCheck(this,e),this.init=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;n.p1Label.innerText=e.toString(),n.p2Label.innerText=t.toString(),n.updateScore(e,t,r)},this.updateScore=function(e,t,r){n.p1Score.innerText=e.getScore().toString(),n.p2Score.innerText=t.getScore().toString(),n.tiesScore.innerText=r.toString()},this.scoreBoardContainer=document.querySelector(t),this.p1Label=this.scoreBoardContainer.querySelector("#p1-game-name"),this.p1Score=this.scoreBoardContainer.querySelector("#p1-game-score"),this.p2Label=this.scoreBoardContainer.querySelector("#p2-game-name"),this.p2Score=this.scoreBoardContainer.querySelector("#p2-game-score"),this.tiesScore=this.scoreBoardContainer.querySelector("#game-ties")}),ResultModal=_createClass(function e(t){var a=this;_classCallCheck(this,e),this.gameContinueHandling=t,this.handleContinue=function(e){a.gameContinueHandling(),a.hide()},this.show=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;a.modal.classList.add("active"),a.updateResult(e)},this.hide=function(){a.modal.classList.remove("active")},this.updateResult=function(e){null===e?a.displayTieResult():a.displayWinnerResult(e),a.quitButton.focus()},this.displayTieResult=function(){a.modal.setAttribute("data-winner","tie"),a.modalHeading.innerHTML="",a.modalHeading.innerText="Round tied"},this.displayWinnerResult=function(e){a.modal.setAttribute("data-winner",e.getMark());var t=a.getRoundMessage(e.getName());a.modalMessage.innerText=t,a.setResultHeading(e)},this.setResultHeading=function(e){a.modalHeading.innerHTML="";var e=e.getMark(),t=document.createElement("img"),r=(t.setAttribute("src","./dist/assets/icon-".concat(e,".svg")),t.setAttribute("alt",""),document.createElement("span")),e=(r.classList.add("visually-hidden"),r.innerText=e,document.createTextNode("takes the round")),n=document.createElement("span");n.appendChild(r),n.appendChild(e),a.modalHeading.appendChild(t),a.modalHeading.appendChild(n)},this.getRoundMessage=function(e){var t;switch(e){case"p1":t="Player 1 wins!";break;case"p2":t="Player 2 wins!";break;case"you":t="You won!";break;case"cpu":t="Oh no, you lost...";break;default:t=""}return t},this.modal=document.querySelector("#game-result-modal"),this.modalMessage=this.modal.querySelector(".modal__message"),this.modalHeading=this.modal.querySelector(".modal__heading"),this.quitButton=this.modal.querySelector('button[data-action="quit"]'),this.continueButton=this.modal.querySelector('button[data-action="continue"]'),this.continueButton.addEventListener("click",this.handleContinue)}),GameBoard=_createClass(function e(t,r,n){var a=this;_classCallCheck(this,e),this.onFieldClick=r,this.getCurrentMark=n,this.BOARD_SIZE=3,this.board=[[],[],[]],this.init=function(){for(var e=a.boardElement.querySelectorAll(".game-board__field"),t=0;t<a.board.length;t++)for(var r=0;r<a.BOARD_SIZE;r++)a.board[t].push(new Field(t,r,e[r+t*a.BOARD_SIZE],a.onFieldClick,a.getCurrentMark))},this.checkField=function(e,t,r){t<a.board.length&&r<a.board[0].length&&a.board[t][r].check(e)},this.isFieldChecked=function(e,t){return a.board[e][t].isChecked()},this.isFull=function(){return a.board.flat().every(function(e){return e.isChecked()})},this.getWinningFields=function(){return a.checkRows()||a.checkColumns()||a.checkDiagonal()},this.checkRows=function(){for(var e=0;e<a.BOARD_SIZE;e++)if(null!==a.board[e][0].getMark()&&a.board[e][0].getMark()===a.board[e][1].getMark()&&a.board[e][1].getMark()===a.board[e][2].getMark())return[a.board[e][0],a.board[e][1],a.board[e][2]];return null},this.checkColumns=function(){for(var e=0;e<a.BOARD_SIZE;e++)if(null!==a.board[0][e].getMark()&&a.board[0][e].getMark()===a.board[1][e].getMark()&&a.board[1][e].getMark()===a.board[2][e].getMark())return[a.board[0][e],a.board[1][e],a.board[2][e]];return null},this.checkDiagonal=function(){return null!==a.board[1][1].getMark()&&a.board[0][0].getMark()===a.board[1][1].getMark()&&a.board[1][1].getMark()===a.board[2][2].getMark()||null!==a.board[1][1].getMark()&&a.board[0][2].getMark()===a.board[1][1].getMark()&&a.board[1][1].getMark()===a.board[2][0].getMark()?[a.board[0][0],a.board[1][1],a.board[2][2]]:null},this.clear=function(){for(var e=0;e<a.board.length;e++)for(var t=0;t<a.BOARD_SIZE;t++)a.board[e][t].clear()},this.boardElement=document.querySelector(t)}),Field=_createClass(function e(t,r,n,a,o){var i=this;_classCallCheck(this,e),this.row=t,this.column=r,this.fieldElement=n,this.gameOnClickHandler=a,this.getCurrentMark=o,this.mark=null,this.handleHover=function(){var e=i.getCurrentMark();i.fieldElement.setAttribute("data-current-player",e)},this.handleBlur=function(){i.fieldElement.removeAttribute("data-current-player")},this.clear=function(){i.mark=null,i.fieldElement.setAttribute("aria-label","Row ".concat(i.row+1,", column ").concat(i.column+1,", empty field")),i.fieldElement.removeAttribute("data-current-player"),i.fieldElement.removeAttribute("data-mark")},this.insertImages=function(){var e=document.createElement("img"),t=(e.setAttribute("src","./dist/assets/icon-o.svg"),e.setAttribute("alt",""),e.setAttribute("data-name","o-icon"),document.createElement("img")),r=(t.setAttribute("src","./dist/assets/icon-o-outline.svg"),t.setAttribute("alt",""),t.setAttribute("data-name","o-outline-icon"),document.createElement("img")),n=(r.setAttribute("src","./dist/assets/icon-x.svg"),r.setAttribute("alt",""),r.setAttribute("data-name","x-icon"),document.createElement("img"));n.setAttribute("src","./dist/assets/icon-x-outline.svg"),n.setAttribute("alt",""),n.setAttribute("data-name","x-outline-icon"),i.fieldElement.appendChild(e),i.fieldElement.appendChild(r),i.fieldElement.appendChild(t),i.fieldElement.appendChild(n)},this.check=function(e){i.mark=e,i.fieldElement.setAttribute("aria-label","Row ".concat(i.row+1,", column ").concat(i.column+1,", ").concat(i.mark," mark")),i.fieldElement.setAttribute("data-mark",e)},this.isChecked=function(){return null!==i.mark},this.getMark=function(){return i.mark},this.fieldElement&&(this.fieldElement.addEventListener("click",this.gameOnClickHandler),this.fieldElement.addEventListener("mouseover",this.handleHover),this.fieldElement.addEventListener("focusin",this.handleHover),this.fieldElement.addEventListener("mouseout",this.handleBlur),this.fieldElement.addEventListener("focusout",this.handleBlur),this.fieldElement.dataset.row=this.row.toString(),this.fieldElement.dataset.column=this.column.toString(),this.fieldElement.setAttribute("aria-label","Row ".concat(this.row+1,", column ").concat(this.column+1,", empty field")),this.insertImages())}),Player=_createClass(function e(t,r){var n=this,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck(this,e),this.name=t,this.mark=r,this.score=a,this.toString=function(){return"".concat(n.mark," (").concat(n.name,")")},this.getName=function(){return n.name},this.getMark=function(){return n.mark},this.getScore=function(){return n.score},this.updateScore=function(){return++n.score}}),CPUPlayer=function(){_inherits(r,Player);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).makeMove=function(e){for(var t,r,n=e.BOARD_SIZE;t=Math.floor(Math.random()*n),r=Math.floor(Math.random()*n),e.isFieldChecked(t,r););return[t,r]},e}return _createClass(r)}(),ticTacToeGame=new Game("#game-menu","#tic-tac-toe-game");
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4udHMiLCJtYWluLmpzIl0sIm5hbWVzIjpbIkdhbWUiLCJfY3JlYXRlQ2xhc3MiLCJnYW1lTWVudUlkIiwiZ2FtZUNvbnRhaW5lcklkIiwiX3RoaXMiLCJ0aGlzIiwiX2NsYXNzQ2FsbENoZWNrIiwidGllcyIsImdhbWVDb3VudCIsInR1cm5Db3VudCIsIm9uRmllbGRDbGljayIsImV2IiwiZmllbGRCdXR0b24iLCJ0YXJnZXQiLCJyb3ciLCJwYXJzZUludCIsImRhdGFzZXQiLCJjb2x1bW4iLCJtYWtlTW92ZSIsIm9uR2FtZUNvbnRpbnVlIiwiZ2FtZUJvYXJkIiwiY2xlYXIiLCJzY29yZUJvYXJkIiwidXBkYXRlU2NvcmUiLCJ4UGxheWVyIiwib1BsYXllciIsIm1ha2VNb3ZlQ1BVIiwiaW5pdCIsIm1vZGUiLCJwMU1hcmsiLCJwMUxhYmVsIiwicDJNYXJrIiwicGxheWVyMiIsIkNQVVBsYXllciIsIlBsYXllciIsInBsYXllcjEiLCJwbGF5ZXJRdWV1ZSIsImdhbWVDb250YWluZXIiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJzdGFydEdhbWUiLCJ0dXJuSW5kaWNhdG9yIiwidXBkYXRlIiwiZ2V0Q3VycmVudFBsYXllck1hcmsiLCJnZXRDdXJyZW50UGxheWVyIiwiZ2V0TWFyayIsImlzRmllbGRDaGVja2VkIiwiY2hlY2tGaWVsZCIsImFmdGVyTW92ZSIsImdldFdpbm5pbmdGaWVsZHMiLCJnYW1lUmVzdWx0TW9kYWwiLCJzaG93IiwiaXNGdWxsIiwiaW5jcmVhc2VUdXJuQ291bnQiLCJhcHBseSIsIl90b0NvbnN1bWFibGVBcnJheSIsImdhbWVNZW51IiwiR2FtZU1lbnUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJTY29yZUJvYXJkIiwiR2FtZUJvYXJkIiwiVHVybkluZGljYXRvciIsIlJlc3VsdE1vZGFsIiwiZ2FtZUluaXQiLCJfdGhpczIiLCJmb3JtU3VibWl0QnV0dG9ucyIsImZvckVhY2giLCJidG4iLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlTWVudVN1Ym1pdEJ1dHRvbiIsInByZXZlbnREZWZhdWx0IiwiaXNBbnlPcHRpb25TZWxlY3RlZCIsImVycm9yTXNnIiwiaW5uZXJUZXh0IiwiZ2FtZU1vZGUiLCJnZXRDaGVja2VkT3B0aW9uTWFyayIsImFkZCIsIkFycmF5IiwiZnJvbSIsImZvcm1PcHRpb25zIiwic29tZSIsIm9wdGlvbiIsImNoZWNrZWQiLCJfc3RlcCIsIl9pdGVyYXRvciIsIl9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIiwicyIsIm4iLCJkb25lIiwidmFsdWUiLCJtYXJrIiwiZXJyIiwiZSIsImYiLCJtZW51Rm9ybSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfdGhpczMiLCJjdXJyZW50UGxheWVyTWFya0VsZW1lbnQiLCJjdXJyZW50UGxheWVyTWFya0ljb24iLCJzcmMiLCJjb25jYXQiLCJzY29yZUJvYXJkSWQiLCJfdGhpczQiLCJwMSIsInAyIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwidG9TdHJpbmciLCJwMkxhYmVsIiwicDFTY29yZSIsImdldFNjb3JlIiwicDJTY29yZSIsInRpZXNTY29yZSIsInNjb3JlQm9hcmRDb250YWluZXIiLCJnYW1lQ29udGludWVIYW5kbGluZyIsIl90aGlzNSIsImhhbmRsZUNvbnRpbnVlIiwiaGlkZSIsIndpbm5lciIsIm1vZGFsIiwidXBkYXRlUmVzdWx0IiwiZGlzcGxheVRpZVJlc3VsdCIsImRpc3BsYXlXaW5uZXJSZXN1bHQiLCJxdWl0QnV0dG9uIiwiZm9jdXMiLCJzZXRBdHRyaWJ1dGUiLCJtb2RhbEhlYWRpbmciLCJpbm5lckhUTUwiLCJtZXNzYWdlIiwiZ2V0Um91bmRNZXNzYWdlIiwiZ2V0TmFtZSIsIm1vZGFsTWVzc2FnZSIsInNldFJlc3VsdEhlYWRpbmciLCJpbWdFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImhpZGRlbk1hcmsiLCJtZXNzYWdlVGV4dCIsImNyZWF0ZVRleHROb2RlIiwiaGVhZGluZ1NwYW4iLCJhcHBlbmRDaGlsZCIsInBsYXllck5hbWUiLCJjb250aW51ZUJ1dHRvbiIsImdhbWVCb2FyZElkIiwiZ2V0Q3VycmVudE1hcmsiLCJfdGhpczYiLCJCT0FSRF9TSVpFIiwiYm9hcmQiLCJib2FyZEZpZWxkRWxlbWVudHMiLCJib2FyZEVsZW1lbnQiLCJwdXNoIiwiRmllbGQiLCJjaGVjayIsImlzQ2hlY2tlZCIsImZsYXQiLCJldmVyeSIsImZpZWxkIiwiY2hlY2tSb3dzIiwiY2hlY2tDb2x1bW5zIiwiY2hlY2tEaWFnb25hbCIsImZpZWxkRWxlbWVudCIsImdhbWVPbkNsaWNrSGFuZGxlciIsIl90aGlzNyIsImhhbmRsZUhvdmVyIiwiY3VycmVudFBsYXllck1hcmsiLCJoYW5kbGVCbHVyIiwicmVtb3ZlQXR0cmlidXRlIiwiaW5zZXJ0SW1hZ2VzIiwib0ltYWdlIiwib091dGxpbmVJbWFnZSIsInhJbWFnZSIsInhPdXRsaW5lSW1hZ2UiLCJuYW1lIiwiX3RoaXM4Iiwic2NvcmUiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJfY3JlYXRlU3VwZXIiLCJfdGhpczkiLCJib2FyZFNpemUiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ0aWNUYWNUb2VHYW1lIl0sIm1hcHBpbmdzIjoiZ3lIQUtBLElBQ01BLEtBQUlDLGFBaUJULFNBQUFELEVBQVlFLEVBQW9CQyxHQUF1QixJQUFBQyxFQUFBQyxLQUFBQyxnQkFBQUQsS0FBQUwsQ0FBQSxFQUovQ0ssS0FBQUUsS0FBZSxFQUNmRixLQUFBRyxVQUFvQixFQUNwQkgsS0FBQUksVUFBb0IsRUFZNUJKLEtBQUFLLGFBQWUsU0FBQ0MsR0FFZixJQUFNQyxFQUFjRCxFQUFHRSxPQUNqQkMsRUFBY0MsU0FBU0gsRUFBWUksUUFBUUYsR0FBRyxFQUM5Q0csRUFBaUJGLFNBQVNILEVBQVlJLFFBQVFDLE1BQU0sRUFDMURiLEVBQUtjLFNBQVNKLEVBQUtHLENBQU0sQ0FDMUIsRUFFQVosS0FBQWMsZUFBaUIsV0FDaEJmLEVBQUtJLFNBQVMsR0FDZEosRUFBS0ssVUFBWSxFQUNqQkwsRUFB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LFNBQUFBLElBQUEsSUFBQWtKLEVBU0csT0FUSDdLLGdCQUFBRCxLQUFBNEIsQ0FBQSxHQ2pKUWtKLEVBQUFGLEVBQUEzSCxNQUFBakQsS0FBQXFHLFNBQUEsR0RrSlB4RixTQUFXLFNBQUNrSSxHQUdYLElBRkEsSUFDSXRJLEVBQUtHLEVBREhtSyxFQUFZaEMsRUFBTUQsV0FHdkJySSxFQUFNdUssS0FBS0MsTUFBTUQsS0FBS0UsT0FBTSxFQUFLSCxDQUFTLEVBQzFDbkssRUFBU29LLEtBQUtDLE1BQU1ELEtBQUtFLE9BQU0sRUFBS0gsQ0FBUyxFQUNyQ2hDLEVBQU10RyxlQUFlaEMsRUFBS0csQ0FBTSxJQUN6QyxNQUFPLENBQUNILEVBQUtHLEVBQ2QsRUFBRWtLLENBQ0gsQ0FBQyxPQUFBbEwsYUFBQWdDLENBQUEsQ0FBQSxFQVY2QixFQWV4QnVKLGNBQXNCLElBQUl4TCxLQUFLLGFBQWMsbUJBQW1CIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogdHlwZXMgKi9cclxudHlwZSBUcmlwbGVGaWVsZCA9IFtGaWVsZCwgRmllbGQsIEZpZWxkXTtcclxuLyogdHlwZXMgZW5kICovXHJcblxyXG4vKiBjbGFzc2VzICovXHJcbi8qIEdhbWUgY2xhc3Mgc3RhcnQgKi9cclxuY2xhc3MgR2FtZSB7XHJcblx0LyogZ2FtZSBlbGVtZW50cyAqL1xyXG5cdHByaXZhdGUgZ2FtZU1lbnU6IEdhbWVNZW51O1xyXG5cdHByaXZhdGUgZ2FtZUNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBnYW1lQm9hcmQ6IEdhbWVCb2FyZDtcclxuXHRwcml2YXRlIHNjb3JlQm9hcmQ6IFNjb3JlQm9hcmQ7XHJcblx0cHJpdmF0ZSB0dXJuSW5kaWNhdG9yOiBUdXJuSW5kaWNhdG9yO1xyXG5cdHByaXZhdGUgZ2FtZVJlc3VsdE1vZGFsOiBSZXN1bHRNb2RhbDtcclxuXHQvKiBwbGF5ZXJzICovXHJcblx0cHJpdmF0ZSB4UGxheWVyOiBQbGF5ZXI7XHJcblx0cHJpdmF0ZSBvUGxheWVyOiBQbGF5ZXI7XHJcblx0cHJpdmF0ZSBwbGF5ZXJRdWV1ZTogW1BsYXllciwgUGxheWVyXTtcclxuXHQvKiBnYW1lIHN0YXRlcyAqL1xyXG5cdHByaXZhdGUgdGllczogbnVtYmVyID0gMDtcclxuXHRwcml2YXRlIGdhbWVDb3VudDogbnVtYmVyID0gMDtcclxuXHRwcml2YXRlIHR1cm5Db3VudDogbnVtYmVyID0gMDtcclxuXHJcblx0Y29uc3RydWN0b3IoZ2FtZU1lbnVJZDogc3RyaW5nLCBnYW1lQ29udGFpbmVySWQ6IHN0cmluZykge1xyXG5cdFx0dGhpcy5nYW1lTWVudSA9IG5ldyBHYW1lTWVudShnYW1lTWVudUlkLCB0aGlzLmluaXQpO1xyXG5cdFx0dGhpcy5nYW1lTWVudS5pbml0KCk7XHJcblx0XHR0aGlzLmdhbWVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGdhbWVDb250YWluZXJJZCk7XHJcblx0XHR0aGlzLnNjb3JlQm9hcmQgPSBuZXcgU2NvcmVCb2FyZCgnI3Njb3JlLWJvYXJkJyk7XHJcblx0XHR0aGlzLmdhbWVCb2FyZCA9IG5ldyBHYW1lQm9hcmQoJyNnYW1lLWJvYXJkJywgdGhpcy5vbkZpZWxkQ2xpY2ssIHRoaXMuZ2V0Q3VycmVudFBsYXllck1hcmspO1xyXG5cdFx0dGhpcy50dXJuSW5kaWNhdG9yID0gbmV3IFR1cm5JbmRpY2F0b3IoKTtcclxuXHRcdHRoaXMuZ2FtZVJlc3VsdE1vZGFsID0gbmV3IFJlc3VsdE1vZGFsKHRoaXMub25HYW1lQ29udGludWUpO1xyXG5cdH1cclxuXHJcblx0b25GaWVsZENsaWNrID0gKGV2OiBFdmVudCk6IHZvaWQgPT4ge1xyXG5cdFx0LyogcmV0cmlldmUgcm93IGFuZCBjb2x1bW4gZnJvbSBjbGlja2VkIGJ1dHRvbiBhbmQgbWFrZSBtb3ZlICovXHJcblx0XHRjb25zdCBmaWVsZEJ1dHRvbiA9IGV2LnRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuXHRcdGNvbnN0IHJvdzogbnVtYmVyID0gcGFyc2VJbnQoZmllbGRCdXR0b24uZGF0YXNldC5yb3cpO1xyXG5cdFx0Y29uc3QgY29sdW1uOiBudW1iZXIgPSBwYXJzZUludChmaWVsZEJ1dHRvbi5kYXRhc2V0LmNvbHVtbik7XHJcblx0XHR0aGlzLm1ha2VNb3ZlKHJvdywgY29sdW1uKTtcclxuXHR9O1xyXG5cclxuXHRvbkdhbWVDb250aW51ZSA9ICgpID0+IHtcclxuXHRcdHRoaXMuZ2FtZUNvdW50Kys7XHJcblx0XHR0aGlzLnR1cm5Db3VudCA9IDA7XHJcblx0XHR0aGlzLmdhbWVCb2FyZC5jbGVhcigpO1xyXG5cdFx0dGhpcy5zY29yZUJvYXJkLnVwZGF0ZVNjb3JlKHRoaXMueFBsYXllciwgdGhpcy5vUGxheWVyLCB0aGlzLnRpZXMpO1xyXG5cdFx0dGhpcy5tYWtlTW92ZUNQVSgpO1xyXG5cdH07XHJcblxyXG5cdGluaXQgPSAobW9kZTogc3RyaW5nLCBwMU1hcms6IHN0cmluZyk6IHZvaWQgPT4ge1xyXG5cdFx0Y29uc3QgcDJNYXJrOiBzdHJpbmcgPSBwMU1hcmsgPT09ICd4JyA/ICdvJyA6ICd4JztcclxuXHRcdGxldCBwMUxhYmVsOiBzdHJpbmcsIHBsYXllcjE6IFBsYXllcjtcclxuXHRcdGxldCBwMkxhYmVsOiBzdHJpbmcsIHBsYXllcjI6IFBsYXllcjtcclxuXHJcblx0XHQvKiBjcmVhdGVzIGxhYmVscyBhbmQgcGxheWVycyBkZXBlbmRpbmcgb24gZ2FtZSBtb2RlICovXHJcblx0XHRpZiAobW9kZSA9PT0gJ3NpbmdsZXBsYXllcicpIHtcclxuXHRcdFx0cDFMYWJlbCA9ICd5b3UnO1xyXG5cdFx0XHRwMkxhYmVsID0gJ2NwdSc7XHJcblx0XHRcdHBsYXllcjIgPSBuZXcgQ1BVUGxheWVyKHAyTGFiZWwsIHAyTWFyayk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRwMUxhYmVsID0gJ3AxJztcclxuXHRcdFx0cDJMYWJlbCA9ICdwMic7XHJcblx0XHRcdHBsYXllcjIgPSBuZXcgUGxheWVyKHAyTGFiZWwsIHAyTWFyayk7XHJcblx0XHR9XHJcblx0XHRwbGF5ZXIxID0gbmV3IFBsYXllcihwMUxhYmVsLCBwMU1hcmspO1xyXG5cclxuXHRcdC8qIGFzc2lnbnMgY3JlYXRlZCBwbGF5ZXJzIHRvIHJpZ2h0IHNwb3RzICovXHJcblx0XHRpZiAocDFNYXJrID09PSAneCcpIHtcclxuXHRcdFx0dGhpcy54UGxheWVyID0gcGxheWVyMTtcclxuXHRcdFx0dGhpcy5vUGxheWVyID0gcGxheWVyMjtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMueFBsYXllciA9IHBsYXllcjI7XHJcblx0XHRcdHRoaXMub1BsYXllciA9IHBsYXllcjE7XHJcblx0XHR9XHJcblxyXG5cdFx0LyogY3JlYXRlcyB0dXBsZSBvZiBwbGF5ZXJzLCB0byBjaG9vc2UgY3VycmVudCBwbGF5ZXIgZGVwZW5kaW5nIG9uIHR1cm4gY291bnRlciAqL1xyXG5cdFx0dGhpcy5wbGF5ZXJRdWV1ZSA9IFt0aGlzLnhQbGF5ZXIsIHRoaXMub1BsYXllcl07XHJcblxyXG5cdFx0Lyogc2hvd3MgZ2FtZSBjb250YWluZXIgKi9cclxuXHRcdHRoaXMuZ2FtZUNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuXHJcblx0XHR0aGlzLnN0YXJ0R2FtZSgpO1xyXG5cdH07XHJcblxyXG5cdHN0YXJ0R2FtZSA9ICgpOiB2b2lkID0+IHtcclxuXHRcdC8qIGluaXRpYWxpemUgc2NvcmUgYm9hcmQgd2l0aCBjcmVhdGVkIHBsYXllcnMgKi9cclxuXHRcdHRoaXMuc2NvcmVCb2FyZC5pbml0KHRoaXMueFBsYXllciwgdGhpcy5vUGxheWVyLCB0aGlzLnRpZXMpO1xyXG5cclxuXHRcdC8qIGluaXRpYWxpemUgZ2FtZSBib2FyZCAqL1xyXG5cdFx0dGhpcy5nYW1lQm9hcmQuaW5pdCgpO1xyXG5cclxuXHRcdHRoaXMudHVybkluZGljYXRvci51cGRhdGUodGhpcy5nZXRDdXJyZW50UGxheWVyTWFyaygpKTtcclxuXHJcblx0XHQvKiBpZiBzdGFydGluZyBwbGF5ZXIgaXMgQ1BVIHRoZW4gbWFrZSBhdXRvIG1vdmUgKi9cclxuXHRcdHRoaXMubWFrZU1vdmVDUFUoKTtcclxuXHR9O1xyXG5cclxuXHRnZXRDdXJyZW50UGxheWVyTWFyayA9ICgpOiBzdHJpbmcgPT4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuZ2V0Q3VycmVudFBsYXllcigpLmdldE1hcmsoKTtcclxuXHR9O1xyXG5cclxuXHRnZXRDdXJyZW50UGxheWVyID0gKCk6IFBsYXllciA9PiB7XHJcblx0XHRyZXR1cm4gdGhpcy5wbGF5ZXJRdWV1ZVsodGhpcy5nYW1lQ291bnQgKyB0aGlzLnR1cm5Db3VudCkgJSAyXTtcclxuXHR9O1xyXG5cclxuXHRtYWtlTW92ZSA9IChyb3c6IG51bWJlciwgY29sdW1uOiBudW1iZXIpOiB2b2lkID0+IHtcclxuXHRcdC8qIG9uIGZpZWxkIGNsaWNrLCBpZiBmaWVsZCBpcyBjaGVja2VkIHRoZW4gcmV0dXJuIGRvaW5nIG5vdGhpbmcgKi9cclxuXHRcdGlmICh0aGlzLmdhbWVCb2FyZC5pc0ZpZWxkQ2hlY2tlZChyb3csIGNvbHVtbikpIHJldHVybjtcclxuXHJcblx0XHQvKiBjaGVja3Mgc2VsZWN0ZWQgZmllbGQgKi9cclxuXHRcdHRoaXMuZ2FtZUJvYXJkLmNoZWNrRmllbGQodGhpcy5nZXRDdXJyZW50UGxheWVyKCkuZ2V0TWFyaygpLCByb3csIGNvbHVtbik7XHJcblx0XHR0aGlzLmFmdGVyTW92ZSgpO1xyXG5cdH07XHJcblxyXG5cdGFmdGVyTW92ZSA9ICgpOiB2b2lkID0+IHtcclxuXHRcdGNvbnN0IHdpbm5pbmdGaWVsZHMgPSB0aGlzLmdhbWVCb2FyZC5nZXRXaW5uaW5nRmllbGRzKCk7XHJcblx0XHRpZiAod2lubmluZ0ZpZWxkcyAhPT0gbnVsbCkge1xyXG5cdFx0XHR0aGlzLmdhbWVSZXN1bHRNb2RhbC5zaG93KHRoaXMuZ2V0Q3VycmVudFBsYXllcigpKTtcclxuXHRcdFx0dGhpcy5nZXRDdXJyZW50UGxheWVyKCkudXBkYXRlU2NvcmUoKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLmdhbWVCb2FyZC5pc0Z1bGwoKSkge1xyXG5cdFx0XHR0aGlzLmdhbWVSZXN1bHRNb2RhbC5zaG93KCk7XHJcblx0XHRcdHRoaXMudGllcysrO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5pbmNyZWFzZVR1cm5Db3VudCgpO1xyXG5cdFx0dGhpcy50dXJuSW5kaWNhdG9yLnVwZGF0ZSh0aGlzLmdldEN1cnJlbnRQbGF5ZXJNYXJrKCkpO1xyXG5cclxuXHRcdHRoaXMubWFrZU1vdmVDUFUoKTtcclxuXHR9O1xyXG5cclxuXHRtYWtlTW92ZUNQVSA9ICgpOiB2b2lkID0+IHtcclxuXHRcdC8qIGFmdGVyIGZpZWxkIGlzIGNoZWNrZWQsIGNoZWNrcyBpZiBjdXJyZW50IHBsYXllciBpcyBDUFUgYW5kIGlmIGlzLCB0aGVuIG1ha2VzIGEgbW92ZSAqL1xyXG5cdFx0aWYgKHRoaXMuZ2V0Q3VycmVudFBsYXllcigpIGluc3RhbmNlb2YgQ1BVUGxheWVyKSB7XHJcblx0XHRcdHRoaXMubWFrZU1vdmUoLi4uKHRoaXMuZ2V0Q3VycmVudFBsYXllcigpIGFzIENQVVBsYXllcikubWFrZU1vdmUodGhpcy5nYW1lQm9hcmQpKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRpbmNyZWFzZVR1cm5Db3VudCA9ICgpOiBudW1iZXIgPT4ge1xyXG5cdFx0cmV0dXJuICsrdGhpcy50dXJuQ291bnQ7XHJcblx0fTtcclxufVxyXG4vKiBHYW1lIGNsYXNzIGVuZCAqL1xyXG5cclxuLyogR2FtZU1lbnUgY2xhc3Mgc3RhcnQgKi9cclxuY2xhc3MgR2FtZU1lbnUge1xyXG5cdHByaXZhdGUgZ2FtZU1lbnU6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgbWVudUZvcm06IEhUTUxGb3JtRWxlbWVudDtcclxuXHRwcml2YXRlIGZvcm1PcHRpb25zOiBOb2RlTGlzdE9mPEhUTUxJbnB1dEVsZW1lbnQ+O1xyXG5cdHByaXZhdGUgZXJyb3JNc2c6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgZm9ybVN1Ym1pdEJ1dHRvbnM6IE5vZGVMaXN0T2Y8SFRNTEJ1dHRvbkVsZW1lbnQ+O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihnYW1lTWVudUlkOiBzdHJpbmcsIHByaXZhdGUgZ2FtZUluaXQ6IChtb2RlOiBzdHJpbmcsIHAxTWFyazogc3RyaW5nKSA9PiB2b2lkKSB7XHJcblx0XHR0aGlzLmdhbWVNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihnYW1lTWVudUlkKTtcclxuXHRcdHRoaXMubWVudUZvcm0gPSB0aGlzLmdhbWVNZW51LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcclxuXHRcdHRoaXMuZm9ybU9wdGlvbnMgPSB0aGlzLm1lbnVGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXScpO1xyXG5cdFx0dGhpcy5lcnJvck1zZyA9IHRoaXMubWVudUZvcm0ucXVlcnlTZWxlY3RvcignW3JvbGU9XCJhbGVydFwiXScpO1xyXG5cdFx0dGhpcy5mb3JtU3VibWl0QnV0dG9ucyA9IHRoaXMubWVudUZvcm0ucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKTtcclxuXHR9XHJcblxyXG5cdGluaXQgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLmZvcm1TdWJtaXRCdXR0b25zLmZvckVhY2goYnRuID0+IGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlTWVudVN1Ym1pdEJ1dHRvbikpO1xyXG5cdH07XHJcblxyXG5cdGhhbmRsZU1lbnVTdWJtaXRCdXR0b24gPSAoZXY6IEV2ZW50KTogdm9pZCA9PiB7XHJcblx0XHRldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0Lyogc2hvd3MgZXJyb3IgaWYgYW55IGZpZWxkIHdhc24ndCBzZWxlY3RlZCAqL1xyXG5cdFx0aWYgKCF0aGlzLmlzQW55T3B0aW9uU2VsZWN0ZWQoKSkge1xyXG5cdFx0XHR0aGlzLmVycm9yTXNnLmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcclxuXHRcdFx0dGhpcy5lcnJvck1zZy5pbm5lclRleHQgPSAnUGxlYXNlIHNlbGVjdCBtYXJrIGZvciBwbGF5ZXIgMSc7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuZXJyb3JNc2cuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xyXG5cdFx0XHR0aGlzLmVycm9yTXNnLmlubmVyVGV4dCA9ICcnO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qIHJldHJpZXZlIGdhbWUgbW9kZSBmcm9tIHN1Ym1pdCBidXR0b24gY2xpY2tlZCBhbmQgc2VsZWN0ZWQgbWFyayBmcm9tIG9wdGlvbnMgKi9cclxuXHRcdGNvbnN0IHN1Ym1pdEJ0bjogSFRNTEJ1dHRvbkVsZW1lbnQgPSBldi50YXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblx0XHRjb25zdCBnYW1lTW9kZTogc3RyaW5nID0gc3VibWl0QnRuLmRhdGFzZXQubW9kZTtcclxuXHRcdGNvbnN0IHAxTWFyazogc3RyaW5nID0gdGhpcy5nZXRDaGVja2VkT3B0aW9uTWFyaygpO1xyXG5cclxuXHRcdC8qIGhpZGVzIGdhbWUgbWVudSAqL1xyXG5cdFx0dGhpcy5nYW1lTWVudS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuXHJcblx0XHQvKiBhbmQgcnVucyBnYW1lIGluaXRpYWxpemF0aW9uICovXHJcblx0XHR0aGlzLmdhbWVJbml0KGdhbWVNb2RlLCBwMU1hcmspOyAvLyBtZXRob2QgZnJvbSB0aGUgcGFyZW50IEdhbWUgY2xhc3NcclxuXHR9O1xyXG5cclxuXHRpc0FueU9wdGlvblNlbGVjdGVkID0gKCk6IGJvb2xlYW4gPT4ge1xyXG5cdFx0cmV0dXJuIEFycmF5LmZyb20odGhpcy5mb3JtT3B0aW9ucykuc29tZShvcHRpb24gPT4gb3B0aW9uLmNoZWNrZWQpO1xyXG5cdH07XHJcblxyXG5cdGdldENoZWNrZWRPcHRpb25NYXJrID0gKCk6IHN0cmluZyA9PiB7XHJcblx0XHRmb3IgKGNvbnN0IG9wdGlvbiBvZiB0aGlzLmZvcm1PcHRpb25zKSB7XHJcblx0XHRcdGlmIChvcHRpb24uY2hlY2tlZCkgcmV0dXJuIG9wdGlvbi5kYXRhc2V0Lm1hcms7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gJyc7XHJcblx0fTtcclxufVxyXG4vKiBHYW1lTWVudSBjbGFzcyBlbmQgKi9cclxuXHJcbi8qIFR1cm5JbmRpY2F0b3IgY2xhc3Mgc3RhcnQgKi9cclxuY2xhc3MgVHVybkluZGljYXRvciB7XHJcblx0cHJpdmF0ZSBjdXJyZW50UGxheWVyTWFya0VsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgY3VycmVudFBsYXllck1hcmtJY29uOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG5cclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdHRoaXMuY3VycmVudFBsYXllck1hcmtFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2N1cnJlbnQtcGxheWVyLW1hcmsnKTtcclxuXHRcdHRoaXMuY3VycmVudFBsYXllck1hcmtJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2N1cnJlbnQtcGxheWVyLW1hcmstaWNvbicpO1xyXG5cdH1cclxuXHJcblx0dXBkYXRlID0gKG1hcms6IHN0cmluZykgPT4ge1xyXG5cdFx0dGhpcy5jdXJyZW50UGxheWVyTWFya0VsZW1lbnQuaW5uZXJUZXh0ID0gbWFyaztcclxuXHRcdHRoaXMuY3VycmVudFBsYXllck1hcmtJY29uLnNyYyA9IGAuL2Rpc3QvYXNzZXRzL2ljb24tJHttYXJrfS5zdmdgO1xyXG5cdH07XHJcbn1cclxuLyogVHVybkluZGljYXRvciBjbGFzcyBlbmQgKi9cclxuXHJcbi8qIFNjb3JlQm9hcmQgY2xhc3Mgc3RhcnQgKi9cclxuY2xhc3MgU2NvcmVCb2FyZCB7XHJcblx0cHJpdmF0ZSBzY29yZUJvYXJkQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIHAxTGFiZWw6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgcDFTY29yZTogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBwMkxhYmVsOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIHAyU2NvcmU6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgdGllc1Njb3JlOiBIVE1MRWxlbWVudDtcclxuXHJcblx0Y29uc3RydWN0b3Ioc2NvcmVCb2FyZElkOiBzdHJpbmcpIHtcclxuXHRcdHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2NvcmVCb2FyZElkKTtcclxuXHRcdHRoaXMucDFMYWJlbCA9IHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjcDEtZ2FtZS1uYW1lJyk7XHJcblx0XHR0aGlzLnAxU2NvcmUgPSB0aGlzLnNjb3JlQm9hcmRDb250YWluZXIucXVlcnlTZWxlY3RvcignI3AxLWdhbWUtc2NvcmUnKTtcclxuXHRcdHRoaXMucDJMYWJlbCA9IHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjcDItZ2FtZS1uYW1lJyk7XHJcblx0XHR0aGlzLnAyU2NvcmUgPSB0aGlzLnNjb3JlQm9hcmRDb250YWluZXIucXVlcnlTZWxlY3RvcignI3AyLWdhbWUtc2NvcmUnKTtcclxuXHRcdHRoaXMudGllc1Njb3JlID0gdGhpcy5zY29yZUJvYXJkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNnYW1lLXRpZXMnKTtcclxuXHR9XHJcblxyXG5cdGluaXQgPSAocDE6IFBsYXllciwgcDI6IFBsYXllciwgdGllczogbnVtYmVyID0gMCk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5wMUxhYmVsLmlubmVyVGV4dCA9IHAxLnRvU3RyaW5nKCk7XHJcblx0XHR0aGlzLnAyTGFiZWwuaW5uZXJUZXh0ID0gcDIudG9TdHJpbmcoKTtcclxuXHRcdHRoaXMudXBkYXRlU2NvcmUocDEsIHAyLCB0aWVzKTtcclxuXHR9O1xyXG5cclxuXHR1cGRhdGVTY29yZSA9IChwMTogUGxheWVyLCBwMjogUGxheWVyLCB0aWVzOiBudW1iZXIpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMucDFTY29yZS5pbm5lclRleHQgPSBwMS5nZXRTY29yZSgpLnRvU3RyaW5nKCk7XHJcblx0XHR0aGlzLnAyU2NvcmUuaW5uZXJUZXh0ID0gcDIuZ2V0U2NvcmUoKS50b1N0cmluZygpO1xyXG5cdFx0dGhpcy50aWVzU2NvcmUuaW5uZXJUZXh0ID0gdGllcy50b1N0cmluZygpO1xyXG5cdH07XHJcbn1cclxuLyogU2NvcmVCb2FyZCBjbGFzcyBlbmQgKi9cclxuXHJcbi8qIFJlc3VsdE1vZGFsIGNsYXNzIHN0YXJ0ICovXHJcbmNsYXNzIFJlc3VsdE1vZGFsIHtcclxuXHRwcml2YXRlIG1vZGFsOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIG1vZGFsTWVzc2FnZTogSFRNTFBhcmFncmFwaEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBtb2RhbEhlYWRpbmc6IEhUTUxIZWFkaW5nRWxlbWVudDtcclxuXHRwcml2YXRlIHF1aXRCdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xyXG5cdHByaXZhdGUgY29udGludWVCdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xyXG5cclxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIGdhbWVDb250aW51ZUhhbmRsaW5nOiAoKSA9PiB2b2lkKSB7XHJcblx0XHR0aGlzLm1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dhbWUtcmVzdWx0LW1vZGFsJyk7XHJcblx0XHR0aGlzLm1vZGFsTWVzc2FnZSA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignLm1vZGFsX19tZXNzYWdlJyk7XHJcblx0XHR0aGlzLm1vZGFsSGVhZGluZyA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignLm1vZGFsX19oZWFkaW5nJyk7XHJcblx0XHR0aGlzLnF1aXRCdXR0b24gPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbltkYXRhLWFjdGlvbj1cInF1aXRcIl0nKTtcclxuXHRcdHRoaXMuY29udGludWVCdXR0b24gPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbltkYXRhLWFjdGlvbj1cImNvbnRpbnVlXCJdJyk7XHJcblx0XHR0aGlzLmNvbnRpbnVlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVDb250aW51ZSk7XHJcblx0fVxyXG5cclxuXHRoYW5kbGVDb250aW51ZSA9IChldjogRXZlbnQpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuZ2FtZUNvbnRpbnVlSGFuZGxpbmcoKTtcclxuXHRcdHRoaXMuaGlkZSgpO1xyXG5cdH07XHJcblxyXG5cdHNob3cgPSAod2lubmVyOiBQbGF5ZXIgfCBudWxsID0gbnVsbCk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5tb2RhbC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuXHRcdHRoaXMudXBkYXRlUmVzdWx0KHdpbm5lcik7XHJcblx0fTtcclxuXHJcblx0aGlkZSA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMubW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcblx0fTtcclxuXHJcblx0dXBkYXRlUmVzdWx0ID0gKHdpbm5lcjogUGxheWVyIHwgbnVsbCk6IHZvaWQgPT4ge1xyXG5cdFx0aWYgKHdpbm5lciA9PT0gbnVsbCkgdGhpcy5kaXNwbGF5VGllUmVzdWx0KCk7XHJcblx0XHRlbHNlIHRoaXMuZGlzcGxheVdpbm5lclJlc3VsdCh3aW5uZXIpO1xyXG5cclxuXHRcdHRoaXMucXVpdEJ1dHRvbi5mb2N1cygpO1xyXG5cdH07XHJcblxyXG5cdGRpc3BsYXlUaWVSZXN1bHQgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLm1vZGFsLnNldEF0dHJpYnV0ZSgnZGF0YS13aW5uZXInLCAndGllJyk7XHJcblx0XHR0aGlzLm1vZGFsSGVhZGluZy5pbm5lckhUTUwgPSAnJztcclxuXHRcdHRoaXMubW9kYWxIZWFkaW5nLmlubmVyVGV4dCA9ICdSb3VuZCB0aWVkJztcclxuXHR9O1xyXG5cclxuXHRkaXNwbGF5V2lubmVyUmVzdWx0ID0gKHdpbm5lcjogUGxheWVyKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLm1vZGFsLnNldEF0dHJpYnV0ZSgnZGF0YS13aW5uZXInLCB3aW5uZXIuZ2V0TWFyaygpKTtcclxuXHJcblx0XHRjb25zdCBtZXNzYWdlID0gdGhpcy5nZXRSb3VuZE1lc3NhZ2Uod2lubmVyLmdldE5hbWUoKSk7XHJcblx0XHR0aGlzLm1vZGFsTWVzc2FnZS5pbm5lclRleHQgPSBtZXNzYWdlO1xyXG5cdFx0dGhpcy5zZXRSZXN1bHRIZWFkaW5nKHdpbm5lcik7XHJcblx0fTtcclxuXHJcblx0c2V0UmVzdWx0SGVhZGluZyA9ICh3aW5uZXI6IFBsYXllcik6IHZvaWQgPT4ge1xyXG5cdFx0LyogY2xlYXIgaGVhZGluZyBiZWZvcmUgc2V0dGluZyBtZXNzYWdlICovXHJcblx0XHR0aGlzLm1vZGFsSGVhZGluZy5pbm5lckhUTUwgPSAnJztcclxuXHRcdGNvbnN0IG1hcmsgPSB3aW5uZXIuZ2V0TWFyaygpO1xyXG5cclxuXHRcdC8qIHdpbm5pbmcgbWFyayBpY29uICovXHJcblx0XHRjb25zdCBpbWdFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcblx0XHRpbWdFbGVtZW50LnNldEF0dHJpYnV0ZSgnc3JjJywgYC4vZGlzdC9hc3NldHMvaWNvbi0ke21hcmt9LnN2Z2ApO1xyXG5cdFx0aW1nRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FsdCcsICcnKTtcclxuXHJcblx0XHQvKiBoaWRkZW4gbWFyayBmb3Igc2NyZWVuIHJlYWRlcnMgKi9cclxuXHRcdGNvbnN0IGhpZGRlbk1hcmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcblx0XHRoaWRkZW5NYXJrLmNsYXNzTGlzdC5hZGQoJ3Zpc3VhbGx5LWhpZGRlbicpO1xyXG5cdFx0aGlkZGVuTWFyay5pbm5lclRleHQgPSBtYXJrO1xyXG5cclxuXHRcdC8qIG1lc3NhZ2UgYWZ0ZXIgaW1hZ2UgKi9cclxuXHRcdGNvbnN0IG1lc3NhZ2VUZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ3Rha2VzIHRoZSByb3VuZCcpO1xyXG5cclxuXHRcdC8qIHNwYW4gY29udGFpbmVyIGZvciBoaWRkZW4gbWFyayBhbmQgbWVzc2FnZSB0ZXh0ICovXHJcblx0XHRjb25zdCBoZWFkaW5nU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuXHRcdGhlYWRpbmdTcGFuLmFwcGVuZENoaWxkKGhpZGRlbk1hcmspO1xyXG5cdFx0aGVhZGluZ1NwYW4uYXBwZW5kQ2hpbGQobWVzc2FnZVRleHQpO1xyXG5cclxuXHRcdHRoaXMubW9kYWxIZWFkaW5nLmFwcGVuZENoaWxkKGltZ0VsZW1lbnQpO1xyXG5cdFx0dGhpcy5tb2RhbEhlYWRpbmcuYXBwZW5kQ2hpbGQoaGVhZGluZ1NwYW4pO1xyXG5cdH07XHJcblxyXG5cdGdldFJvdW5kTWVzc2FnZSA9IChwbGF5ZXJOYW1lOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xyXG5cdFx0bGV0IG1lc3NhZ2U7XHJcblx0XHRzd2l0Y2ggKHBsYXllck5hbWUpIHtcclxuXHRcdFx0Y2FzZSAncDEnOlxyXG5cdFx0XHRcdG1lc3NhZ2UgPSAnUGxheWVyIDEgd2lucyEnO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdwMic6XHJcblx0XHRcdFx0bWVzc2FnZSA9ICdQbGF5ZXIgMiB3aW5zISc7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ3lvdSc6XHJcblx0XHRcdFx0bWVzc2FnZSA9ICdZb3Ugd29uISc7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ2NwdSc6XHJcblx0XHRcdFx0bWVzc2FnZSA9ICdPaCBubywgeW91IGxvc3QuLi4nO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdG1lc3NhZ2UgPSAnJztcclxuXHRcdH1cclxuXHRcdHJldHVybiBtZXNzYWdlO1xyXG5cdH07XHJcbn1cclxuLyogUmVzdWx0TW9kYWwgY2xhc3MgZW5kICovXHJcblxyXG4vKiBHYW1lQm9hcmQgY2xhc3Mgc3RhcnQgKi9cclxuY2xhc3MgR2FtZUJvYXJkIHtcclxuXHRCT0FSRF9TSVpFOiBudW1iZXIgPSAzO1xyXG5cdHByaXZhdGUgYm9hcmRFbGVtZW50OiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIGJvYXJkOiBGaWVsZFtdW10gPSBbW10sIFtdLCBbXV07XHJcblxyXG5cdGNvbnN0cnVjdG9yKGdhbWVCb2FyZElkOiBzdHJpbmcsIHByaXZhdGUgb25GaWVsZENsaWNrOiAoZXY6IEV2ZW50KSA9PiB2b2lkLCBwcml2YXRlIGdldEN1cnJlbnRNYXJrOiAoKSA9PiBzdHJpbmcpIHtcclxuXHRcdHRoaXMuYm9hcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihnYW1lQm9hcmRJZCk7XHJcblx0fVxyXG5cclxuXHRpbml0ID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0LyogZ2V0cyBhbGwgYm9hcmQgZmllbGRzICovXHJcblx0XHRjb25zdCBib2FyZEZpZWxkRWxlbWVudHM6IE5vZGVMaXN0T2Y8SFRNTEJ1dHRvbkVsZW1lbnQ+ID0gdGhpcy5ib2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmdhbWUtYm9hcmRfX2ZpZWxkJyk7XHJcblxyXG5cdFx0LyogY3JlYXRpbmcgZmllbGRzICovXHJcblx0XHRmb3IgKGxldCByb3cgPSAwOyByb3cgPCB0aGlzLmJvYXJkLmxlbmd0aDsgcm93KyspIHtcclxuXHRcdFx0Zm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgdGhpcy5CT0FSRF9TSVpFOyBjb2x1bW4rKykge1xyXG5cdFx0XHRcdHRoaXMuYm9hcmRbcm93XS5wdXNoKFxyXG5cdFx0XHRcdFx0bmV3IEZpZWxkKFxyXG5cdFx0XHRcdFx0XHRyb3csXHJcblx0XHRcdFx0XHRcdGNvbHVtbixcclxuXHRcdFx0XHRcdFx0Ym9hcmRGaWVsZEVsZW1lbnRzW2NvbHVtbiArIHJvdyAqIHRoaXMuQk9BUkRfU0laRV0sXHJcblx0XHRcdFx0XHRcdC8vIGhhbmRsZXMgZm9yIGZpZWxkKGJ1dHRvbnMpIGV2ZW50c1xyXG5cdFx0XHRcdFx0XHR0aGlzLm9uRmllbGRDbGljayxcclxuXHRcdFx0XHRcdFx0dGhpcy5nZXRDdXJyZW50TWFya1xyXG5cdFx0XHRcdFx0KVxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvKiBjaGVja3MvbWFya3MgZmllbGQgb24gcGFzc2VkIHBvc2l0aW9uICovXHJcblx0Y2hlY2tGaWVsZCA9IChtYXJrOiBzdHJpbmcsIHJvdzogbnVtYmVyLCBjb2x1bW46IG51bWJlcikgPT4ge1xyXG5cdFx0aWYgKHJvdyA8IHRoaXMuYm9hcmQubGVuZ3RoICYmIGNvbHVtbiA8IHRoaXMuYm9hcmRbMF0ubGVuZ3RoKSB7XHJcblx0XHRcdHRoaXMuYm9hcmRbcm93XVtjb2x1bW5dLmNoZWNrKG1hcmspO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGlzRmllbGRDaGVja2VkID0gKHJvdzogbnVtYmVyLCBjb2x1bW46IG51bWJlcik6IGJvb2xlYW4gPT4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuYm9hcmRbcm93XVtjb2x1bW5dLmlzQ2hlY2tlZCgpO1xyXG5cdH07XHJcblxyXG5cdGlzRnVsbCA9ICgpOiBib29sZWFuID0+IHtcclxuXHRcdHJldHVybiB0aGlzLmJvYXJkLmZsYXQoKS5ldmVyeShmaWVsZCA9PiBmaWVsZC5pc0NoZWNrZWQoKSk7XHJcblx0fTtcclxuXHJcblx0Z2V0V2lubmluZ0ZpZWxkcyA9ICgpOiBUcmlwbGVGaWVsZCB8IG51bGwgPT4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuY2hlY2tSb3dzKCkgfHwgdGhpcy5jaGVja0NvbHVtbnMoKSB8fCB0aGlzLmNoZWNrRGlhZ29uYWwoKTtcclxuXHR9O1xyXG5cclxuXHRjaGVja1Jvd3MgPSAoKTogVHJpcGxlRmllbGQgfCBudWxsID0+IHtcclxuXHRcdGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IHRoaXMuQk9BUkRfU0laRTsgcm93KyspIHtcclxuXHRcdFx0aWYgKFxyXG5cdFx0XHRcdHRoaXMuYm9hcmRbcm93XVswXS5nZXRNYXJrKCkgIT09IG51bGwgJiZcclxuXHRcdFx0XHR0aGlzLmJvYXJkW3Jvd11bMF0uZ2V0TWFyaygpID09PSB0aGlzLmJvYXJkW3Jvd11bMV0uZ2V0TWFyaygpICYmXHJcblx0XHRcdFx0dGhpcy5ib2FyZFtyb3ddWzFdLmdldE1hcmsoKSA9PT0gdGhpcy5ib2FyZFtyb3ddWzJdLmdldE1hcmsoKVxyXG5cdFx0XHQpXHJcblx0XHRcdFx0cmV0dXJuIFt0aGlzLmJvYXJkW3Jvd11bMF0sIHRoaXMuYm9hcmRbcm93XVsxXSwgdGhpcy5ib2FyZFtyb3ddWzJdXTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH07XHJcblxyXG5cdGNoZWNrQ29sdW1ucyA9ICgpOiBUcmlwbGVGaWVsZCB8IG51bGwgPT4ge1xyXG5cdFx0Zm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgdGhpcy5CT0FSRF9TSVpFOyBjb2x1bW4rKykge1xyXG5cdFx0XHRpZiAoXHJcblx0XHRcdFx0dGhpcy5ib2FyZFswXVtjb2x1bW5dLmdldE1hcmsoKSAhPT0gbnVsbCAmJlxyXG5cdFx0XHRcdHRoaXMuYm9hcmRbMF1bY29sdW1uXS5nZXRNYXJrKCkgPT09IHRoaXMuYm9hcmRbMV1bY29sdW1uXS5nZXRNYXJrKCkgJiZcclxuXHRcdFx0XHR0aGlzLmJvYXJkWzFdW2NvbHVtbl0uZ2V0TWFyaygpID09PSB0aGlzLmJvYXJkWzJdW2NvbHVtbl0uZ2V0TWFyaygpXHJcblx0XHRcdClcclxuXHRcdFx0XHRyZXR1cm4gW3RoaXMuYm9hcmRbMF1bY29sdW1uXSwgdGhpcy5ib2FyZFsxXVtjb2x1bW5dLCB0aGlzLmJvYXJkWzJdW2NvbHVtbl1dO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fTtcclxuXHJcblx0Y2hlY2tEaWFnb25hbCA9ICgpOiBUcmlwbGVGaWVsZCB8IG51bGwgPT4ge1xyXG5cdFx0LyogdG9wIGxlZnQsIG1pZGRsZSwgYW5kIGJvdHRvbSByaWdodCAqL1xyXG5cdFx0aWYgKFxyXG5cdFx0XHR0aGlzLmJvYXJkWzFdWzFdLmdldE1hcmsoKSAhPT0gbnVsbCAmJlxyXG5cdFx0XHR0aGlzLmJvYXJkWzBdWzBdLmdldE1hcmsoKSA9PT0gdGhpcy5ib2FyZFsxXVsxXS5nZXRNYXJrKCkgJiZcclxuXHRcdFx0dGhpcy5ib2FyZFsxXVsxXS5nZXRNYXJrKCkgPT09IHRoaXMuYm9hcmRbMl1bMl0uZ2V0TWFyaygpXHJcblx0XHQpXHJcblx0XHRcdHJldHVybiBbdGhpcy5ib2FyZFswXVswXSwgdGhpcy5ib2FyZFsxXVsxXSwgdGhpcy5ib2FyZFsyXVsyXV07XHJcblxyXG5cdFx0LyogdG9wIHJpZ2h0LCBtaWRkbGUsIGFuZCBib3R0b20gbGVmdCAqL1xyXG5cdFx0aWYgKFxyXG5cdFx0XHR0aGlzLmJvYXJkWzFdWzFdLmdldE1hcmsoKSAhPT0gbnVsbCAmJlxyXG5cdFx0XHR0aGlzLmJvYXJkWzBdWzJdLmdldE1hcmsoKSA9PT0gdGhpcy5ib2FyZFsxXVsxXS5nZXRNYXJrKCkgJiZcclxuXHRcdFx0dGhpcy5ib2FyZFsxXVsxXS5nZXRNYXJrKCkgPT09IHRoaXMuYm9hcmRbMl1bMF0uZ2V0TWFyaygpXHJcblx0XHQpXHJcblx0XHRcdHJldHVybiBbdGhpcy5ib2FyZFswXVswXSwgdGhpcy5ib2FyZFsxXVsxXSwgdGhpcy5ib2FyZFsyXVsyXV07XHJcblxyXG5cdFx0Lyogbm8gZmllbGRzIG1hdGNoZWQgKi9cclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH07XHJcblxyXG5cdGNsZWFyID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0Zm9yIChsZXQgcm93ID0gMDsgcm93IDwgdGhpcy5ib2FyZC5sZW5ndGg7IHJvdysrKSB7XHJcblx0XHRcdGZvciAobGV0IGNvbHVtbiA9IDA7IGNvbHVtbiA8IHRoaXMuQk9BUkRfU0laRTsgY29sdW1uKyspIHtcclxuXHRcdFx0XHR0aGlzLmJvYXJkW3Jvd11bY29sdW1uXS5jbGVhcigpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxufVxyXG4vKiBHYW1lQm9hcmQgY2xhc3MgZW5kICovXHJcblxyXG4vKiBGaWVsZCBjbGFzcyBzdGFydCAqL1xyXG5jbGFzcyBGaWVsZCB7XHJcblx0cHJpdmF0ZSBtYXJrOiBzdHJpbmcgPSBudWxsO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdHByaXZhdGUgcm93OiBudW1iZXIsXHJcblx0XHRwcml2YXRlIGNvbHVtbjogbnVtYmVyLFxyXG5cdFx0cHJpdmF0ZSBmaWVsZEVsZW1lbnQ6IEhUTUxCdXR0b25FbGVtZW50LFxyXG5cdFx0cHJpdmF0ZSBnYW1lT25DbGlja0hhbmRsZXI6IChldjogRXZlbnQpID0+IHZvaWQsXHJcblx0XHRwcml2YXRlIGdldEN1cnJlbnRNYXJrOiAoKSA9PiBzdHJpbmdcclxuXHQpIHtcclxuXHRcdGlmICh0aGlzLmZpZWxkRWxlbWVudCkge1xyXG5cdFx0XHQvKiBjbGljayBoYW5kbGluZyAqL1xyXG5cdFx0XHR0aGlzLmZpZWxkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZ2FtZU9uQ2xpY2tIYW5kbGVyKTtcclxuXHJcblx0XHRcdC8qIGhvdmVyL2ZvY3VzIGluIGhhbmRsaW5nICovXHJcblx0XHRcdHRoaXMuZmllbGRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIHRoaXMuaGFuZGxlSG92ZXIpO1xyXG5cdFx0XHR0aGlzLmZpZWxkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJywgdGhpcy5oYW5kbGVIb3Zlcik7XHJcblxyXG5cdFx0XHQvKiBob3Zlci9mb2N1cyBvdXQgaGFuZGxpbmcgKi9cclxuXHRcdFx0dGhpcy5maWVsZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCB0aGlzLmhhbmRsZUJsdXIpO1xyXG5cdFx0XHR0aGlzLmZpZWxkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIHRoaXMuaGFuZGxlQmx1cik7XHJcblxyXG5cdFx0XHQvKiBzZXR0aW5nIGF0dHJpYnV0cyAqL1xyXG5cdFx0XHR0aGlzLmZpZWxkRWxlbWVudC5kYXRhc2V0LnJvdyA9IHRoaXMucm93LnRvU3RyaW5nKCk7XHJcblx0XHRcdHRoaXMuZmllbGRFbGVtZW50LmRhdGFzZXQuY29sdW1uID0gdGhpcy5jb2x1bW4udG9TdHJpbmcoKTtcclxuXHRcdFx0dGhpcy5maWVsZEVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgYFJvdyAke3RoaXMucm93ICsgMX0sIGNvbHVtbiAke3RoaXMuY29sdW1uICsgMX0sIGVtcHR5IGZpZWxkYCk7XHJcblxyXG5cdFx0XHR0aGlzLmluc2VydEltYWdlcygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyogaG92ZXIvZm9jdXMgaW4gZmllbGQgaGFuZGxlICovXHJcblx0aGFuZGxlSG92ZXIgPSAoKTogdm9pZCA9PiB7XHJcblx0XHRjb25zdCBjdXJyZW50UGxheWVyTWFyayA9IHRoaXMuZ2V0Q3VycmVudE1hcmsoKTtcclxuXHRcdHRoaXMuZmllbGRFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1jdXJyZW50LXBsYXllcicsIGN1cnJlbnRQbGF5ZXJNYXJrKTtcclxuXHR9O1xyXG5cclxuXHQvKiBob3Zlci9mb2N1cyBvdXQgZmllbGQgaGFuZGxlICovXHJcblx0aGFuZGxlQmx1ciA9ICgpID0+IHtcclxuXHRcdHRoaXMuZmllbGRFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1jdXJyZW50LXBsYXllcicpO1xyXG5cdH07XHJcblxyXG5cdGNsZWFyID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5tYXJrID0gbnVsbDtcclxuXHRcdHRoaXMuZmllbGRFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGBSb3cgJHt0aGlzLnJvdyArIDF9LCBjb2x1bW4gJHt0aGlzLmNvbHVtbiArIDF9LCBlbXB0eSBmaWVsZGApO1xyXG5cdFx0dGhpcy5maWVsZEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWN1cnJlbnQtcGxheWVyJyk7XHJcblx0XHR0aGlzLmZpZWxkRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtbWFyaycpO1xyXG5cdH07XHJcblxyXG5cdGluc2VydEltYWdlcyA9ICgpID0+IHtcclxuXHRcdC8qIE8gaW1hZ2UgKi9cclxuXHRcdGNvbnN0IG9JbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG5cdFx0b0ltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgJy4vZGlzdC9hc3NldHMvaWNvbi1vLnN2ZycpO1xyXG5cdFx0b0ltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgJycpO1xyXG5cdFx0b0ltYWdlLnNldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJywgJ28taWNvbicpO1xyXG5cclxuXHRcdC8qIE8gb3V0bGluZSBpbWFnZSAqL1xyXG5cdFx0Y29uc3Qgb091dGxpbmVJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG5cdFx0b091dGxpbmVJbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsICcuL2Rpc3QvYXNzZXRzL2ljb24tby1vdXRsaW5lLnN2ZycpO1xyXG5cdFx0b091dGxpbmVJbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsICcnKTtcclxuXHRcdG9PdXRsaW5lSW1hZ2Uuc2V0QXR0cmlidXRlKCdkYXRhLW5hbWUnLCAnby1vdXRsaW5lLWljb24nKTtcclxuXHJcblx0XHQvKiBYIGltYWdlICovXHJcblx0XHRjb25zdCB4SW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuXHRcdHhJbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsICcuL2Rpc3QvYXNzZXRzL2ljb24teC5zdmcnKTtcclxuXHRcdHhJbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsICcnKTtcclxuXHRcdHhJbWFnZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScsICd4LWljb24nKTtcclxuXHJcblx0XHQvKiBYIG91dGxpbmUgaW1hZ2UgKi9cclxuXHRcdGNvbnN0IHhPdXRsaW5lSW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuXHRcdHhPdXRsaW5lSW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCAnLi9kaXN0L2Fzc2V0cy9pY29uLXgtb3V0bGluZS5zdmcnKTtcclxuXHRcdHhPdXRsaW5lSW1hZ2Uuc2V0QXR0cmlidXRlKCdhbHQnLCAnJyk7XHJcblx0XHR4T3V0bGluZUltYWdlLnNldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJywgJ3gtb3V0bGluZS1pY29uJyk7XHJcblxyXG5cdFx0LyogYXBwZW5kaW5nIGNyZWF0ZWQgaW1hZ2VzIHRvIHRoZSBidXR0b24gKi9cclxuXHRcdHRoaXMuZmllbGRFbGVtZW50LmFwcGVuZENoaWxkKG9JbWFnZSk7XHJcblx0XHR0aGlzLmZpZWxkRWxlbWVudC5hcHBlbmRDaGlsZCh4SW1hZ2UpO1xyXG5cdFx0dGhpcy5maWVsZEVsZW1lbnQuYXBwZW5kQ2hpbGQob091dGxpbmVJbWFnZSk7XHJcblx0XHR0aGlzLmZpZWxkRWxlbWVudC5hcHBlbmRDaGlsZCh4T3V0bGluZUltYWdlKTtcclxuXHR9O1xyXG5cclxuXHRjaGVjayA9IChtYXJrOiBzdHJpbmcpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMubWFyayA9IG1hcms7XHJcblx0XHR0aGlzLmZpZWxkRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBgUm93ICR7dGhpcy5yb3cgKyAxfSwgY29sdW1uICR7dGhpcy5jb2x1bW4gKyAxfSwgJHt0aGlzLm1hcmt9IG1hcmtgKTtcclxuXHRcdHRoaXMuZmllbGRFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1tYXJrJywgbWFyayk7XHJcblx0fTtcclxuXHJcblx0aXNDaGVja2VkID0gKCk6IGJvb2xlYW4gPT4ge1xyXG5cdFx0cmV0dXJuIHRoaXMubWFyayAhPT0gbnVsbDtcclxuXHR9O1xyXG5cclxuXHRnZXRNYXJrID0gKCk6IHN0cmluZyA9PiB7XHJcblx0XHRyZXR1cm4gdGhpcy5tYXJrO1xyXG5cdH07XHJcbn1cclxuLyogRmllbGQgY2xhc3MgZW5kICovXHJcblxyXG4vKiBQbGF5ZXIgY2xhc3Mgc3RhcnQgKi9cclxuY2xhc3MgUGxheWVyIHtcclxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIG5hbWU6IHN0cmluZywgcHJpdmF0ZSBtYXJrOiBzdHJpbmcsIHByaXZhdGUgc2NvcmU6IG51bWJlciA9IDApIHt9XHJcblxyXG5cdHRvU3RyaW5nID0gKCk6IHN0cmluZyA9PiBgJHt0aGlzLm1hcmt9ICgke3RoaXMubmFtZX0pYDtcclxuXHJcblx0Z2V0TmFtZSA9ICgpOiBzdHJpbmcgPT4gdGhpcy5uYW1lO1xyXG5cclxuXHRnZXRNYXJrID0gKCk6IHN0cmluZyA9PiB0aGlzLm1hcms7XHJcblxyXG5cdGdldFNjb3JlID0gKCk6IG51bWJlciA9PiB0aGlzLnNjb3JlO1xyXG5cclxuXHR1cGRhdGVTY29yZSA9ICgpOiBudW1iZXIgPT4gKyt0aGlzLnNjb3JlO1xyXG59XHJcblxyXG5jbGFzcyBDUFVQbGF5ZXIgZXh0ZW5kcyBQbGF5ZXIge1xyXG5cdG1ha2VNb3ZlID0gKGJvYXJkOiBHYW1lQm9hcmQpOiBbbnVtYmVyLCBudW1iZXJdID0+IHtcclxuXHRcdGNvbnN0IGJvYXJkU2l6ZSA9IGJvYXJkLkJPQVJEX1NJWkU7XHJcblx0XHRsZXQgcm93LCBjb2x1bW47XHJcblx0XHRkbyB7XHJcblx0XHRcdHJvdyA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGJvYXJkU2l6ZSk7XHJcblx0XHRcdGNvbHVtbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGJvYXJkU2l6ZSk7XHJcblx0XHR9IHdoaWxlIChib2FyZC5pc0ZpZWxkQ2hlY2tlZChyb3csIGNvbHVtbikpO1xyXG5cdFx0cmV0dXJuIFtyb3csIGNvbHVtbl07XHJcblx0fTtcclxufVxyXG4vKiBQbGF5ZXIgY2xhc3MgZW5kICovXHJcbi8qIGNsYXNzZXMgZW5kICovXHJcblxyXG4vKiBnYW1lIG9iamVjdHMgKi9cclxuY29uc3QgdGljVGFjVG9lR2FtZTogR2FtZSA9IG5ldyBHYW1lKCcjZ2FtZS1tZW51JywgJyN0aWMtdGFjLXRvZS1nYW1lJyk7XHJcbi8qIGdhbWUgb2JqZWN0cyBlbmQgKi9cclxuIiwiLyogdHlwZXMgZW5kICovXG4vKiBjbGFzc2VzICovXG4vKiBHYW1lIGNsYXNzIHN0YXJ0ICovXG5jbGFzcyBHYW1lIHtcbiAgICBjb25zdHJ1Y3RvcihnYW1lTWVudUlkLCBnYW1lQ29udGFpbmVySWQpIHtcbiAgICAgICAgLyogZ2FtZSBzdGF0ZXMgKi9cbiAgICAgICAgdGhpcy50aWVzID0gMDtcbiAgICAgICAgdGhpcy5nYW1lQ291bnQgPSAwO1xuICAgICAgICB0aGlzLnR1cm5Db3VudCA9IDA7XG4gICAgICAgIHRoaXMub25GaWVsZENsaWNrID0gKGV2KSA9PiB7XG4gICAgICAgICAgICAvKiByZXRyaWV2ZSByb3cgYW5kIGNvbHVtbiBmcm9tIGNsaWNrZWQgYnV0dG9uIGFuZCBtYWtlIG1vdmUgKi9cbiAgICAgICAgICAgIGNvbnN0IGZpZWxkQnV0dG9uID0gZXYudGFyZ2V0O1xuICAgICAgICAgICAgY29uc3Qgcm93ID0gcGFyc2VJbnQoZmllbGRCdXR0b24uZGF0YXNldC5yb3cpO1xuICAgICAgICAgICAgY29uc3QgY29sdW1uID0gcGFyc2VJbnQoZmllbGRCdXR0b24uZGF0YXNldC5jb2x1bW4pO1xuICAgICAgICAgICAgdGhpcy5tYWtlTW92ZShyb3csIGNvbHVtbik7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25HYW1lQ29udGludWUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmdhbWVDb3VudCsrO1xuICAgICAgICAgICAgdGhpcy50dXJuQ291bnQgPSAwO1xuICAgICAgICAgICAgdGhpcy5nYW1lQm9hcmQuY2xlYXIoKTtcbiAgICAgICAgICAgIHRoaXMuc2NvcmVCb2FyZC51cGRhdGVTY29yZSh0aGlzLnhQbGF5ZXIsIHRoaXMub1BsYXllciwgdGhpcy50aWVzKTtcbiAgICAgICAgICAgIHRoaXMubWFrZU1vdmVDUFUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbml0ID0gKG1vZGUsIHAxTWFyaykgPT4ge1xuICAgICAgICAgICAgY29uc3QgcDJNYXJrID0gcDFNYXJrID09PSAneCcgPyAnbycgOiAneCc7XG4gICAgICAgICAgICBsZXQgcDFMYWJlbCwgcGxheWVyMTtcbiAgICAgICAgICAgIGxldCBwMkxhYmVsLCBwbGF5ZXIyO1xuICAgICAgICAgICAgLyogY3JlYXRlcyBsYWJlbHMgYW5kIHBsYXllcnMgZGVwZW5kaW5nIG9uIGdhbWUgbW9kZSAqL1xuICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdzaW5nbGVwbGF5ZXInKSB7XG4gICAgICAgICAgICAgICAgcDFMYWJlbCA9ICd5b3UnO1xuICAgICAgICAgICAgICAgIHAyTGFiZWwgPSAnY3B1JztcbiAgICAgICAgICAgICAgICBwbGF5ZXIyID0gbmV3IENQVVBsYXllcihwMkxhYmVsLCBwMk1hcmspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcDFMYWJlbCA9ICdwMSc7XG4gICAgICAgICAgICAgICAgcDJMYWJlbCA9ICdwMic7XG4gICAgICAgICAgICAgICAgcGxheWVyMiA9IG5ldyBQbGF5ZXIocDJMYWJlbCwgcDJNYXJrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBsYXllcjEgPSBuZXcgUGxheWVyKHAxTGFiZWwsIHAxTWFyayk7XG4gICAgICAgICAgICAvKiBhc3NpZ25zIGNyZWF0ZWQgcGxheWVycyB0byByaWdodCBzcG90cyAqL1xuICAgICAgICAgICAgaWYgKHAxTWFyayA9PT0gJ3gnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy54UGxheWVyID0gcGxheWVyMTtcbiAgICAgICAgICAgICAgICB0aGlzLm9QbGF5ZXIgPSBwbGF5ZXIyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy54UGxheWVyID0gcGxheWVyMjtcbiAgICAgICAgICAgICAgICB0aGlzLm9QbGF5ZXIgPSBwbGF5ZXIxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyogY3JlYXRlcyB0dXBsZSBvZiBwbGF5ZXJzLCB0byBjaG9vc2UgY3VycmVudCBwbGF5ZXIgZGVwZW5kaW5nIG9uIHR1cm4gY291bnRlciAqL1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXJRdWV1ZSA9IFt0aGlzLnhQbGF5ZXIsIHRoaXMub1BsYXllcl07XG4gICAgICAgICAgICAvKiBzaG93cyBnYW1lIGNvbnRhaW5lciAqL1xuICAgICAgICAgICAgdGhpcy5nYW1lQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICAgICAgdGhpcy5zdGFydEdhbWUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdGFydEdhbWUgPSAoKSA9PiB7XG4gICAgICAgICAgICAvKiBpbml0aWFsaXplIHNjb3JlIGJvYXJkIHdpdGggY3JlYXRlZCBwbGF5ZXJzICovXG4gICAgICAgICAgICB0aGlzLnNjb3JlQm9hcmQuaW5pdCh0aGlzLnhQbGF5ZXIsIHRoaXMub1BsYXllciwgdGhpcy50aWVzKTtcbiAgICAgICAgICAgIC8qIGluaXRpYWxpemUgZ2FtZSBib2FyZCAqL1xuICAgICAgICAgICAgdGhpcy5nYW1lQm9hcmQuaW5pdCgpO1xuICAgICAgICAgICAgdGhpcy50dXJuSW5kaWNhdG9yLnVwZGF0ZSh0aGlzLmdldEN1cnJlbnRQbGF5ZXJNYXJrKCkpO1xuICAgICAgICAgICAgLyogaWYgc3RhcnRpbmcgcGxheWVyIGlzIENQVSB0aGVuIG1ha2UgYXV0byBtb3ZlICovXG4gICAgICAgICAgICB0aGlzLm1ha2VNb3ZlQ1BVKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0Q3VycmVudFBsYXllck1hcmsgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50UGxheWVyKCkuZ2V0TWFyaygpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldEN1cnJlbnRQbGF5ZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wbGF5ZXJRdWV1ZVsodGhpcy5nYW1lQ291bnQgKyB0aGlzLnR1cm5Db3VudCkgJSAyXTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5tYWtlTW92ZSA9IChyb3csIGNvbHVtbikgPT4ge1xuICAgICAgICAgICAgLyogb24gZmllbGQgY2xpY2ssIGlmIGZpZWxkIGlzIGNoZWNrZWQgdGhlbiByZXR1cm4gZG9pbmcgbm90aGluZyAqL1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2FtZUJvYXJkLmlzRmllbGRDaGVja2VkKHJvdywgY29sdW1uKSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAvKiBjaGVja3Mgc2VsZWN0ZWQgZmllbGQgKi9cbiAgICAgICAgICAgIHRoaXMuZ2FtZUJvYXJkLmNoZWNrRmllbGQodGhpcy5nZXRDdXJyZW50UGxheWVyKCkuZ2V0TWFyaygpLCByb3csIGNvbHVtbik7XG4gICAgICAgICAgICB0aGlzLmFmdGVyTW92ZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFmdGVyTW92ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHdpbm5pbmdGaWVsZHMgPSB0aGlzLmdhbWVCb2FyZC5nZXRXaW5uaW5nRmllbGRzKCk7XG4gICAgICAgICAgICBpZiAod2lubmluZ0ZpZWxkcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZVJlc3VsdE1vZGFsLnNob3codGhpcy5nZXRDdXJyZW50UGxheWVyKCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q3VycmVudFBsYXllcigpLnVwZGF0ZVNjb3JlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZ2FtZUJvYXJkLmlzRnVsbCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lUmVzdWx0TW9kYWwuc2hvdygpO1xuICAgICAgICAgICAgICAgIHRoaXMudGllcysrO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaW5jcmVhc2VUdXJuQ291bnQoKTtcbiAgICAgICAgICAgIHRoaXMudHVybkluZGljYXRvci51cGRhdGUodGhpcy5nZXRDdXJyZW50UGxheWVyTWFyaygpKTtcbiAgICAgICAgICAgIHRoaXMubWFrZU1vdmVDUFUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5tYWtlTW92ZUNQVSA9ICgpID0+IHtcbiAgICAgICAgICAgIC8qIGFmdGVyIGZpZWxkIGlzIGNoZWNrZWQsIGNoZWNrcyBpZiBjdXJyZW50IHBsYXllciBpcyBDUFUgYW5kIGlmIGlzLCB0aGVuIG1ha2VzIGEgbW92ZSAqL1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0Q3VycmVudFBsYXllcigpIGluc3RhbmNlb2YgQ1BVUGxheWVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYWtlTW92ZSguLi50aGlzLmdldEN1cnJlbnRQbGF5ZXIoKS5tYWtlTW92ZSh0aGlzLmdhbWVCb2FyZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmluY3JlYXNlVHVybkNvdW50ID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuICsrdGhpcy50dXJuQ291bnQ7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2FtZU1lbnUgPSBuZXcgR2FtZU1lbnUoZ2FtZU1lbnVJZCwgdGhpcy5pbml0KTtcbiAgICAgICAgdGhpcy5nYW1lTWVudS5pbml0KCk7XG4gICAgICAgIHRoaXMuZ2FtZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZ2FtZUNvbnRhaW5lcklkKTtcbiAgICAgICAgdGhpcy5zY29yZUJvYXJkID0gbmV3IFNjb3JlQm9hcmQoJyNzY29yZS1ib2FyZCcpO1xuICAgICAgICB0aGlzLmdhbWVCb2FyZCA9IG5ldyBHYW1lQm9hcmQoJyNnYW1lLWJvYXJkJywgdGhpcy5vbkZpZWxkQ2xpY2ssIHRoaXMuZ2V0Q3VycmVudFBsYXllck1hcmspO1xuICAgICAgICB0aGlzLnR1cm5JbmRpY2F0b3IgPSBuZXcgVHVybkluZGljYXRvcigpO1xuICAgICAgICB0aGlzLmdhbWVSZXN1bHRNb2RhbCA9IG5ldyBSZXN1bHRNb2RhbCh0aGlzLm9uR2FtZUNvbnRpbnVlKTtcbiAgICB9XG59XG4vKiBHYW1lIGNsYXNzIGVuZCAqL1xuLyogR2FtZU1lbnUgY2xhc3Mgc3RhcnQgKi9cbmNsYXNzIEdhbWVNZW51IHtcbiAgICBjb25zdHJ1Y3RvcihnYW1lTWVudUlkLCBnYW1lSW5pdCkge1xuICAgICAgICB0aGlzLmdhbWVJbml0ID0gZ2FtZUluaXQ7XG4gICAgICAgIHRoaXMuaW5pdCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZm9ybVN1Ym1pdEJ1dHRvbnMuZm9yRWFjaChidG4gPT4gYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVNZW51U3VibWl0QnV0dG9uKSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFuZGxlTWVudVN1Ym1pdEJ1dHRvbiA9IChldikgPT4ge1xuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIC8qIHNob3dzIGVycm9yIGlmIGFueSBmaWVsZCB3YXNuJ3Qgc2VsZWN0ZWQgKi9cbiAgICAgICAgICAgIGlmICghdGhpcy5pc0FueU9wdGlvblNlbGVjdGVkKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yTXNnLmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yTXNnLmlubmVyVGV4dCA9ICdQbGVhc2Ugc2VsZWN0IG1hcmsgZm9yIHBsYXllciAxJztcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yTXNnLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yTXNnLmlubmVyVGV4dCA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyogcmV0cmlldmUgZ2FtZSBtb2RlIGZyb20gc3VibWl0IGJ1dHRvbiBjbGlja2VkIGFuZCBzZWxlY3RlZCBtYXJrIGZyb20gb3B0aW9ucyAqL1xuICAgICAgICAgICAgY29uc3Qgc3VibWl0QnRuID0gZXYudGFyZ2V0O1xuICAgICAgICAgICAgY29uc3QgZ2FtZU1vZGUgPSBzdWJtaXRCdG4uZGF0YXNldC5tb2RlO1xuICAgICAgICAgICAgY29uc3QgcDFNYXJrID0gdGhpcy5nZXRDaGVja2VkT3B0aW9uTWFyaygpO1xuICAgICAgICAgICAgLyogaGlkZXMgZ2FtZSBtZW51ICovXG4gICAgICAgICAgICB0aGlzLmdhbWVNZW51LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICAgICAgLyogYW5kIHJ1bnMgZ2FtZSBpbml0aWFsaXphdGlvbiAqL1xuICAgICAgICAgICAgdGhpcy5nYW1lSW5pdChnYW1lTW9kZSwgcDFNYXJrKTsgLy8gbWV0aG9kIGZyb20gdGhlIHBhcmVudCBHYW1lIGNsYXNzXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaXNBbnlPcHRpb25TZWxlY3RlZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZm9ybU9wdGlvbnMpLnNvbWUob3B0aW9uID0+IG9wdGlvbi5jaGVja2VkKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRDaGVja2VkT3B0aW9uTWFyayA9ICgpID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIHRoaXMuZm9ybU9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uLmNoZWNrZWQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb24uZGF0YXNldC5tYXJrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdhbWVNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihnYW1lTWVudUlkKTtcbiAgICAgICAgdGhpcy5tZW51Rm9ybSA9IHRoaXMuZ2FtZU1lbnUucXVlcnlTZWxlY3RvcignZm9ybScpO1xuICAgICAgICB0aGlzLmZvcm1PcHRpb25zID0gdGhpcy5tZW51Rm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0nKTtcbiAgICAgICAgdGhpcy5lcnJvck1zZyA9IHRoaXMubWVudUZvcm0ucXVlcnlTZWxlY3RvcignW3JvbGU9XCJhbGVydFwiXScpO1xuICAgICAgICB0aGlzLmZvcm1TdWJtaXRCdXR0b25zID0gdGhpcy5tZW51Rm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpO1xuICAgIH1cbn1cbi8qIEdhbWVNZW51IGNsYXNzIGVuZCAqL1xuLyogVHVybkluZGljYXRvciBjbGFzcyBzdGFydCAqL1xuY2xhc3MgVHVybkluZGljYXRvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlID0gKG1hcmspID0+IHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBsYXllck1hcmtFbGVtZW50LmlubmVyVGV4dCA9IG1hcms7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQbGF5ZXJNYXJrSWNvbi5zcmMgPSBgLi9kaXN0L2Fzc2V0cy9pY29uLSR7bWFya30uc3ZnYDtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jdXJyZW50UGxheWVyTWFya0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY3VycmVudC1wbGF5ZXItbWFyaycpO1xuICAgICAgICB0aGlzLmN1cnJlbnRQbGF5ZXJNYXJrSWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjdXJyZW50LXBsYXllci1tYXJrLWljb24nKTtcbiAgICB9XG59XG4vKiBUdXJuSW5kaWNhdG9yIGNsYXNzIGVuZCAqL1xuLyogU2NvcmVCb2FyZCBjbGFzcyBzdGFydCAqL1xuY2xhc3MgU2NvcmVCb2FyZCB7XG4gICAgY29uc3RydWN0b3Ioc2NvcmVCb2FyZElkKSB7XG4gICAgICAgIHRoaXMuaW5pdCA9IChwMSwgcDIsIHRpZXMgPSAwKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnAxTGFiZWwuaW5uZXJUZXh0ID0gcDEudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHRoaXMucDJMYWJlbC5pbm5lclRleHQgPSBwMi50b1N0cmluZygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTY29yZShwMSwgcDIsIHRpZXMpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnVwZGF0ZVNjb3JlID0gKHAxLCBwMiwgdGllcykgPT4ge1xuICAgICAgICAgICAgdGhpcy5wMVNjb3JlLmlubmVyVGV4dCA9IHAxLmdldFNjb3JlKCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHRoaXMucDJTY29yZS5pbm5lclRleHQgPSBwMi5nZXRTY29yZSgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB0aGlzLnRpZXNTY29yZS5pbm5lclRleHQgPSB0aWVzLnRvU3RyaW5nKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2NvcmVCb2FyZElkKTtcbiAgICAgICAgdGhpcy5wMUxhYmVsID0gdGhpcy5zY29yZUJvYXJkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNwMS1nYW1lLW5hbWUnKTtcbiAgICAgICAgdGhpcy5wMVNjb3JlID0gdGhpcy5zY29yZUJvYXJkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNwMS1nYW1lLXNjb3JlJyk7XG4gICAgICAgIHRoaXMucDJMYWJlbCA9IHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjcDItZ2FtZS1uYW1lJyk7XG4gICAgICAgIHRoaXMucDJTY29yZSA9IHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjcDItZ2FtZS1zY29yZScpO1xuICAgICAgICB0aGlzLnRpZXNTY29yZSA9IHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjZ2FtZS10aWVzJyk7XG4gICAgfVxufVxuLyogU2NvcmVCb2FyZCBjbGFzcyBlbmQgKi9cbi8qIFJlc3VsdE1vZGFsIGNsYXNzIHN0YXJ0ICovXG5jbGFzcyBSZXN1bHRNb2RhbCB7XG4gICAgY29uc3RydWN0b3IoZ2FtZUNvbnRpbnVlSGFuZGxpbmcpIHtcbiAgICAgICAgdGhpcy5nYW1lQ29udGludWVIYW5kbGluZyA9IGdhbWVDb250aW51ZUhhbmRsaW5nO1xuICAgICAgICB0aGlzLmhhbmRsZUNvbnRpbnVlID0gKGV2KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmdhbWVDb250aW51ZUhhbmRsaW5nKCk7XG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zaG93ID0gKHdpbm5lciA9IG51bGwpID0+IHtcbiAgICAgICAgICAgIHRoaXMubW9kYWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJlc3VsdCh3aW5uZXIpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmhpZGUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnVwZGF0ZVJlc3VsdCA9ICh3aW5uZXIpID0+IHtcbiAgICAgICAgICAgIGlmICh3aW5uZXIgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5VGllUmVzdWx0KCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5V2lubmVyUmVzdWx0KHdpbm5lcik7XG4gICAgICAgICAgICB0aGlzLnF1aXRCdXR0b24uZm9jdXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kaXNwbGF5VGllUmVzdWx0ID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5tb2RhbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtd2lubmVyJywgJ3RpZScpO1xuICAgICAgICAgICAgdGhpcy5tb2RhbEhlYWRpbmcuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICB0aGlzLm1vZGFsSGVhZGluZy5pbm5lclRleHQgPSAnUm91bmQgdGllZCc7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZGlzcGxheVdpbm5lclJlc3VsdCA9ICh3aW5uZXIpID0+IHtcbiAgICAgICAgICAgIHRoaXMubW9kYWwuc2V0QXR0cmlidXRlKCdkYXRhLXdpbm5lcicsIHdpbm5lci5nZXRNYXJrKCkpO1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRoaXMuZ2V0Um91bmRNZXNzYWdlKHdpbm5lci5nZXROYW1lKCkpO1xuICAgICAgICAgICAgdGhpcy5tb2RhbE1lc3NhZ2UuaW5uZXJUZXh0ID0gbWVzc2FnZTtcbiAgICAgICAgICAgIHRoaXMuc2V0UmVzdWx0SGVhZGluZyh3aW5uZXIpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldFJlc3VsdEhlYWRpbmcgPSAod2lubmVyKSA9PiB7XG4gICAgICAgICAgICAvKiBjbGVhciBoZWFkaW5nIGJlZm9yZSBzZXR0aW5nIG1lc3NhZ2UgKi9cbiAgICAgICAgICAgIHRoaXMubW9kYWxIZWFkaW5nLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgY29uc3QgbWFyayA9IHdpbm5lci5nZXRNYXJrKCk7XG4gICAgICAgICAgICAvKiB3aW5uaW5nIG1hcmsgaWNvbiAqL1xuICAgICAgICAgICAgY29uc3QgaW1nRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgaW1nRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3NyYycsIGAuL2Rpc3QvYXNzZXRzL2ljb24tJHttYXJrfS5zdmdgKTtcbiAgICAgICAgICAgIGltZ0VsZW1lbnQuc2V0QXR0cmlidXRlKCdhbHQnLCAnJyk7XG4gICAgICAgICAgICAvKiBoaWRkZW4gbWFyayBmb3Igc2NyZWVuIHJlYWRlcnMgKi9cbiAgICAgICAgICAgIGNvbnN0IGhpZGRlbk1hcmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICBoaWRkZW5NYXJrLmNsYXNzTGlzdC5hZGQoJ3Zpc3VhbGx5LWhpZGRlbicpO1xuICAgICAgICAgICAgaGlkZGVuTWFyay5pbm5lclRleHQgPSBtYXJrO1xuICAgICAgICAgICAgLyogbWVzc2FnZSBhZnRlciBpbWFnZSAqL1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZVRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgndGFrZXMgdGhlIHJvdW5kJyk7XG4gICAgICAgICAgICAvKiBzcGFuIGNvbnRhaW5lciBmb3IgaGlkZGVuIG1hcmsgYW5kIG1lc3NhZ2UgdGV4dCAqL1xuICAgICAgICAgICAgY29uc3QgaGVhZGluZ1NwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICBoZWFkaW5nU3Bhbi5hcHBlbmRDaGlsZChoaWRkZW5NYXJrKTtcbiAgICAgICAgICAgIGhlYWRpbmdTcGFuLmFwcGVuZENoaWxkKG1lc3NhZ2VUZXh0KTtcbiAgICAgICAgICAgIHRoaXMubW9kYWxIZWFkaW5nLmFwcGVuZENoaWxkKGltZ0VsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5tb2RhbEhlYWRpbmcuYXBwZW5kQ2hpbGQoaGVhZGluZ1NwYW4pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldFJvdW5kTWVzc2FnZSA9IChwbGF5ZXJOYW1lKSA9PiB7XG4gICAgICAgICAgICBsZXQgbWVzc2FnZTtcbiAgICAgICAgICAgIHN3aXRjaCAocGxheWVyTmFtZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3AxJzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9ICdQbGF5ZXIgMSB3aW5zISc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3AyJzpcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9ICdQbGF5ZXIgMiB3aW5zISc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3lvdSc6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAnWW91IHdvbiEnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjcHUnOlxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gJ09oIG5vLCB5b3UgbG9zdC4uLic7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dhbWUtcmVzdWx0LW1vZGFsJyk7XG4gICAgICAgIHRoaXMubW9kYWxNZXNzYWdlID0gdGhpcy5tb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX21lc3NhZ2UnKTtcbiAgICAgICAgdGhpcy5tb2RhbEhlYWRpbmcgPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9faGVhZGluZycpO1xuICAgICAgICB0aGlzLnF1aXRCdXR0b24gPSB0aGlzLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbltkYXRhLWFjdGlvbj1cInF1aXRcIl0nKTtcbiAgICAgICAgdGhpcy5jb250aW51ZUJ1dHRvbiA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignYnV0dG9uW2RhdGEtYWN0aW9uPVwiY29udGludWVcIl0nKTtcbiAgICAgICAgdGhpcy5jb250aW51ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlQ29udGludWUpO1xuICAgIH1cbn1cbi8qIFJlc3VsdE1vZGFsIGNsYXNzIGVuZCAqL1xuLyogR2FtZUJvYXJkIGNsYXNzIHN0YXJ0ICovXG5jbGFzcyBHYW1lQm9hcmQge1xuICAgIGNvbnN0cnVjdG9yKGdhbWVCb2FyZElkLCBvbkZpZWxkQ2xpY2ssIGdldEN1cnJlbnRNYXJrKSB7XG4gICAgICAgIHRoaXMub25GaWVsZENsaWNrID0gb25GaWVsZENsaWNrO1xuICAgICAgICB0aGlzLmdldEN1cnJlbnRNYXJrID0gZ2V0Q3VycmVudE1hcms7XG4gICAgICAgIHRoaXMuQk9BUkRfU0laRSA9IDM7XG4gICAgICAgIHRoaXMuYm9hcmQgPSBbW10sIFtdLCBbXV07XG4gICAgICAgIHRoaXMuaW5pdCA9ICgpID0+IHtcbiAgICAgICAgICAgIC8qIGdldHMgYWxsIGJvYXJkIGZpZWxkcyAqL1xuICAgICAgICAgICAgY29uc3QgYm9hcmRGaWVsZEVsZW1lbnRzID0gdGhpcy5ib2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmdhbWUtYm9hcmRfX2ZpZWxkJyk7XG4gICAgICAgICAgICAvKiBjcmVhdGluZyBmaWVsZHMgKi9cbiAgICAgICAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IHRoaXMuYm9hcmQubGVuZ3RoOyByb3crKykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGNvbHVtbiA9IDA7IGNvbHVtbiA8IHRoaXMuQk9BUkRfU0laRTsgY29sdW1uKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ib2FyZFtyb3ddLnB1c2gobmV3IEZpZWxkKHJvdywgY29sdW1uLCBib2FyZEZpZWxkRWxlbWVudHNbY29sdW1uICsgcm93ICogdGhpcy5CT0FSRF9TSVpFXSwgXG4gICAgICAgICAgICAgICAgICAgIC8vIGhhbmRsZXMgZm9yIGZpZWxkKGJ1dHRvbnMpIGV2ZW50c1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRmllbGRDbGljaywgdGhpcy5nZXRDdXJyZW50TWFyaykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLyogY2hlY2tzL21hcmtzIGZpZWxkIG9uIHBhc3NlZCBwb3NpdGlvbiAqL1xuICAgICAgICB0aGlzLmNoZWNrRmllbGQgPSAobWFyaywgcm93LCBjb2x1bW4pID0+IHtcbiAgICAgICAgICAgIGlmIChyb3cgPCB0aGlzLmJvYXJkLmxlbmd0aCAmJiBjb2x1bW4gPCB0aGlzLmJvYXJkWzBdLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbcm93XVtjb2x1bW5dLmNoZWNrKG1hcmspO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmlzRmllbGRDaGVja2VkID0gKHJvdywgY29sdW1uKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ib2FyZFtyb3ddW2NvbHVtbl0uaXNDaGVja2VkKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaXNGdWxsID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYm9hcmQuZmxhdCgpLmV2ZXJ5KGZpZWxkID0+IGZpZWxkLmlzQ2hlY2tlZCgpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRXaW5uaW5nRmllbGRzID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tSb3dzKCkgfHwgdGhpcy5jaGVja0NvbHVtbnMoKSB8fCB0aGlzLmNoZWNrRGlhZ29uYWwoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jaGVja1Jvd3MgPSAoKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCB0aGlzLkJPQVJEX1NJWkU7IHJvdysrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYm9hcmRbcm93XVswXS5nZXRNYXJrKCkgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ib2FyZFtyb3ddWzBdLmdldE1hcmsoKSA9PT0gdGhpcy5ib2FyZFtyb3ddWzFdLmdldE1hcmsoKSAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJvYXJkW3Jvd11bMV0uZ2V0TWFyaygpID09PSB0aGlzLmJvYXJkW3Jvd11bMl0uZ2V0TWFyaygpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3RoaXMuYm9hcmRbcm93XVswXSwgdGhpcy5ib2FyZFtyb3ddWzFdLCB0aGlzLmJvYXJkW3Jvd11bMl1dO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2hlY2tDb2x1bW5zID0gKCkgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgdGhpcy5CT0FSRF9TSVpFOyBjb2x1bW4rKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmJvYXJkWzBdW2NvbHVtbl0uZ2V0TWFyaygpICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbMF1bY29sdW1uXS5nZXRNYXJrKCkgPT09IHRoaXMuYm9hcmRbMV1bY29sdW1uXS5nZXRNYXJrKCkgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ib2FyZFsxXVtjb2x1bW5dLmdldE1hcmsoKSA9PT0gdGhpcy5ib2FyZFsyXVtjb2x1bW5dLmdldE1hcmsoKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFt0aGlzLmJvYXJkWzBdW2NvbHVtbl0sIHRoaXMuYm9hcmRbMV1bY29sdW1uXSwgdGhpcy5ib2FyZFsyXVtjb2x1bW5dXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNoZWNrRGlhZ29uYWwgPSAoKSA9PiB7XG4gICAgICAgICAgICAvKiB0b3AgbGVmdCwgbWlkZGxlLCBhbmQgYm90dG9tIHJpZ2h0ICovXG4gICAgICAgICAgICBpZiAodGhpcy5ib2FyZFsxXVsxXS5nZXRNYXJrKCkgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmJvYXJkWzBdWzBdLmdldE1hcmsoKSA9PT0gdGhpcy5ib2FyZFsxXVsxXS5nZXRNYXJrKCkgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmJvYXJkWzFdWzFdLmdldE1hcmsoKSA9PT0gdGhpcy5ib2FyZFsyXVsyXS5nZXRNYXJrKCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFt0aGlzLmJvYXJkWzBdWzBdLCB0aGlzLmJvYXJkWzFdWzFdLCB0aGlzLmJvYXJkWzJdWzJdXTtcbiAgICAgICAgICAgIC8qIHRvcCByaWdodCwgbWlkZGxlLCBhbmQgYm90dG9tIGxlZnQgKi9cbiAgICAgICAgICAgIGlmICh0aGlzLmJvYXJkWzFdWzFdLmdldE1hcmsoKSAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbMF1bMl0uZ2V0TWFyaygpID09PSB0aGlzLmJvYXJkWzFdWzFdLmdldE1hcmsoKSAmJlxuICAgICAgICAgICAgICAgIHRoaXMuYm9hcmRbMV1bMV0uZ2V0TWFyaygpID09PSB0aGlzLmJvYXJkWzJdWzBdLmdldE1hcmsoKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gW3RoaXMuYm9hcmRbMF1bMF0sIHRoaXMuYm9hcmRbMV1bMV0sIHRoaXMuYm9hcmRbMl1bMl1dO1xuICAgICAgICAgICAgLyogbm8gZmllbGRzIG1hdGNoZWQgKi9cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmNsZWFyID0gKCkgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgdGhpcy5ib2FyZC5sZW5ndGg7IHJvdysrKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgdGhpcy5CT0FSRF9TSVpFOyBjb2x1bW4rKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJvYXJkW3Jvd11bY29sdW1uXS5jbGVhcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5ib2FyZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGdhbWVCb2FyZElkKTtcbiAgICB9XG59XG4vKiBHYW1lQm9hcmQgY2xhc3MgZW5kICovXG4vKiBGaWVsZCBjbGFzcyBzdGFydCAqL1xuY2xhc3MgRmllbGQge1xuICAgIGNvbnN0cnVjdG9yKHJvdywgY29sdW1uLCBmaWVsZEVsZW1lbnQsIGdhbWVPbkNsaWNrSGFuZGxlciwgZ2V0Q3VycmVudE1hcmspIHtcbiAgICAgICAgdGhpcy5yb3cgPSByb3c7XG4gICAgICAgIHRoaXMuY29sdW1uID0gY29sdW1uO1xuICAgICAgICB0aGlzLmZpZWxkRWxlbWVudCA9IGZpZWxkRWxlbWVudDtcbiAgICAgICAgdGhpcy5nYW1lT25DbGlja0hhbmRsZXIgPSBnYW1lT25DbGlja0hhbmRsZXI7XG4gICAgICAgIHRoaXMuZ2V0Q3VycmVudE1hcmsgPSBnZXRDdXJyZW50TWFyaztcbiAgICAgICAgdGhpcy5tYXJrID0gbnVsbDtcbiAgICAgICAgLyogaG92ZXIvZm9jdXMgaW4gZmllbGQgaGFuZGxlICovXG4gICAgICAgIHRoaXMuaGFuZGxlSG92ZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50UGxheWVyTWFyayA9IHRoaXMuZ2V0Q3VycmVudE1hcmsoKTtcbiAgICAgICAgICAgIHRoaXMuZmllbGRFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1jdXJyZW50LXBsYXllcicsIGN1cnJlbnRQbGF5ZXJNYXJrKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyogaG92ZXIvZm9jdXMgb3V0IGZpZWxkIGhhbmRsZSAqL1xuICAgICAgICB0aGlzLmhhbmRsZUJsdXIgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmZpZWxkRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtY3VycmVudC1wbGF5ZXInKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jbGVhciA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubWFyayA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmZpZWxkRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBgUm93ICR7dGhpcy5yb3cgKyAxfSwgY29sdW1uICR7dGhpcy5jb2x1bW4gKyAxfSwgZW1wdHkgZmllbGRgKTtcbiAgICAgICAgICAgIHRoaXMuZmllbGRFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1jdXJyZW50LXBsYXllcicpO1xuICAgICAgICAgICAgdGhpcy5maWVsZEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLW1hcmsnKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbnNlcnRJbWFnZXMgPSAoKSA9PiB7XG4gICAgICAgICAgICAvKiBPIGltYWdlICovXG4gICAgICAgICAgICBjb25zdCBvSW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgICAgIG9JbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsICcuL2Rpc3QvYXNzZXRzL2ljb24tby5zdmcnKTtcbiAgICAgICAgICAgIG9JbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsICcnKTtcbiAgICAgICAgICAgIG9JbWFnZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScsICdvLWljb24nKTtcbiAgICAgICAgICAgIC8qIE8gb3V0bGluZSBpbWFnZSAqL1xuICAgICAgICAgICAgY29uc3Qgb091dGxpbmVJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgb091dGxpbmVJbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsICcuL2Rpc3QvYXNzZXRzL2ljb24tby1vdXRsaW5lLnN2ZycpO1xuICAgICAgICAgICAgb091dGxpbmVJbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsICcnKTtcbiAgICAgICAgICAgIG9PdXRsaW5lSW1hZ2Uuc2V0QXR0cmlidXRlKCdkYXRhLW5hbWUnLCAnby1vdXRsaW5lLWljb24nKTtcbiAgICAgICAgICAgIC8qIFggaW1hZ2UgKi9cbiAgICAgICAgICAgIGNvbnN0IHhJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgeEltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgJy4vZGlzdC9hc3NldHMvaWNvbi14LnN2ZycpO1xuICAgICAgICAgICAgeEltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgJycpO1xuICAgICAgICAgICAgeEltYWdlLnNldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJywgJ3gtaWNvbicpO1xuICAgICAgICAgICAgLyogWCBvdXRsaW5lIGltYWdlICovXG4gICAgICAgICAgICBjb25zdCB4T3V0bGluZUltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgICAgICB4T3V0bGluZUltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgJy4vZGlzdC9hc3NldHMvaWNvbi14LW91dGxpbmUuc3ZnJyk7XG4gICAgICAgICAgICB4T3V0bGluZUltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgJycpO1xuICAgICAgICAgICAgeE91dGxpbmVJbWFnZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScsICd4LW91dGxpbmUtaWNvbicpO1xuICAgICAgICAgICAgLyogYXBwZW5kaW5nIGNyZWF0ZWQgaW1hZ2VzIHRvIHRoZSBidXR0b24gKi9cbiAgICAgICAgICAgIHRoaXMuZmllbGRFbGVtZW50LmFwcGVuZENoaWxkKG9JbWFnZSk7XG4gICAgICAgICAgICB0aGlzLmZpZWxkRWxlbWVudC5hcHBlbmRDaGlsZCh4SW1hZ2UpO1xuICAgICAgICAgICAgdGhpcy5maWVsZEVsZW1lbnQuYXBwZW5kQ2hpbGQob091dGxpbmVJbWFnZSk7XG4gICAgICAgICAgICB0aGlzLmZpZWxkRWxlbWVudC5hcHBlbmRDaGlsZCh4T3V0bGluZUltYWdlKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jaGVjayA9IChtYXJrKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm1hcmsgPSBtYXJrO1xuICAgICAgICAgICAgdGhpcy5maWVsZEVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgYFJvdyAke3RoaXMucm93ICsgMX0sIGNvbHVtbiAke3RoaXMuY29sdW1uICsgMX0sICR7dGhpcy5tYXJrfSBtYXJrYCk7XG4gICAgICAgICAgICB0aGlzLmZpZWxkRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbWFyaycsIG1hcmspO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmlzQ2hlY2tlZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcmsgIT09IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0TWFyayA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcms7XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmZpZWxkRWxlbWVudCkge1xuICAgICAgICAgICAgLyogY2xpY2sgaGFuZGxpbmcgKi9cbiAgICAgICAgICAgIHRoaXMuZmllbGRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5nYW1lT25DbGlja0hhbmRsZXIpO1xuICAgICAgICAgICAgLyogaG92ZXIvZm9jdXMgaW4gaGFuZGxpbmcgKi9cbiAgICAgICAgICAgIHRoaXMuZmllbGRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIHRoaXMuaGFuZGxlSG92ZXIpO1xuICAgICAgICAgICAgdGhpcy5maWVsZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIHRoaXMuaGFuZGxlSG92ZXIpO1xuICAgICAgICAgICAgLyogaG92ZXIvZm9jdXMgb3V0IGhhbmRsaW5nICovXG4gICAgICAgICAgICB0aGlzLmZpZWxkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIHRoaXMuaGFuZGxlQmx1cik7XG4gICAgICAgICAgICB0aGlzLmZpZWxkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIHRoaXMuaGFuZGxlQmx1cik7XG4gICAgICAgICAgICAvKiBzZXR0aW5nIGF0dHJpYnV0cyAqL1xuICAgICAgICAgICAgdGhpcy5maWVsZEVsZW1lbnQuZGF0YXNldC5yb3cgPSB0aGlzLnJvdy50b1N0cmluZygpO1xuICAgICAgICAgICAgdGhpcy5maWVsZEVsZW1lbnQuZGF0YXNldC5jb2x1bW4gPSB0aGlzLmNvbHVtbi50b1N0cmluZygpO1xuICAgICAgICAgICAgdGhpcy5maWVsZEVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgYFJvdyAke3RoaXMucm93ICsgMX0sIGNvbHVtbiAke3RoaXMuY29sdW1uICsgMX0sIGVtcHR5IGZpZWxkYCk7XG4gICAgICAgICAgICB0aGlzLmluc2VydEltYWdlcygpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyogRmllbGQgY2xhc3MgZW5kICovXG4vKiBQbGF5ZXIgY2xhc3Mgc3RhcnQgKi9cbmNsYXNzIFBsYXllciB7XG4gICAgY29uc3RydWN0b3IobmFtZSwgbWFyaywgc2NvcmUgPSAwKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMubWFyayA9IG1hcms7XG4gICAgICAgIHRoaXMuc2NvcmUgPSBzY29yZTtcbiAgICAgICAgdGhpcy50b1N0cmluZyA9ICgpID0+IGAke3RoaXMubWFya30gKCR7dGhpcy5uYW1lfSlgO1xuICAgICAgICB0aGlzLmdldE5hbWUgPSAoKSA9PiB0aGlzLm5hbWU7XG4gICAgICAgIHRoaXMuZ2V0TWFyayA9ICgpID0+IHRoaXMubWFyaztcbiAgICAgICAgdGhpcy5nZXRTY29yZSA9ICgpID0+IHRoaXMuc2NvcmU7XG4gICAgICAgIHRoaXMudXBkYXRlU2NvcmUgPSAoKSA9PiArK3RoaXMuc2NvcmU7XG4gICAgfVxufVxuY2xhc3MgQ1BVUGxheWVyIGV4dGVuZHMgUGxheWVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5tYWtlTW92ZSA9IChib2FyZCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYm9hcmRTaXplID0gYm9hcmQuQk9BUkRfU0laRTtcbiAgICAgICAgICAgIGxldCByb3csIGNvbHVtbjtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICByb3cgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBib2FyZFNpemUpO1xuICAgICAgICAgICAgICAgIGNvbHVtbiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGJvYXJkU2l6ZSk7XG4gICAgICAgICAgICB9IHdoaWxlIChib2FyZC5pc0ZpZWxkQ2hlY2tlZChyb3csIGNvbHVtbikpO1xuICAgICAgICAgICAgcmV0dXJuIFtyb3csIGNvbHVtbl07XG4gICAgICAgIH07XG4gICAgfVxufVxuLyogUGxheWVyIGNsYXNzIGVuZCAqL1xuLyogY2xhc3NlcyBlbmQgKi9cbi8qIGdhbWUgb2JqZWN0cyAqL1xuY29uc3QgdGljVGFjVG9lR2FtZSA9IG5ldyBHYW1lKCcjZ2FtZS1tZW51JywgJyN0aWMtdGFjLXRvZS1nYW1lJyk7XG4vKiBnYW1lIG9iamVjdHMgZW5kICovXG4iXX0=
