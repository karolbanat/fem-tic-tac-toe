"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(r){var n=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(r);return _possibleConstructorReturn(this,n?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _createForOfIteratorHelper(e,t){var r,n,o,a,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return n=!(r=!0),{s:function(){i=i.call(e)},n:function(){var e=i.next();return r=e.done,e},e:function(e){n=!0,o=e},f:function(){try{r||null==i.return||i.return()}finally{if(n)throw o}}};if(Array.isArray(e)||(i=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var r;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Game=_createClass(function e(t,r){var o=this;_classCallCheck(this,e),this.ties=0,this.gameCount=0,this.turnCount=0,this.init=function(e,t){var r,n="x"===t?"o":"x",e="singleplayer"===e?(r="you",new CPUPlayer("cpu",n)):(r="p1",new Player("p2",n)),n=new Player(r,t);"x"===t?(o.xPlayer=n,o.oPlayer=e):(o.xPlayer=e,o.oPlayer=n),o.playerQueue=[o.xPlayer,o.oPlayer],o.gameContainer.classList.remove("hidden"),o.startGame()},this.startGame=function(){o.scoreBoard.init(o.xPlayer,o.oPlayer,o.ties),o.gameBoard.init(),o.turnIndicator.update(o.getCurrentPlayerMark()),o.makeMoveCPU()},this.onFieldClick=function(e){var e=e.target,t=parseInt(e.dataset.row),e=parseInt(e.dataset.column);o.makeMove(t,e)},this.getCurrentPlayerMark=function(){return o.getCurrentPlayer().getMark()},this.getCurrentPlayer=function(){return o.playerQueue[o.turnCount%2]},this.makeMove=function(e,t){o.gameBoard.isFieldChecked(e,t)||(o.gameBoard.checkField(o.getCurrentPlayer().getMark(),e,t),o.afterMove())},this.afterMove=function(){null!==o.gameBoard.getWinningFields()?console.log(o.getCurrentPlayerMark()+" is winner"):o.gameBoard.isFull()?console.log("a tie"):(o.increaseTurnCount(),o.turnIndicator.update(o.getCurrentPlayerMark()),o.makeMoveCPU())},this.makeMoveCPU=function(){o.getCurrentPlayer()instanceof CPUPlayer&&o.makeMove.apply(o,_toConsumableArray(o.getCurrentPlayer().makeMove(o.gameBoard)))},this.increaseTurnCount=function(){return++o.turnCount},this.gameMenu=new GameMenu(t,this.init),this.gameMenu.init(),this.gameContainer=document.querySelector(r),this.scoreBoard=new ScoreBoard("#score-board"),this.gameBoard=new GameBoard("#game-board",this.onFieldClick,this.getCurrentPlayerMark),this.turnIndicator=new TurnIndicator}),GameMenu=_createClass(function e(t,r){var n=this;_classCallCheck(this,e),this.gameInit=r,this.init=function(){n.formSubmitButtons.forEach(function(e){return e.addEventListener("click",n.handleMenuSubmitButton)})},this.handleMenuSubmitButton=function(e){var t;e.preventDefault(),n.isAnyOptionSelected()?(n.errorMsg.classList.remove("visible"),n.errorMsg.innerText="",e=e.target.dataset.mode,t=n.getCheckedOptionMark(),n.gameMenu.classList.add("hidden"),n.gameInit(e,t)):(n.errorMsg.classList.add("visible"),n.errorMsg.innerText="Please select mark for player 1")},this.isAnyOptionSelected=function(){return Array.from(n.formOptions).some(function(e){return e.checked})},this.getCheckedOptionMark=function(){var e,t=_createForOfIteratorHelper(n.formOptions);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(r.checked)return r.dataset.mark}}catch(e){t.e(e)}finally{t.f()}return""},this.gameMenu=document.querySelector(t),this.menuForm=this.gameMenu.querySelector("form"),this.formOptions=this.menuForm.querySelectorAll('input[type="radio"]'),this.errorMsg=this.menuForm.querySelector('[role="alert"]'),this.formSubmitButtons=this.menuForm.querySelectorAll('button[type="submit"]')}),TurnIndicator=_createClass(function e(){var t=this;_classCallCheck(this,e),this.update=function(e){t.currentPlayerMarkElement.innerText=e,t.currentPlayerMarkIcon.src="./dist/assets/icon-".concat(e,".svg")},this.currentPlayerMarkElement=document.querySelector("#current-player-mark"),this.currentPlayerMarkIcon=document.querySelector("#current-player-mark-icon")}),ScoreBoard=_createClass(function e(t){var n=this;_classCallCheck(this,e),this.init=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;n.p1Label.innerText=e.toString(),n.p2Label.innerText=t.toString(),n.updateScore(e,t,r)},this.updateScore=function(e,t,r){n.p1Score.innerText=e.getScore().toString(),n.p2Score.innerText=t.getScore().toString(),n.tiesScore.innerText=r.toString()},this.scoreBoardContainer=document.querySelector(t),this.p1Label=this.scoreBoardContainer.querySelector("#p1-game-name"),this.p1Score=this.scoreBoardContainer.querySelector("#p1-game-score"),this.p2Label=this.scoreBoardContainer.querySelector("#p2-game-name"),this.p2Score=this.scoreBoardContainer.querySelector("#p2-game-score"),this.tiesScore=this.scoreBoardContainer.querySelector("#game-ties")}),GameBoard=_createClass(function e(t,r,n){var o=this;_classCallCheck(this,e),this.onFieldClick=r,this.getCurrentMark=n,this.BOARD_SIZE=3,this.board=[[],[],[]],this.init=function(){for(var e=o.boardElement.querySelectorAll(".game-board__field"),t=0;t<o.board.length;t++)for(var r=0;r<o.BOARD_SIZE;r++)o.board[t].push(new Field(t,r,e[r+t*o.BOARD_SIZE],o.onFieldClick,o.getCurrentMark))},this.checkField=function(e,t,r){t<o.board.length&&r<o.board[0].length&&o.board[t][r].check(e)},this.isFieldChecked=function(e,t){return o.board[e][t].isChecked()},this.isFull=function(){return o.board.flat().every(function(e){return e.isChecked()})},this.getWinningFields=function(){return o.checkRows()||o.checkColumns()||o.checkDiagonal()},this.checkRows=function(){for(var e=0;e<o.BOARD_SIZE;e++)if(null!==o.board[e][0].getMark()&&o.board[e][0].getMark()===o.board[e][1].getMark()&&o.board[e][1].getMark()===o.board[e][2].getMark())return[o.board[e][0],o.board[e][1],o.board[e][2]];return null},this.checkColumns=function(){for(var e=0;e<o.BOARD_SIZE;e++)if(null!==o.board[0][e].getMark()&&o.board[0][e].getMark()===o.board[1][e].getMark()&&o.board[1][e].getMark()===o.board[2][e].getMark())return[o.board[0][e],o.board[1][e],o.board[2][e]];return null},this.checkDiagonal=function(){return null!==o.board[1][1].getMark()&&o.board[0][0].getMark()===o.board[1][1].getMark()&&o.board[1][1].getMark()===o.board[2][2].getMark()||null!==o.board[1][1].getMark()&&o.board[0][2].getMark()===o.board[1][1].getMark()&&o.board[1][1].getMark()===o.board[2][0].getMark()?[o.board[0][0],o.board[1][1],o.board[2][2]]:null},this.boardElement=document.querySelector(t)}),Field=_createClass(function e(t,r,n,o,a){var i=this;_classCallCheck(this,e),this.row=t,this.column=r,this.fieldElement=n,this.gameOnClickHandler=o,this.getCurrentMark=a,this.mark=null,this.handleHover=function(){var e=i.getCurrentMark();i.fieldElement.setAttribute("data-current-player",e)},this.handleBlur=function(){i.fieldElement.removeAttribute("data-current-player")},this.insertImages=function(){var e=document.createElement("img"),t=(e.setAttribute("src","./dist/assets/icon-o.svg"),e.setAttribute("alt",""),e.setAttribute("data-name","o-icon"),document.createElement("img")),r=(t.setAttribute("src","./dist/assets/icon-o-outline.svg"),t.setAttribute("alt",""),t.setAttribute("data-name","o-outline-icon"),document.createElement("img")),n=(r.setAttribute("src","./dist/assets/icon-x.svg"),r.setAttribute("alt",""),r.setAttribute("data-name","x-icon"),document.createElement("img"));n.setAttribute("src","./dist/assets/icon-x-outline.svg"),n.setAttribute("alt",""),n.setAttribute("data-name","x-outline-icon"),i.fieldElement.appendChild(e),i.fieldElement.appendChild(r),i.fieldElement.appendChild(t),i.fieldElement.appendChild(n)},this.check=function(e){i.mark=e,i.fieldElement.setAttribute("aria-label","Row ".concat(i.row+1,", column ").concat(i.column+1,", ").concat(i.mark," mark")),i.fieldElement.setAttribute("data-mark",e)},this.isChecked=function(){return null!==i.mark},this.getMark=function(){return i.mark},this.fieldElement&&(this.fieldElement.addEventListener("click",this.gameOnClickHandler),this.fieldElement.addEventListener("mouseover",this.handleHover),this.fieldElement.addEventListener("focusin",this.handleHover),this.fieldElement.addEventListener("mouseout",this.handleBlur),this.fieldElement.addEventListener("focusout",this.handleBlur),this.fieldElement.dataset.row=this.row.toString(),this.fieldElement.dataset.column=this.column.toString(),this.fieldElement.setAttribute("aria-label","Row ".concat(this.row+1,", column ").concat(this.column+1,", empty field")),this.insertImages())}),Player=_createClass(function e(t,r){var n=this,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck(this,e),this.name=t,this.mark=r,this.score=o,this.toString=function(){return"".concat(n.mark," (").concat(n.name,")")},this.getMark=function(){return n.mark},this.getScore=function(){return n.score},this.updateScore=function(){return++n.score}}),CPUPlayer=function(){_inherits(r,Player);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.apply(this,arguments)).makeMove=function(e){for(var t,r,n=e.BOARD_SIZE;t=Math.floor(Math.random()*n),r=Math.floor(Math.random()*n),e.isFieldChecked(t,r););return[t,r]},e}return _createClass(r)}(),ticTacToeGame=new Game("#game-menu","#tic-tac-toe-game");
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4udHMiXSwibmFtZXMiOlsiR2FtZSIsIl9jcmVhdGVDbGFzcyIsImdhbWVNZW51SWQiLCJnYW1lQ29udGFpbmVySWQiLCJfdGhpcyIsInRoaXMiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aWVzIiwiZ2FtZUNvdW50IiwidHVybkNvdW50IiwiaW5pdCIsIm1vZGUiLCJwMU1hcmsiLCJwMUxhYmVsIiwicDJNYXJrIiwicGxheWVyMiIsIkNQVVBsYXllciIsIlBsYXllciIsInBsYXllcjEiLCJ4UGxheWVyIiwib1BsYXllciIsInBsYXllclF1ZXVlIiwiZ2FtZUNvbnRhaW5lciIsImNsYXNzTGlzdCIsInJlbW92ZSIsInN0YXJ0R2FtZSIsInNjb3JlQm9hcmQiLCJnYW1lQm9hcmQiLCJ0dXJuSW5kaWNhdG9yIiwidXBkYXRlIiwiZ2V0Q3VycmVudFBsYXllck1hcmsiLCJtYWtlTW92ZUNQVSIsIm9uRmllbGRDbGljayIsImV2IiwiZmllbGRCdXR0b24iLCJ0YXJnZXQiLCJyb3ciLCJwYXJzZUludCIsImRhdGFzZXQiLCJjb2x1bW4iLCJtYWtlTW92ZSIsImdldEN1cnJlbnRQbGF5ZXIiLCJnZXRNYXJrIiwiaXNGaWVsZENoZWNrZWQiLCJjaGVja0ZpZWxkIiwiYWZ0ZXJNb3ZlIiwiZ2V0V2lubmluZ0ZpZWxkcyIsImNvbnNvbGUiLCJsb2ciLCJpc0Z1bGwiLCJpbmNyZWFzZVR1cm5Db3VudCIsImFwcGx5IiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiZ2FtZU1lbnUiLCJHYW1lTWVudSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIlNjb3JlQm9hcmQiLCJHYW1lQm9hcmQiLCJUdXJuSW5kaWNhdG9yIiwiZ2FtZUluaXQiLCJfdGhpczIiLCJmb3JtU3VibWl0QnV0dG9ucyIsImZvckVhY2giLCJidG4iLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlTWVudVN1Ym1pdEJ1dHRvbiIsInByZXZlbnREZWZhdWx0IiwiaXNBbnlPcHRpb25TZWxlY3RlZCIsImVycm9yTXNnIiwiaW5uZXJUZXh0IiwiZ2FtZU1vZGUiLCJnZXRDaGVja2VkT3B0aW9uTWFyayIsImFkZCIsIkFycmF5IiwiZnJvbSIsImZvcm1PcHRpb25zIiwic29tZSIsIm9wdGlvbiIsImNoZWNrZWQiLCJfc3RlcCIsIl9pdGVyYXRvciIsIl9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIiwicyIsIm4iLCJkb25lIiwidmFsdWUiLCJtYXJrIiwiZXJyIiwiZSIsImYiLCJtZW51Rm9ybSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfdGhpczMiLCJjdXJyZW50UGxheWVyTWFya0VsZW1lbnQiLCJjdXJyZW50UGxheWVyTWFya0ljb24iLCJzcmMiLCJjb25jYXQiLCJzY29yZUJvYXJkSWQiLCJfdGhpczQiLCJwMSIsInAyIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwidG9TdHJpbmciLCJwMkxhYmVsIiwidXBkYXRlU2NvcmUiLCJwMVNjb3JlIiwiZ2V0U2NvcmUiLCJwMlNjb3JlIiwidGllc1Njb3JlIiwic2NvcmVCb2FyZENvbnRhaW5lciIsImdhbWVCb2FyZElkIiwiZ2V0Q3VycmVudE1hcmsiLCJfdGhpczUiLCJCT0FSRF9TSVpFIiwiYm9hcmQiLCJib2FyZEZpZWxkRWxlbWVudHMiLCJib2FyZEVsZW1lbnQiLCJwdXNoIiwiRmllbGQiLCJjaGVjayIsImlzQ2hlY2tlZCIsImZsYXQiLCJldmVyeSIsImZpZWxkIiwiY2hlY2tSb3dzIiwiY2hlY2tDb2x1bW5zIiwiY2hlY2tEaWFnb25hbCIsImZpZWxkRWxlbWVudCIsImdhbWVPbkNsaWNrSGFuZGxlciIsIl90aGlzNiIsImhhbmRsZUhvdmVyIiwiY3VycmVudFBsYXllck1hcmsiLCJzZXRBdHRyaWJ1dGUiLCJoYW5kbGVCbHVyIiwicmVtb3ZlQXR0cmlidXRlIiwiaW5zZXJ0SW1hZ2VzIiwib0ltYWdlIiwiY3JlYXRlRWxlbWVudCIsIm9PdXRsaW5lSW1hZ2UiLCJ4SW1hZ2UiLCJ4T3V0bGluZUltYWdlIiwiYXBwZW5kQ2hpbGQiLCJuYW1lIiwiX3RoaXM3Iiwic2NvcmUiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJfY3JlYXRlU3VwZXIiLCJfdGhpczgiLCJib2FyZFNpemUiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ0aWNUYWNUb2VHYW1lIl0sIm1hcHBpbmdzIjoiZ3lIQUtBLElBQ01BLEtBQUlDLGFBZ0JULFNBQUFELEVBQVlFLEVBQW9CQyxHQUF1QixJQUFBQyxFQUFBQyxLQUFBQyxnQkFBQUQsS0FBQUwsQ0FBQSxFQUovQ0ssS0FBQUUsS0FBZSxFQUNmRixLQUFBRyxVQUFvQixFQUNwQkgsS0FBQUksVUFBb0IsRUFXNUJKLEtBQUFLLEtBQU8sU0FBQ0MsRUFBY0MsR0FDckIsSUFDSUMsRUFERUMsRUFBNEIsTUFBWEYsRUFBaUIsSUFBTSxJQVE3Q0csRUFIWSxpQkFBVEosR0FDSEUsRUFBVSxNQUVBLElBQUlHLFVBREosTUFDdUJGLENBQU0sSUFFdkNELEVBQVUsS0FFQSxJQUFJSSxPQURKLEtBQ29CSCxDQUFNLEdBRXJDSSxFQUFVLElBQUlELE9BQU9KLEVBQVNELENBQU0sRUFHckIsTUFBWEEsR0FDSFIsRUFBS2UsUUFBVUQsRUFDZmQsRUFBS2dCLFFBQVVMLElBRWZYLEVBQUtlLFFBQVVKLEVBQ2ZYLEVBQUtnQixRQUFVRixHQUloQmQsRUFBS2lCLFlBQWMsQ0FBQ2pCLEVBQUtlLFFBQVNmLEVBQUtnQixTQUd2Q2hCLEVBQUtrQixjQUFjQyxVQUFVQyxPQUFPLFFBQVEsRUFFNUNwQixFQUFLcUIsVUFBUyxDQUNmLEVBRUFwQixLQUFBb0IsVUFBWSxXQUVYckIsRUFBS3NCLFdBQVdoQixLQUFLTixFQUFLZSxRQUFTZixFQUFLZ0IsUUFBU2hCLEVBQUtHLElBQUksRUFHMURILEVBQUt1QixVQUFVakIsS0FBSSxFQUVuQk4sRUFBS3dCLGNBQWNDLE9BQU96QixFQUFLMEIscUJBQW9CLENBQUUsRUFHckQxQixFQUFLMkIsWUFBVyxDQUNqQixFQUVBMUIsS0FBQTJCLGFBQWUsU0FBQ0MsR0FFZixJQUFNQyxFQUFjRCxFQUFHRSxP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S0FBS0UsT0FBTSxFQUFLSCxDQUFTLEVBQ3JDbkMsRUFBTTFFLGVBQWVQLEVBQUtHLENBQU0sSUFDekMsTUFBTyxDQUFDSCxFQUFLRyxFQUNkLEVBQUVnSCxDQUNILENBQUMsT0FBQXRKLGFBQUFlLENBQUEsQ0FBQSxFQVY2QixFQWV4QjRJLGNBQXNCLElBQUk1SixLQUFLLGFBQWMsbUJBQW1CIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogdHlwZXMgKi9cclxudHlwZSBUcmlwbGVGaWVsZCA9IFtGaWVsZCwgRmllbGQsIEZpZWxkXTtcclxuLyogdHlwZXMgZW5kICovXHJcblxyXG4vKiBjbGFzc2VzICovXHJcbi8qIEdhbWUgY2xhc3Mgc3RhcnQgKi9cclxuY2xhc3MgR2FtZSB7XHJcblx0LyogZ2FtZSBlbGVtZW50cyAqL1xyXG5cdHByaXZhdGUgZ2FtZU1lbnU6IEdhbWVNZW51O1xyXG5cdHByaXZhdGUgZ2FtZUNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBnYW1lQm9hcmQ6IEdhbWVCb2FyZDtcclxuXHRwcml2YXRlIHNjb3JlQm9hcmQ6IFNjb3JlQm9hcmQ7XHJcblx0cHJpdmF0ZSB0dXJuSW5kaWNhdG9yOiBUdXJuSW5kaWNhdG9yO1xyXG5cdC8qIHBsYXllcnMgKi9cclxuXHRwcml2YXRlIHhQbGF5ZXI6IFBsYXllcjtcclxuXHRwcml2YXRlIG9QbGF5ZXI6IFBsYXllcjtcclxuXHRwcml2YXRlIHBsYXllclF1ZXVlOiBbUGxheWVyLCBQbGF5ZXJdO1xyXG5cdC8qIGdhbWUgc3RhdGVzICovXHJcblx0cHJpdmF0ZSB0aWVzOiBudW1iZXIgPSAwO1xyXG5cdHByaXZhdGUgZ2FtZUNvdW50OiBudW1iZXIgPSAwO1xyXG5cdHByaXZhdGUgdHVybkNvdW50OiBudW1iZXIgPSAwO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihnYW1lTWVudUlkOiBzdHJpbmcsIGdhbWVDb250YWluZXJJZDogc3RyaW5nKSB7XHJcblx0XHR0aGlzLmdhbWVNZW51ID0gbmV3IEdhbWVNZW51KGdhbWVNZW51SWQsIHRoaXMuaW5pdCk7XHJcblx0XHR0aGlzLmdhbWVNZW51LmluaXQoKTtcclxuXHRcdHRoaXMuZ2FtZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZ2FtZUNvbnRhaW5lcklkKTtcclxuXHRcdHRoaXMuc2NvcmVCb2FyZCA9IG5ldyBTY29yZUJvYXJkKCcjc2NvcmUtYm9hcmQnKTtcclxuXHRcdHRoaXMuZ2FtZUJvYXJkID0gbmV3IEdhbWVCb2FyZCgnI2dhbWUtYm9hcmQnLCB0aGlzLm9uRmllbGRDbGljaywgdGhpcy5nZXRDdXJyZW50UGxheWVyTWFyayk7XHJcblx0XHR0aGlzLnR1cm5JbmRpY2F0b3IgPSBuZXcgVHVybkluZGljYXRvcigpO1xyXG5cdH1cclxuXHJcblx0aW5pdCA9IChtb2RlOiBzdHJpbmcsIHAxTWFyazogc3RyaW5nKTogdm9pZCA9PiB7XHJcblx0XHRjb25zdCBwMk1hcms6IHN0cmluZyA9IHAxTWFyayA9PT0gJ3gnID8gJ28nIDogJ3gnO1xyXG5cdFx0bGV0IHAxTGFiZWw6IHN0cmluZywgcGxheWVyMTogUGxheWVyO1xyXG5cdFx0bGV0IHAyTGFiZWw6IHN0cmluZywgcGxheWVyMjogUGxheWVyO1xyXG5cclxuXHRcdC8qIGNyZWF0ZXMgbGFiZWxzIGFuZCBwbGF5ZXJzIGRlcGVuZGluZyBvbiBnYW1lIG1vZGUgKi9cclxuXHRcdGlmIChtb2RlID09PSAnc2luZ2xlcGxheWVyJykge1xyXG5cdFx0XHRwMUxhYmVsID0gJ3lvdSc7XHJcblx0XHRcdHAyTGFiZWwgPSAnY3B1JztcclxuXHRcdFx0cGxheWVyMiA9IG5ldyBDUFVQbGF5ZXIocDJMYWJlbCwgcDJNYXJrKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHAxTGFiZWwgPSAncDEnO1xyXG5cdFx0XHRwMkxhYmVsID0gJ3AyJztcclxuXHRcdFx0cGxheWVyMiA9IG5ldyBQbGF5ZXIocDJMYWJlbCwgcDJNYXJrKTtcclxuXHRcdH1cclxuXHRcdHBsYXllcjEgPSBuZXcgUGxheWVyKHAxTGFiZWwsIHAxTWFyayk7XHJcblxyXG5cdFx0LyogYXNzaWducyBjcmVhdGVkIHBsYXllcnMgdG8gcmlnaHQgc3BvdHMgKi9cclxuXHRcdGlmIChwMU1hcmsgPT09ICd4Jykge1xyXG5cdFx0XHR0aGlzLnhQbGF5ZXIgPSBwbGF5ZXIxO1xyXG5cdFx0XHR0aGlzLm9QbGF5ZXIgPSBwbGF5ZXIyO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy54UGxheWVyID0gcGxheWVyMjtcclxuXHRcdFx0dGhpcy5vUGxheWVyID0gcGxheWVyMTtcclxuXHRcdH1cclxuXHJcblx0XHQvKiBjcmVhdGVzIHR1cGxlIG9mIHBsYXllcnMsIHRvIGNob29zZSBjdXJyZW50IHBsYXllciBkZXBlbmRpbmcgb24gdHVybiBjb3VudGVyICovXHJcblx0XHR0aGlzLnBsYXllclF1ZXVlID0gW3RoaXMueFBsYXllciwgdGhpcy5vUGxheWVyXTtcclxuXHJcblx0XHQvKiBzaG93cyBnYW1lIGNvbnRhaW5lciAqL1xyXG5cdFx0dGhpcy5nYW1lQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG5cclxuXHRcdHRoaXMuc3RhcnRHYW1lKCk7XHJcblx0fTtcclxuXHJcblx0c3RhcnRHYW1lID0gKCk6IHZvaWQgPT4ge1xyXG5cdFx0LyogaW5pdGlhbGl6ZSBzY29yZSBib2FyZCB3aXRoIGNyZWF0ZWQgcGxheWVycyAqL1xyXG5cdFx0dGhpcy5zY29yZUJvYXJkLmluaXQodGhpcy54UGxheWVyLCB0aGlzLm9QbGF5ZXIsIHRoaXMudGllcyk7XHJcblxyXG5cdFx0LyogaW5pdGlhbGl6ZSBnYW1lIGJvYXJkICovXHJcblx0XHR0aGlzLmdhbWVCb2FyZC5pbml0KCk7XHJcblxyXG5cdFx0dGhpcy50dXJuSW5kaWNhdG9yLnVwZGF0ZSh0aGlzLmdldEN1cnJlbnRQbGF5ZXJNYXJrKCkpO1xyXG5cclxuXHRcdC8qIGlmIHN0YXJ0aW5nIHBsYXllciBpcyBDUFUgdGhlbiBtYWtlIGF1dG8gbW92ZSAqL1xyXG5cdFx0dGhpcy5tYWtlTW92ZUNQVSgpO1xyXG5cdH07XHJcblxyXG5cdG9uRmllbGRDbGljayA9IChldjogRXZlbnQpOiB2b2lkID0+IHtcclxuXHRcdC8qIHJldHJpZXZlIHJvdyBhbmQgY29sdW1uIGZyb20gY2xpY2tlZCBidXR0b24gYW5kIG1ha2UgbW92ZSAqL1xyXG5cdFx0Y29uc3QgZmllbGRCdXR0b24gPSBldi50YXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblx0XHRjb25zdCByb3c6IG51bWJlciA9IHBhcnNlSW50KGZpZWxkQnV0dG9uLmRhdGFzZXQucm93KTtcclxuXHRcdGNvbnN0IGNvbHVtbjogbnVtYmVyID0gcGFyc2VJbnQoZmllbGRCdXR0b24uZGF0YXNldC5jb2x1bW4pO1xyXG5cdFx0dGhpcy5tYWtlTW92ZShyb3csIGNvbHVtbik7XHJcblx0fTtcclxuXHJcblx0Z2V0Q3VycmVudFBsYXllck1hcmsgPSAoKTogc3RyaW5nID0+IHtcclxuXHRcdHJldHVybiB0aGlzLmdldEN1cnJlbnRQbGF5ZXIoKS5nZXRNYXJrKCk7XHJcblx0fTtcclxuXHJcblx0Z2V0Q3VycmVudFBsYXllciA9ICgpOiBQbGF5ZXIgPT4ge1xyXG5cdFx0cmV0dXJuIHRoaXMucGxheWVyUXVldWVbdGhpcy50dXJuQ291bnQgJSAyXTtcclxuXHR9O1xyXG5cclxuXHRtYWtlTW92ZSA9IChyb3c6IG51bWJlciwgY29sdW1uOiBudW1iZXIpOiB2b2lkID0+IHtcclxuXHRcdC8qIG9uIGZpZWxkIGNsaWNrLCBpZiBmaWVsZCBpcyBjaGVja2VkIHRoZW4gcmV0dXJuIGRvaW5nIG5vdGhpbmcgKi9cclxuXHRcdGlmICh0aGlzLmdhbWVCb2FyZC5pc0ZpZWxkQ2hlY2tlZChyb3csIGNvbHVtbikpIHJldHVybjtcclxuXHJcblx0XHQvKiBjaGVja3Mgc2VsZWN0ZWQgZmllbGQgKi9cclxuXHRcdHRoaXMuZ2FtZUJvYXJkLmNoZWNrRmllbGQodGhpcy5nZXRDdXJyZW50UGxheWVyKCkuZ2V0TWFyaygpLCByb3csIGNvbHVtbik7XHJcblx0XHR0aGlzLmFmdGVyTW92ZSgpO1xyXG5cdH07XHJcblxyXG5cdGFmdGVyTW92ZSA9ICgpOiB2b2lkID0+IHtcclxuXHRcdGNvbnN0IHdpbm5pbmdGaWVsZHMgPSB0aGlzLmdhbWVCb2FyZC5nZXRXaW5uaW5nRmllbGRzKCk7XHJcblx0XHRpZiAod2lubmluZ0ZpZWxkcyAhPT0gbnVsbCkge1xyXG5cdFx0XHRjb25zb2xlLmxvZyh0aGlzLmdldEN1cnJlbnRQbGF5ZXJNYXJrKCkgKyAnIGlzIHdpbm5lcicpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHRoaXMuZ2FtZUJvYXJkLmlzRnVsbCgpKSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKCdhIHRpZScpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5pbmNyZWFzZVR1cm5Db3VudCgpO1xyXG5cdFx0dGhpcy50dXJuSW5kaWNhdG9yLnVwZGF0ZSh0aGlzLmdldEN1cnJlbnRQbGF5ZXJNYXJrKCkpO1xyXG5cclxuXHRcdHRoaXMubWFrZU1vdmVDUFUoKTtcclxuXHR9O1xyXG5cclxuXHRtYWtlTW92ZUNQVSA9ICgpOiB2b2lkID0+IHtcclxuXHRcdC8qIGFmdGVyIGZpZWxkIGlzIGNoZWNrZWQsIGNoZWNrcyBpZiBjdXJyZW50IHBsYXllciBpcyBDUFUgYW5kIGlmIGlzLCB0aGVuIG1ha2VzIGEgbW92ZSAqL1xyXG5cdFx0aWYgKHRoaXMuZ2V0Q3VycmVudFBsYXllcigpIGluc3RhbmNlb2YgQ1BVUGxheWVyKSB7XHJcblx0XHRcdHRoaXMubWFrZU1vdmUoLi4uKHRoaXMuZ2V0Q3VycmVudFBsYXllcigpIGFzIENQVVBsYXllcikubWFrZU1vdmUodGhpcy5nYW1lQm9hcmQpKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRpbmNyZWFzZVR1cm5Db3VudCA9ICgpOiBudW1iZXIgPT4ge1xyXG5cdFx0cmV0dXJuICsrdGhpcy50dXJuQ291bnQ7XHJcblx0fTtcclxufVxyXG4vKiBHYW1lIGNsYXNzIGVuZCAqL1xyXG5cclxuLyogR2FtZU1lbnUgY2xhc3Mgc3RhcnQgKi9cclxuY2xhc3MgR2FtZU1lbnUge1xyXG5cdHByaXZhdGUgZ2FtZU1lbnU6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgbWVudUZvcm06IEhUTUxGb3JtRWxlbWVudDtcclxuXHRwcml2YXRlIGZvcm1PcHRpb25zOiBOb2RlTGlzdE9mPEhUTUxJbnB1dEVsZW1lbnQ+O1xyXG5cdHByaXZhdGUgZXJyb3JNc2c6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgZm9ybVN1Ym1pdEJ1dHRvbnM6IE5vZGVMaXN0T2Y8SFRNTEJ1dHRvbkVsZW1lbnQ+O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihnYW1lTWVudUlkOiBzdHJpbmcsIHByaXZhdGUgZ2FtZUluaXQ6IChtb2RlOiBzdHJpbmcsIHAxTWFyazogc3RyaW5nKSA9PiB2b2lkKSB7XHJcblx0XHR0aGlzLmdhbWVNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihnYW1lTWVudUlkKTtcclxuXHRcdHRoaXMubWVudUZvcm0gPSB0aGlzLmdhbWVNZW51LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcclxuXHRcdHRoaXMuZm9ybU9wdGlvbnMgPSB0aGlzLm1lbnVGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXScpO1xyXG5cdFx0dGhpcy5lcnJvck1zZyA9IHRoaXMubWVudUZvcm0ucXVlcnlTZWxlY3RvcignW3JvbGU9XCJhbGVydFwiXScpO1xyXG5cdFx0dGhpcy5mb3JtU3VibWl0QnV0dG9ucyA9IHRoaXMubWVudUZvcm0ucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uW3R5cGU9XCJzdWJtaXRcIl0nKTtcclxuXHR9XHJcblxyXG5cdGluaXQgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLmZvcm1TdWJtaXRCdXR0b25zLmZvckVhY2goYnRuID0+IGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlTWVudVN1Ym1pdEJ1dHRvbikpO1xyXG5cdH07XHJcblxyXG5cdGhhbmRsZU1lbnVTdWJtaXRCdXR0b24gPSAoZXY6IEV2ZW50KTogdm9pZCA9PiB7XHJcblx0XHRldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0Lyogc2hvd3MgZXJyb3IgaWYgYW55IGZpZWxkIHdhc24ndCBzZWxlY3RlZCAqL1xyXG5cdFx0aWYgKCF0aGlzLmlzQW55T3B0aW9uU2VsZWN0ZWQoKSkge1xyXG5cdFx0XHR0aGlzLmVycm9yTXNnLmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcclxuXHRcdFx0dGhpcy5lcnJvck1zZy5pbm5lclRleHQgPSAnUGxlYXNlIHNlbGVjdCBtYXJrIGZvciBwbGF5ZXIgMSc7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuZXJyb3JNc2cuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xyXG5cdFx0XHR0aGlzLmVycm9yTXNnLmlubmVyVGV4dCA9ICcnO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qIHJldHJpZXZlIGdhbWUgbW9kZSBmcm9tIHN1Ym1pdCBidXR0b24gY2xpY2tlZCBhbmQgc2VsZWN0ZWQgbWFyayBmcm9tIG9wdGlvbnMgKi9cclxuXHRcdGNvbnN0IHN1Ym1pdEJ0bjogSFRNTEJ1dHRvbkVsZW1lbnQgPSBldi50YXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblx0XHRjb25zdCBnYW1lTW9kZTogc3RyaW5nID0gc3VibWl0QnRuLmRhdGFzZXQubW9kZTtcclxuXHRcdGNvbnN0IHAxTWFyazogc3RyaW5nID0gdGhpcy5nZXRDaGVja2VkT3B0aW9uTWFyaygpO1xyXG5cclxuXHRcdC8qIGhpZGVzIGdhbWUgbWVudSAqL1xyXG5cdFx0dGhpcy5nYW1lTWVudS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuXHJcblx0XHQvKiBhbmQgcnVucyBnYW1lIGluaXRpYWxpemF0aW9uICovXHJcblx0XHR0aGlzLmdhbWVJbml0KGdhbWVNb2RlLCBwMU1hcmspOyAvLyBtZXRob2QgZnJvbSB0aGUgcGFyZW50IEdhbWUgY2xhc3NcclxuXHR9O1xyXG5cclxuXHRpc0FueU9wdGlvblNlbGVjdGVkID0gKCk6IGJvb2xlYW4gPT4ge1xyXG5cdFx0cmV0dXJuIEFycmF5LmZyb20odGhpcy5mb3JtT3B0aW9ucykuc29tZShvcHRpb24gPT4gb3B0aW9uLmNoZWNrZWQpO1xyXG5cdH07XHJcblxyXG5cdGdldENoZWNrZWRPcHRpb25NYXJrID0gKCk6IHN0cmluZyA9PiB7XHJcblx0XHRmb3IgKGNvbnN0IG9wdGlvbiBvZiB0aGlzLmZvcm1PcHRpb25zKSB7XHJcblx0XHRcdGlmIChvcHRpb24uY2hlY2tlZCkgcmV0dXJuIG9wdGlvbi5kYXRhc2V0Lm1hcms7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gJyc7XHJcblx0fTtcclxufVxyXG4vKiBHYW1lTWVudSBjbGFzcyBlbmQgKi9cclxuXHJcbi8qIFR1cm5JbmRpY2F0b3IgY2xhc3Mgc3RhcnQgKi9cclxuY2xhc3MgVHVybkluZGljYXRvciB7XHJcblx0cHJpdmF0ZSBjdXJyZW50UGxheWVyTWFya0VsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgY3VycmVudFBsYXllck1hcmtJY29uOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG5cclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdHRoaXMuY3VycmVudFBsYXllck1hcmtFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2N1cnJlbnQtcGxheWVyLW1hcmsnKTtcclxuXHRcdHRoaXMuY3VycmVudFBsYXllck1hcmtJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2N1cnJlbnQtcGxheWVyLW1hcmstaWNvbicpO1xyXG5cdH1cclxuXHJcblx0dXBkYXRlID0gKG1hcms6IHN0cmluZykgPT4ge1xyXG5cdFx0dGhpcy5jdXJyZW50UGxheWVyTWFya0VsZW1lbnQuaW5uZXJUZXh0ID0gbWFyaztcclxuXHRcdHRoaXMuY3VycmVudFBsYXllck1hcmtJY29uLnNyYyA9IGAuL2Rpc3QvYXNzZXRzL2ljb24tJHttYXJrfS5zdmdgO1xyXG5cdH07XHJcbn1cclxuLyogVHVybkluZGljYXRvciBjbGFzcyBlbmQgKi9cclxuXHJcbi8qIFNjb3JlQm9hcmQgY2xhc3Mgc3RhcnQgKi9cclxuY2xhc3MgU2NvcmVCb2FyZCB7XHJcblx0cHJpdmF0ZSBzY29yZUJvYXJkQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIHAxTGFiZWw6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgcDFTY29yZTogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBwMkxhYmVsOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIHAyU2NvcmU6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgdGllc1Njb3JlOiBIVE1MRWxlbWVudDtcclxuXHJcblx0Y29uc3RydWN0b3Ioc2NvcmVCb2FyZElkOiBzdHJpbmcpIHtcclxuXHRcdHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2NvcmVCb2FyZElkKTtcclxuXHRcdHRoaXMucDFMYWJlbCA9IHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjcDEtZ2FtZS1uYW1lJyk7XHJcblx0XHR0aGlzLnAxU2NvcmUgPSB0aGlzLnNjb3JlQm9hcmRDb250YWluZXIucXVlcnlTZWxlY3RvcignI3AxLWdhbWUtc2NvcmUnKTtcclxuXHRcdHRoaXMucDJMYWJlbCA9IHRoaXMuc2NvcmVCb2FyZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcjcDItZ2FtZS1uYW1lJyk7XHJcblx0XHR0aGlzLnAyU2NvcmUgPSB0aGlzLnNjb3JlQm9hcmRDb250YWluZXIucXVlcnlTZWxlY3RvcignI3AyLWdhbWUtc2NvcmUnKTtcclxuXHRcdHRoaXMudGllc1Njb3JlID0gdGhpcy5zY29yZUJvYXJkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJyNnYW1lLXRpZXMnKTtcclxuXHR9XHJcblxyXG5cdGluaXQgPSAocDE6IFBsYXllciwgcDI6IFBsYXllciwgdGllczogbnVtYmVyID0gMCk6IHZvaWQgPT4ge1xyXG5cdFx0dGhpcy5wMUxhYmVsLmlubmVyVGV4dCA9IHAxLnRvU3RyaW5nKCk7XHJcblx0XHR0aGlzLnAyTGFiZWwuaW5uZXJUZXh0ID0gcDIudG9TdHJpbmcoKTtcclxuXHRcdHRoaXMudXBkYXRlU2NvcmUocDEsIHAyLCB0aWVzKTtcclxuXHR9O1xyXG5cclxuXHR1cGRhdGVTY29yZSA9IChwMTogUGxheWVyLCBwMjogUGxheWVyLCB0aWVzOiBudW1iZXIpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMucDFTY29yZS5pbm5lclRleHQgPSBwMS5nZXRTY29yZSgpLnRvU3RyaW5nKCk7XHJcblx0XHR0aGlzLnAyU2NvcmUuaW5uZXJUZXh0ID0gcDIuZ2V0U2NvcmUoKS50b1N0cmluZygpO1xyXG5cdFx0dGhpcy50aWVzU2NvcmUuaW5uZXJUZXh0ID0gdGllcy50b1N0cmluZygpO1xyXG5cdH07XHJcbn1cclxuLyogU2NvcmVCb2FyZCBjbGFzcyBlbmQgKi9cclxuXHJcbi8qIEdhbWVCb2FyZCBjbGFzcyBzdGFydCAqL1xyXG5jbGFzcyBHYW1lQm9hcmQge1xyXG5cdEJPQVJEX1NJWkU6IG51bWJlciA9IDM7XHJcblx0cHJpdmF0ZSBib2FyZEVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgYm9hcmQ6IEZpZWxkW11bXSA9IFtbXSwgW10sIFtdXTtcclxuXHJcblx0Y29uc3RydWN0b3IoZ2FtZUJvYXJkSWQ6IHN0cmluZywgcHJpdmF0ZSBvbkZpZWxkQ2xpY2s6IChldjogRXZlbnQpID0+IHZvaWQsIHByaXZhdGUgZ2V0Q3VycmVudE1hcms6ICgpID0+IHN0cmluZykge1xyXG5cdFx0dGhpcy5ib2FyZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGdhbWVCb2FyZElkKTtcclxuXHR9XHJcblxyXG5cdGluaXQgPSAoKTogdm9pZCA9PiB7XHJcblx0XHQvKiBnZXRzIGFsbCBib2FyZCBmaWVsZHMgKi9cclxuXHRcdGNvbnN0IGJvYXJkRmllbGRFbGVtZW50czogTm9kZUxpc3RPZjxIVE1MQnV0dG9uRWxlbWVudD4gPSB0aGlzLmJvYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ2FtZS1ib2FyZF9fZmllbGQnKTtcclxuXHJcblx0XHQvKiBjcmVhdGluZyBmaWVsZHMgKi9cclxuXHRcdGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IHRoaXMuYm9hcmQubGVuZ3RoOyByb3crKykge1xyXG5cdFx0XHRmb3IgKGxldCBjb2x1bW4gPSAwOyBjb2x1bW4gPCB0aGlzLkJPQVJEX1NJWkU7IGNvbHVtbisrKSB7XHJcblx0XHRcdFx0dGhpcy5ib2FyZFtyb3ddLnB1c2goXHJcblx0XHRcdFx0XHRuZXcgRmllbGQoXHJcblx0XHRcdFx0XHRcdHJvdyxcclxuXHRcdFx0XHRcdFx0Y29sdW1uLFxyXG5cdFx0XHRcdFx0XHRib2FyZEZpZWxkRWxlbWVudHNbY29sdW1uICsgcm93ICogdGhpcy5CT0FSRF9TSVpFXSxcclxuXHRcdFx0XHRcdFx0Ly8gaGFuZGxlcyBmb3IgZmllbGQoYnV0dG9ucykgZXZlbnRzXHJcblx0XHRcdFx0XHRcdHRoaXMub25GaWVsZENsaWNrLFxyXG5cdFx0XHRcdFx0XHR0aGlzLmdldEN1cnJlbnRNYXJrXHJcblx0XHRcdFx0XHQpXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8qIGNoZWNrcy9tYXJrcyBmaWVsZCBvbiBwYXNzZWQgcG9zaXRpb24gKi9cclxuXHRjaGVja0ZpZWxkID0gKG1hcms6IHN0cmluZywgcm93OiBudW1iZXIsIGNvbHVtbjogbnVtYmVyKSA9PiB7XHJcblx0XHRpZiAocm93IDwgdGhpcy5ib2FyZC5sZW5ndGggJiYgY29sdW1uIDwgdGhpcy5ib2FyZFswXS5sZW5ndGgpIHtcclxuXHRcdFx0dGhpcy5ib2FyZFtyb3ddW2NvbHVtbl0uY2hlY2sobWFyayk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0aXNGaWVsZENoZWNrZWQgPSAocm93OiBudW1iZXIsIGNvbHVtbjogbnVtYmVyKTogYm9vbGVhbiA9PiB7XHJcblx0XHRyZXR1cm4gdGhpcy5ib2FyZFtyb3ddW2NvbHVtbl0uaXNDaGVja2VkKCk7XHJcblx0fTtcclxuXHJcblx0aXNGdWxsID0gKCk6IGJvb2xlYW4gPT4ge1xyXG5cdFx0cmV0dXJuIHRoaXMuYm9hcmQuZmxhdCgpLmV2ZXJ5KGZpZWxkID0+IGZpZWxkLmlzQ2hlY2tlZCgpKTtcclxuXHR9O1xyXG5cclxuXHRnZXRXaW5uaW5nRmllbGRzID0gKCk6IFRyaXBsZUZpZWxkIHwgbnVsbCA9PiB7XHJcblx0XHRyZXR1cm4gdGhpcy5jaGVja1Jvd3MoKSB8fCB0aGlzLmNoZWNrQ29sdW1ucygpIHx8IHRoaXMuY2hlY2tEaWFnb25hbCgpO1xyXG5cdH07XHJcblxyXG5cdGNoZWNrUm93cyA9ICgpOiBUcmlwbGVGaWVsZCB8IG51bGwgPT4ge1xyXG5cdFx0Zm9yIChsZXQgcm93ID0gMDsgcm93IDwgdGhpcy5CT0FSRF9TSVpFOyByb3crKykge1xyXG5cdFx0XHRpZiAoXHJcblx0XHRcdFx0dGhpcy5ib2FyZFtyb3ddWzBdLmdldE1hcmsoKSAhPT0gbnVsbCAmJlxyXG5cdFx0XHRcdHRoaXMuYm9hcmRbcm93XVswXS5nZXRNYXJrKCkgPT09IHRoaXMuYm9hcmRbcm93XVsxXS5nZXRNYXJrKCkgJiZcclxuXHRcdFx0XHR0aGlzLmJvYXJkW3Jvd11bMV0uZ2V0TWFyaygpID09PSB0aGlzLmJvYXJkW3Jvd11bMl0uZ2V0TWFyaygpXHJcblx0XHRcdClcclxuXHRcdFx0XHRyZXR1cm4gW3RoaXMuYm9hcmRbcm93XVswXSwgdGhpcy5ib2FyZFtyb3ddWzFdLCB0aGlzLmJvYXJkW3Jvd11bMl1dO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fTtcclxuXHJcblx0Y2hlY2tDb2x1bW5zID0gKCk6IFRyaXBsZUZpZWxkIHwgbnVsbCA9PiB7XHJcblx0XHRmb3IgKGxldCBjb2x1bW4gPSAwOyBjb2x1bW4gPCB0aGlzLkJPQVJEX1NJWkU7IGNvbHVtbisrKSB7XHJcblx0XHRcdGlmIChcclxuXHRcdFx0XHR0aGlzLmJvYXJkWzBdW2NvbHVtbl0uZ2V0TWFyaygpICE9PSBudWxsICYmXHJcblx0XHRcdFx0dGhpcy5ib2FyZFswXVtjb2x1bW5dLmdldE1hcmsoKSA9PT0gdGhpcy5ib2FyZFsxXVtjb2x1bW5dLmdldE1hcmsoKSAmJlxyXG5cdFx0XHRcdHRoaXMuYm9hcmRbMV1bY29sdW1uXS5nZXRNYXJrKCkgPT09IHRoaXMuYm9hcmRbMl1bY29sdW1uXS5nZXRNYXJrKClcclxuXHRcdFx0KVxyXG5cdFx0XHRcdHJldHVybiBbdGhpcy5ib2FyZFswXVtjb2x1bW5dLCB0aGlzLmJvYXJkWzFdW2NvbHVtbl0sIHRoaXMuYm9hcmRbMl1bY29sdW1uXV07XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9O1xyXG5cclxuXHRjaGVja0RpYWdvbmFsID0gKCk6IFRyaXBsZUZpZWxkIHwgbnVsbCA9PiB7XHJcblx0XHQvKiB0b3AgbGVmdCwgbWlkZGxlLCBhbmQgYm90dG9tIHJpZ2h0ICovXHJcblx0XHRpZiAoXHJcblx0XHRcdHRoaXMuYm9hcmRbMV1bMV0uZ2V0TWFyaygpICE9PSBudWxsICYmXHJcblx0XHRcdHRoaXMuYm9hcmRbMF1bMF0uZ2V0TWFyaygpID09PSB0aGlzLmJvYXJkWzFdWzFdLmdldE1hcmsoKSAmJlxyXG5cdFx0XHR0aGlzLmJvYXJkWzFdWzFdLmdldE1hcmsoKSA9PT0gdGhpcy5ib2FyZFsyXVsyXS5nZXRNYXJrKClcclxuXHRcdClcclxuXHRcdFx0cmV0dXJuIFt0aGlzLmJvYXJkWzBdWzBdLCB0aGlzLmJvYXJkWzFdWzFdLCB0aGlzLmJvYXJkWzJdWzJdXTtcclxuXHJcblx0XHQvKiB0b3AgcmlnaHQsIG1pZGRsZSwgYW5kIGJvdHRvbSBsZWZ0ICovXHJcblx0XHRpZiAoXHJcblx0XHRcdHRoaXMuYm9hcmRbMV1bMV0uZ2V0TWFyaygpICE9PSBudWxsICYmXHJcblx0XHRcdHRoaXMuYm9hcmRbMF1bMl0uZ2V0TWFyaygpID09PSB0aGlzLmJvYXJkWzFdWzFdLmdldE1hcmsoKSAmJlxyXG5cdFx0XHR0aGlzLmJvYXJkWzFdWzFdLmdldE1hcmsoKSA9PT0gdGhpcy5ib2FyZFsyXVswXS5nZXRNYXJrKClcclxuXHRcdClcclxuXHRcdFx0cmV0dXJuIFt0aGlzLmJvYXJkWzBdWzBdLCB0aGlzLmJvYXJkWzFdWzFdLCB0aGlzLmJvYXJkWzJdWzJdXTtcclxuXHJcblx0XHQvKiBubyBmaWVsZHMgbWF0Y2hlZCAqL1xyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fTtcclxufVxyXG4vKiBHYW1lQm9hcmQgY2xhc3MgZW5kICovXHJcblxyXG4vKiBGaWVsZCBjbGFzcyBzdGFydCAqL1xyXG5jbGFzcyBGaWVsZCB7XHJcblx0cHJpdmF0ZSBtYXJrOiBzdHJpbmcgPSBudWxsO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdHByaXZhdGUgcm93OiBudW1iZXIsXHJcblx0XHRwcml2YXRlIGNvbHVtbjogbnVtYmVyLFxyXG5cdFx0cHJpdmF0ZSBmaWVsZEVsZW1lbnQ6IEhUTUxCdXR0b25FbGVtZW50LFxyXG5cdFx0cHJpdmF0ZSBnYW1lT25DbGlja0hhbmRsZXI6IChldjogRXZlbnQpID0+IHZvaWQsXHJcblx0XHRwcml2YXRlIGdldEN1cnJlbnRNYXJrOiAoKSA9PiBzdHJpbmdcclxuXHQpIHtcclxuXHRcdGlmICh0aGlzLmZpZWxkRWxlbWVudCkge1xyXG5cdFx0XHQvKiBjbGljayBoYW5kbGluZyAqL1xyXG5cdFx0XHR0aGlzLmZpZWxkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZ2FtZU9uQ2xpY2tIYW5kbGVyKTtcclxuXHJcblx0XHRcdC8qIGhvdmVyL2ZvY3VzIGluIGhhbmRsaW5nICovXHJcblx0XHRcdHRoaXMuZmllbGRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIHRoaXMuaGFuZGxlSG92ZXIpO1xyXG5cdFx0XHR0aGlzLmZpZWxkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJywgdGhpcy5oYW5kbGVIb3Zlcik7XHJcblxyXG5cdFx0XHQvKiBob3Zlci9mb2N1cyBvdXQgaGFuZGxpbmcgKi9cclxuXHRcdFx0dGhpcy5maWVsZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCB0aGlzLmhhbmRsZUJsdXIpO1xyXG5cdFx0XHR0aGlzLmZpZWxkRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIHRoaXMuaGFuZGxlQmx1cik7XHJcblxyXG5cdFx0XHQvKiBzZXR0aW5nIGF0dHJpYnV0cyAqL1xyXG5cdFx0XHR0aGlzLmZpZWxkRWxlbWVudC5kYXRhc2V0LnJvdyA9IHRoaXMucm93LnRvU3RyaW5nKCk7XHJcblx0XHRcdHRoaXMuZmllbGRFbGVtZW50LmRhdGFzZXQuY29sdW1uID0gdGhpcy5jb2x1bW4udG9TdHJpbmcoKTtcclxuXHRcdFx0dGhpcy5maWVsZEVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgYFJvdyAke3RoaXMucm93ICsgMX0sIGNvbHVtbiAke3RoaXMuY29sdW1uICsgMX0sIGVtcHR5IGZpZWxkYCk7XHJcblxyXG5cdFx0XHR0aGlzLmluc2VydEltYWdlcygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyogaG92ZXIvZm9jdXMgaW4gZmllbGQgaGFuZGxlICovXHJcblx0aGFuZGxlSG92ZXIgPSAoKTogdm9pZCA9PiB7XHJcblx0XHRjb25zdCBjdXJyZW50UGxheWVyTWFyayA9IHRoaXMuZ2V0Q3VycmVudE1hcmsoKTtcclxuXHRcdHRoaXMuZmllbGRFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1jdXJyZW50LXBsYXllcicsIGN1cnJlbnRQbGF5ZXJNYXJrKTtcclxuXHR9O1xyXG5cclxuXHQvKiBob3Zlci9mb2N1cyBvdXQgZmllbGQgaGFuZGxlICovXHJcblx0aGFuZGxlQmx1ciA9ICgpID0+IHtcclxuXHRcdHRoaXMuZmllbGRFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1jdXJyZW50LXBsYXllcicpO1xyXG5cdH07XHJcblxyXG5cdGluc2VydEltYWdlcyA9ICgpID0+IHtcclxuXHRcdC8qIE8gaW1hZ2UgKi9cclxuXHRcdGNvbnN0IG9JbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG5cdFx0b0ltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgJy4vZGlzdC9hc3NldHMvaWNvbi1vLnN2ZycpO1xyXG5cdFx0b0ltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgJycpO1xyXG5cdFx0b0ltYWdlLnNldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJywgJ28taWNvbicpO1xyXG5cclxuXHRcdC8qIE8gb3V0bGluZSBpbWFnZSAqL1xyXG5cdFx0Y29uc3Qgb091dGxpbmVJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG5cdFx0b091dGxpbmVJbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsICcuL2Rpc3QvYXNzZXRzL2ljb24tby1vdXRsaW5lLnN2ZycpO1xyXG5cdFx0b091dGxpbmVJbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsICcnKTtcclxuXHRcdG9PdXRsaW5lSW1hZ2Uuc2V0QXR0cmlidXRlKCdkYXRhLW5hbWUnLCAnby1vdXRsaW5lLWljb24nKTtcclxuXHJcblx0XHQvKiBYIGltYWdlICovXHJcblx0XHRjb25zdCB4SW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuXHRcdHhJbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsICcuL2Rpc3QvYXNzZXRzL2ljb24teC5zdmcnKTtcclxuXHRcdHhJbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsICcnKTtcclxuXHRcdHhJbWFnZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScsICd4LWljb24nKTtcclxuXHJcblx0XHQvKiBYIG91dGxpbmUgaW1hZ2UgKi9cclxuXHRcdGNvbnN0IHhPdXRsaW5lSW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuXHRcdHhPdXRsaW5lSW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCAnLi9kaXN0L2Fzc2V0cy9pY29uLXgtb3V0bGluZS5zdmcnKTtcclxuXHRcdHhPdXRsaW5lSW1hZ2Uuc2V0QXR0cmlidXRlKCdhbHQnLCAnJyk7XHJcblx0XHR4T3V0bGluZUltYWdlLnNldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJywgJ3gtb3V0bGluZS1pY29uJyk7XHJcblxyXG5cdFx0LyogYXBwZW5kaW5nIGNyZWF0ZWQgaW1hZ2VzIHRvIHRoZSBidXR0b24gKi9cclxuXHRcdHRoaXMuZmllbGRFbGVtZW50LmFwcGVuZENoaWxkKG9JbWFnZSk7XHJcblx0XHR0aGlzLmZpZWxkRWxlbWVudC5hcHBlbmRDaGlsZCh4SW1hZ2UpO1xyXG5cdFx0dGhpcy5maWVsZEVsZW1lbnQuYXBwZW5kQ2hpbGQob091dGxpbmVJbWFnZSk7XHJcblx0XHR0aGlzLmZpZWxkRWxlbWVudC5hcHBlbmRDaGlsZCh4T3V0bGluZUltYWdlKTtcclxuXHR9O1xyXG5cclxuXHRjaGVjayA9IChtYXJrOiBzdHJpbmcpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMubWFyayA9IG1hcms7XHJcblx0XHR0aGlzLmZpZWxkRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBgUm93ICR7dGhpcy5yb3cgKyAxfSwgY29sdW1uICR7dGhpcy5jb2x1bW4gKyAxfSwgJHt0aGlzLm1hcmt9IG1hcmtgKTtcclxuXHRcdHRoaXMuZmllbGRFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1tYXJrJywgbWFyayk7XHJcblx0fTtcclxuXHJcblx0aXNDaGVja2VkID0gKCk6IGJvb2xlYW4gPT4ge1xyXG5cdFx0cmV0dXJuIHRoaXMubWFyayAhPT0gbnVsbDtcclxuXHR9O1xyXG5cclxuXHRnZXRNYXJrID0gKCk6IHN0cmluZyA9PiB7XHJcblx0XHRyZXR1cm4gdGhpcy5tYXJrO1xyXG5cdH07XHJcbn1cclxuLyogRmllbGQgY2xhc3MgZW5kICovXHJcblxyXG4vKiBQbGF5ZXIgY2xhc3Mgc3RhcnQgKi9cclxuY2xhc3MgUGxheWVyIHtcclxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIG5hbWU6IHN0cmluZywgcHJpdmF0ZSBtYXJrOiBzdHJpbmcsIHByaXZhdGUgc2NvcmU6IG51bWJlciA9IDApIHt9XHJcblxyXG5cdHRvU3RyaW5nID0gKCk6IHN0cmluZyA9PiBgJHt0aGlzLm1hcmt9ICgke3RoaXMubmFtZX0pYDtcclxuXHJcblx0Z2V0TWFyayA9ICgpOiBzdHJpbmcgPT4gdGhpcy5tYXJrO1xyXG5cclxuXHRnZXRTY29yZSA9ICgpOiBudW1iZXIgPT4gdGhpcy5zY29yZTtcclxuXHJcblx0dXBkYXRlU2NvcmUgPSAoKTogbnVtYmVyID0+ICsrdGhpcy5zY29yZTtcclxufVxyXG5cclxuY2xhc3MgQ1BVUGxheWVyIGV4dGVuZHMgUGxheWVyIHtcclxuXHRtYWtlTW92ZSA9IChib2FyZDogR2FtZUJvYXJkKTogW251bWJlciwgbnVtYmVyXSA9PiB7XHJcblx0XHRjb25zdCBib2FyZFNpemUgPSBib2FyZC5CT0FSRF9TSVpFO1xyXG5cdFx0bGV0IHJvdywgY29sdW1uO1xyXG5cdFx0ZG8ge1xyXG5cdFx0XHRyb3cgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBib2FyZFNpemUpO1xyXG5cdFx0XHRjb2x1bW4gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBib2FyZFNpemUpO1xyXG5cdFx0fSB3aGlsZSAoYm9hcmQuaXNGaWVsZENoZWNrZWQocm93LCBjb2x1bW4pKTtcclxuXHRcdHJldHVybiBbcm93LCBjb2x1bW5dO1xyXG5cdH07XHJcbn1cclxuLyogUGxheWVyIGNsYXNzIGVuZCAqL1xyXG4vKiBjbGFzc2VzIGVuZCAqL1xyXG5cclxuLyogZ2FtZSBvYmplY3RzICovXHJcbmNvbnN0IHRpY1RhY1RvZUdhbWU6IEdhbWUgPSBuZXcgR2FtZSgnI2dhbWUtbWVudScsICcjdGljLXRhYy10b2UtZ2FtZScpO1xyXG4vKiBnYW1lIG9iamVjdHMgZW5kICovXHJcbiJdfQ==
